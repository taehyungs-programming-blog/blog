---
layout: default
title: "(02. Experience)"
parent: "(UE Lyra Review)"
has_children: true
nav_order: 1
---

* [Get Code ğŸŒŸ](https://github.com/Arthur880708/LyraCloneSample)

---

## ìš°ì„ , GameModeì— ëŒ€í•´ ë¨¼ì € ì•Œì•„ì•¼ í•œë‹¤.

* GameModeëŠ” Unreal Engineì—ì„œ ê²Œì„ì˜ ì „ë°˜ì ì¸ ê·œì¹™ê³¼ íë¦„ì„ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. 
* ê²Œì„ì´ ì‹œì‘ë  ë•Œ ë¡œë“œë˜ë©°, í”Œë ˆì´ì–´ê°€ ì–´ë–¤ ìºë¦­í„°ë¡œ ì‹œì‘í•˜ëŠ”ì§€, ì–´ë–¤ HUDë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€, ê²Œì„ì˜ ìŠ¹ë¦¬ ì¡°ê±´ì€ ë¬´ì—‡ì¸ì§€ ë“±ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê²Œì„ì˜ ê¸°ë³¸ ì„¤ì •ê³¼ ë£°ì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* ì£¼ìš” ì—­í•  ë° ê¸°ëŠ¥:
    * í”Œë ˆì´ì–´ ì„¤ì •:
        * Default Pawn Class: í”Œë ˆì´ì–´ê°€ ì¡°ì¢…í•˜ê²Œ ë  ê¸°ë³¸ ìºë¦­í„°(í°)ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
        * Player Controller Class: í”Œë ˆì´ì–´ì˜ ì…ë ¥ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
        * Player State Class: ê° í”Œë ˆì´ì–´ì˜ ìƒíƒœ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
    * ê²Œì„ íë¦„ ê´€ë¦¬:
        * Game State Class: ê²Œì„ì˜ ì „ë°˜ì ì¸ ìƒíƒœë¥¼ ê³µìœ í•˜ê³  ë™ê¸°í™”í•©ë‹ˆë‹¤.
        * HUD Class: ê²Œì„ í™”ë©´ì— í‘œì‹œë˜ëŠ” UI ìš”ì†Œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
        * Rules and Mechanics: ê²Œì„ì˜ ìŠ¹ë¦¬ ì¡°ê±´, ì ìˆ˜ ê³„ì‚° ë°©ì‹, ë¦¬ìŠ¤í° ê·œì¹™ ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
    * ì›”ë“œ ë° ë ˆë²¨ ì„¤ì •:
        * íŠ¹ì • ë ˆë²¨ì—ì„œ ì‚¬ìš©í•  GameModeë¥¼ ì§€ì •í•˜ì—¬ ë ˆë²¨ë³„ë¡œ ë‹¤ë¥¸ ê²Œì„ ê·œì¹™ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* ë¬¸ì œì ?
    * ìœ„ì™€ê°™ì´ ê¸°ëŠ¥ì´ ë„ˆë¬´ ë§ê¸°ì— GameModeë¥¼ ë³€ê²½í•˜ëŠ” ìì²´ê°€ ë¶€ë‹´ì´ í¬ë‹¤.
    * ì–´ë–»ê²Œ í•´ê²°í•˜ë©´ ì¢‹ì„ê¹Œ? -> Experienceì˜ íƒ„ìƒ

---

## Experienceë€?

* ExperienceëŠ” Unreal Engine 5ì—ì„œ ë„ì…ëœ ê°œë…ìœ¼ë¡œ, íŠ¹íˆ Lyra Starter Game ìƒ˜í”Œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. 
* ì´ëŠ” ê²Œì„ì˜ íŠ¹ì • ëª¨ë“œë‚˜ ìƒíƒœì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥, ì„¤ì •, ìì›ì„ ì •ì˜í•˜ëŠ” ë°ì´í„° ìì‚°ì…ë‹ˆë‹¤.
	* ê²Œì„ì†ì˜ Frameworkë¼ ìƒê°í•˜ë©´ ëœë‹¤.

* ì£¼ìš” ì—­í•  ë° ê¸°ëŠ¥:
    * ê²Œì„ ëª¨ë“œ êµ¬ì„±:
        * Experience Definitionì„ í†µí•´ ê²Œì„ ëª¨ë“œì—ì„œ ì‚¬ìš©ë  ê¸°ëŠ¥ê³¼ ì„¤ì •ì„ ë°ì´í„°ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
        * ê²Œì„ì´ ì‹œì‘ë  ë•Œ í•´ë‹¹ Experienceë¥¼ ë¡œë“œí•˜ì—¬ í•„ìš”í•œ ì‹œìŠ¤í…œê³¼ ìì‚°ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    * ëª¨ë“ˆí™”ëœ ê¸°ëŠ¥ ê´€ë¦¬:
        * Game Feature Pluginsì™€ ì—°ë™ë˜ì–´ ê²Œì„ì˜ ê¸°ëŠ¥ì„ ëª¨ë“ˆí™”í•˜ê³  í•„ìš”ì— ë”°ë¼ ë¡œë“œí•˜ê±°ë‚˜ ì–¸ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    * ë°ì´í„° ë“œë¦¬ë¸ ë°©ì‹:
        * ì½”ë“œ ìˆ˜ì • ì—†ì´ë„ ë°ì´í„° ìì‚°ì„ í¸ì§‘í•˜ì—¬ ê²Œì„ì˜ ëª¨ë“œë‚˜ ê¸°ëŠ¥ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```cpp
// Example
UCLASS()
class MY_GAME_API AMyGameModeBase : public AGameModeBase
// GameModeë¥¼ í•˜ë‚˜ ë§Œë“¤ê³ , Experienceì™€ ì–´ë–»ê²Œ ë¶™ì´ëŠ”ì§€ í™•ì¸í•´ ë³´ì.

// ...

AMyGameModeBase::AMyGameModeBase()
{
    // Experienceë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  Stateê°€ í•˜ë‚˜ í•„ìš”í•˜ë‹¤
	GameStateClass = AMyGameState::StaticClass();
```

```cpp
UCLASS()
class MY_GAME_API AMyGameState : public AGameStateBase
{
	GENERATED_BODY()
public:
	AMyGameState()
    {
    	ExperienceManagerComponent = CreateDefaultSubobject<UMyExperienceManagerComponent>(TEXT("ExperienceManagerComponent"));
    }

public:
	UPROPERTY()
	TObjectPtr<UMyExperienceManagerComponent> ExperienceManagerComponent;
};
```

```cpp
DECLARE_MULTICAST_DELEGATE_OneParam(FOnMyExperienceLoaded, const UMyExperienceDefinition*);
/**
 * UMyExperienceManagerComponent
 * - ë§ ê·¸ëŒ€ë¡œ, í•´ë‹¹ componentëŠ” game stateë¥¼ ownerë¡œ ê°€ì§€ë©´ì„œ, experienceì˜ ìƒíƒœ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” componentì´ë‹¤
 * - ë¿ë§Œ ì•„ë‹ˆë¼, managerë¼ëŠ” ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆë“¯ì´, experience ë¡œë”© ìƒíƒœ ì—…ë°ì´íŠ¸ ë° ì´ë²¤íŠ¸ë¥¼ ê´€ë¦¬í•œë‹¤
 */
UCLASS()
class MY_GAME_API UMyExperienceManagerComponent : public UGameStateComponent
{
	GENERATED_BODY()

public:
	/**
	 * member methods
	 */
	bool IsExperienceLoaded() { return (LoadState == UMyExperienceDefinition::Loaded) && (CurrentExperience != nullptr); }

	/**
	 * ì•„ë˜ì˜ OnExperienceLoadedì— ë°”ì¸ë”©í•˜ê±°ë‚˜, ì´ë¯¸ Experience ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ë°”ë¡œ í˜¸ì¶œí•¨
	 */
	void CallOrRegister_OnExperienceLoaded(FOnMyExperienceLoaded::FDelegate&& Delegate);

public:
	UPROPERTY()
	TObjectPtr<const UMyExperienceManagerComponent> CurrentExperience;

	/** Experienceì˜ ë¡œë”© ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§ */
	UMyExperienceManagerComponent LoadState = UMyExperienceManagerComponent::Unloaded;

	/** Experience ë¡œë”©ì´ ì™„ë£Œëœ ì´í›„, Broadcasting Delegate */
	FOnMyExperienceLoaded OnExperienceLoaded;
};
```

```cpp
UCLASS()
class MY_GAME_API UMyUserFacingExperience : public UPrimaryDataAsset
{
	GENERATED_BODY()

public:
	/** the specific map to load */
	UPROPERTY(BlueprintReadWrite, EditAnywhere, Category = Experience, meta = (AllowedTypes = "Map"))
	FPrimaryAssetId MapID;

	/** the gameplay expierence to load */
	UPROPERTY(BlueprintReadWrite, EditAnywhere, Category = Experience, meta = (AllowedTypes = "MyExperienceDefinition"))
	FPrimaryAssetId ExperienceID;
};
```

* ì•„ì§ì€ ë¬´ìŠ¨ë§ ì¸ì§€ ì˜ ëª¨ë¥´ê² ì§€ë§Œ, ì´í›„ ê°•ì˜ë¥¼ ì§„í–‰í•˜ë©° Experienceì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì¼ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
* ì§€ê¸ˆì€ ê·¸ëƒ¥ ì‘ì€ GameModeë¼ ì´í•´í•˜ì.