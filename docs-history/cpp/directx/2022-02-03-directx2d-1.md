---
layout: default
title: "1. (DX2D) Direct9 2D Sprite ì¶œë ¥"
parent: "(DirectX 2D âœ¨)"
grand_parent: C++
nav_order: 10
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [ì°¸ê³ ì‚¬ì´íŠ¸ ğŸŒ](https://8bitscoding.github.io/dxd/2d-game/)
* [ì°¸ê³ ê°•ì˜ ğŸŒ](https://www.youtube.com/watch?v=u_DNr8eBhxw&list=PLOKPEzlY4JKSZLgY_jH4danTYinRKIPz1&index=70)
* [Get This Code ğŸŒ](https://github.com/EasyCoding-7/DirectXExamples/tree/main/D9_2D_Sprite_Tutorial)

## ì¶œë ¥í™”ë©´

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx2d-1-2.gif"/>
</p>

---

## ì‚¬ì „ ì¤€ë¹„ì‚¬í•­

ğŸ˜º DirectX9ì„ ê¸°ë°˜ìœ¼ë¡œí•˜ê¸°ì— [DirectX SDK](https://www.microsoft.com/en-us/download/details.aspx?id=6812)ì˜ ë‹¤ìš´ì´ í•„ìš”í•˜ë‹¤.

ğŸ˜º ì°¸ê³ ë¡œ DirectX SDKê°€ ì„¤ì¹˜ë˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ DirectX Sample Browerê°€ ì„¤ì¹˜ë˜ëŠ”ë° ë§ì€ Sampleì´ ìˆìœ¼ë‹ˆ ì´ ì½”ë“œë¥¼ ë³´ëŠ”ê²ƒë„ ì¶”ì²œí•œë‹¤

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx2d-1-1.png"/>
</p>

---

## í•µì‹¬ì½”ë“œ?

ğŸ˜º ë³„ê²Œì—†ìŒ

```cpp
// SpriteProject.cpp

ID3DXSprite *g_Sprite;              // í™”ë©´ì— ì¶œë ¥í•  Sprite
IDirect3DTexture9 *g_pTexture;      // bmpì´ë¯¸ì§€ë¥¼ ë‹´ì„ Texture

// ...

// Create
HRESULT CALLBACK OnD3D9CreateDevice( IDirect3DDevice9* pd3dDevice, const D3DSURFACE_DESC* pBackBufferSurfaceDesc,
                                     void* pUserContext )
{
    // Spirte ìƒì„±
	D3DXCreateSprite( pd3dDevice, &g_Sprite );

    // Textureìƒì„±
	D3DXCreateTextureFromFileEx( pd3dDevice, L"fire.bmp", 0, 0, 0, 0, D3DFMT_UNKNOWN, 
				D3DPOOL_DEFAULT, D3DX_DEFAULT, D3DX_DEFAULT, D3DCOLOR_XRGB(0, 0, 0), 
				0, 0, &g_pTexture);

    // ê¸°íƒ€ë³€ìˆ˜ ì´ˆê¸°í™”
	g_sFire.nCount = 6;
	g_sFire.nIndex = 0;
	g_sFire.dwAniTime = 100;
	g_sFire.dwOldAniTime = GetTickCount();
	g_sFire.pRect = g_rtFireRect;
	g_sFire.pCenter = g_vCenter;
	
    return S_OK;
}

// Render
void CALLBACK OnD3D9FrameRender( IDirect3DDevice9* pd3dDevice, double fTime, 
	                             float fElapsedTime, void* pUserContext )
{
    HRESULT hr;	
	D3DXVECTOR3 vPos( 200, 200, 0.0f);
    D3DXVECTOR3 vPos2(300, 300, 0.0f);
	
    // Clear the render target and the zbuffer 
    V( pd3dDevice->Clear( 0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, 
		                  D3DCOLOR_ARGB( 0, 45, 50, 170 ), 1.0f, 0 ) );

    // Render the scene
    if( SUCCEEDED( pd3dDevice->BeginScene() ) )
    {		
		g_Sprite->Begin( D3DXSPRITE_ALPHABLEND );


        /*
            HRESULT Draw(
              [in]       LPDIRECT3DTEXTURE9 pTexture,
              [in] const RECT               *pSrcRect,
              [in] const D3DXVECTOR3        *pCenter,
              [in] const D3DXVECTOR3        *pPosition,
              [in]       D3DCOLOR           Color
            );
        */
		g_Sprite->Draw( g_pTexture, 
                        &g_sFire.pRect[g_sFire.nIndex], 
					    &g_sFire.pCenter[g_sFire.nIndex], 
                        &vPos, 
					    D3DCOLOR_XRGB(255, 255, 255)
                    );

		g_Sprite->End();
        V( pd3dDevice->EndScene() );
    }
}
```