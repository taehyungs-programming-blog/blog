---
layout: default
title: "36. shader maker"
parent: "(Part.3 - ì—”ì§„ ë‚´ë¶€ êµ¬í˜„)"
grand_parent: "(ë‚˜ì˜ ê²Œì„ì—”ì§„ ğŸ²)"
nav_order: 3
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/Arthur880708/ArthurDX12GameEngine/commit/71bf693e68d5a4922d81f9e1e2e3a35b93750980)

* hlslì„ .binìœ¼ë¡œ ë§Œë“œëŠ”ê²Œ ëª©ì ì´ë‹¤.

```cpp
// test engineì—ì„œ í•  ì˜ˆì •

bool
engine_test::initialize()
{
    while (!compile_shaders())
    // ...
```

```cpp
bool
compile_shaders()
{
    // ìµœì‹ íŒŒì¼ì¸ì§€ ì²´í¬
    if (compiled_shaders_are_up_to_date()) return true;

    utl::vector<ComPtr<IDxcBlob>> shaders;
    std::filesystem::path path{};
    std::filesystem::path full_path{};

    shader_compiler compiler{};
    // compile shaders and them together in a buffer in the same order of compilation.
    for (u32 i{ 0 }; i < engine_shader::count; ++i)
    {
        auto& info = shader_files[i];

        path = shaders_source_path;
        path += info.file;
        full_path = std::filesystem::absolute(path);
        if (!std::filesystem::exists(full_path)) return false;
        // ì—¬ê¸°ì„œ ë¹Œë“œ
        ComPtr<IDxcBlob> compiled_shader{ compiler.compile(info, full_path) };
        if (compiled_shader->GetBufferPointer() && compiled_shader->GetBufferSize())
        {
            shaders.emplace_back(std::move(compiled_shader));
        }
        else
        {
            return false;
        }
    }

    return save_compiled_shaders(shaders);
}
```