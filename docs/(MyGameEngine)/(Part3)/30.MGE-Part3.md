---
layout: default
title: "30. CommandQueue와 Render"
parent: "(Part.3 - 엔진 내부 구현)"
grand_parent: "(나의 게임엔진 🎲)"
nav_order: 3
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code 🌎](https://github.com/Arthur880708/ArthurDX12GameEngine/commit/b40f1e1cc1ae458b1883277c95a3ec84ee12d572)

* Render를 위해서 CommandQueue를 구현해야한다.
* Core에 `Render()`가 호출되며 CommandQueue를 사용하게 하면 되겠군?

```cpp
namespace primal::graphics::d3d12::core {
namespace {

class d3d12_command
{
public:
    d3d12_command() = default;
    // 참고로 이런 매크로도 만들어 둠(아래참고)
    DISABLE_COPY_AND_MOVE(d3d12_command);
    explicit d3d12_command(ID3D12Device8 *const device, D3D12_COMMAND_LIST_TYPE type)
    // ...
```

```cpp
// 크게 중요하진 않
#ifndef DISABLE_COPY
#define DISABLE_COPY(T)                     \
            explicit T(const T&) = delete;  \
            T& operator=(const T&) = delete;
#endif

#ifndef DISABLE_MOVE
#define DISABLE_MOVE(T)                 \
            explicit T(T&&) = delete;   \
            T& operator=(T&&) = delete;
#endif

#ifndef DISABLE_COPY_AND_MOVE
#define DISABLE_COPY_AND_MOVE(T) DISABLE_COPY(T) DISABLE_MOVE(T)
#endif
```

```cpp
// Core Render 내부(특별할것은 없다.)
void
render()
{
    gfx_command.begin_frame();
    ID3D12GraphicsCommandList6* cmd_list{ gfx_command.command_list() };

    
    gfx_command.end_frame();
}
```