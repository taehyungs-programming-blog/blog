---
layout: default
title: "2. í”„ë¡œì íŠ¸ í´ë” ì½ì–´ ë¦¬ìŠ¤íŠ¸ì— ë„£ê¸°"
parent: "(Part.1 - ì—”ì§„ êµ¬ì¡° ì¡ê¸°)"
grand_parent: "(ë‚˜ì˜ ê²Œì„ì—”ì§„ ğŸ²)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/Arthur880708/KTHGameEngine/tree/2)

---

* ìš°ì„  í´ë”ë‚´ì˜ í”„ë¡œì íŠ¸ íŒŒì¼ì„ ì½ëŠ” ë¶€ë¶„

```csharp
// ProjectTemplateì˜ êµ¬ì¡°ëŠ” ì´ëŸ¬í•˜ë‹¤
[DataContract]
public class ProjectTemplate
{
    [DataMember]
    public string ProjectType { get; set; }
    [DataMember]
    public string ProjectFile { get; set; }
    [DataMember]
    public List<string> Folders { get; set; }

    public byte[] Icon { get; set; }
    public byte[] Screenshot { get; set; }
    public string IconFilePath { get; set; }
    public string ScreenshotFilePath { get; set; }
    public string ProjectFilePath { get; set; }
}
```

```csharp
class NewProject : ViewModelBase
{
    // ...

    public NewProject()
    {
        ProjectTemplates = new ReadOnlyObservableCollection<ProjectTemplate>(_projectTemplates);
        try
        {
            var templatesFiles = Directory.GetFiles(_templatePath, "template.xml", SearchOption.AllDirectories);
            Debug.Assert(templatesFiles.Any());
            foreach (var file in templatesFiles)
            {
                // Serializer.FromFileëŠ” ë³„ë„ë¡œ Serializerë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•œë‹¤
                var template = Serializer.FromFile<ProjectTemplate>(file);
                template.IconFilePath = Path.GetFullPath(Path.Combine(Path.GetDirectoryName(file), "Icon.png"));
                template.Icon = File.ReadAllBytes(template.IconFilePath);
                template.ScreenshotFilePath = Path.GetFullPath(Path.Combine(Path.GetDirectoryName(file), "Screenshot.png"));
                template.Screenshot = File.ReadAllBytes(template.ScreenshotFilePath);
                template.ProjectFilePath = Path.GetFullPath(Path.Combine(Path.GetDirectoryName(file), template.ProjectFile));

                _projectTemplates.Add(template);
            }
        }
        catch(Exception ex)
        {
            Debug.WriteLine(ex.Message);
            // TODO: log error
        }
    }
}
```

* ì´ì œ ì½ì–´ì˜¨ í”„ë¡œì íŠ¸ íŒŒì¼ì„ ë¦¬ìŠ¤íŠ¸ì— ë„£ì–´ì£¼ëŠ” ë¶€ë¶„

```xml
<!-- ... -->
    <UserControl.DataContext>
    <!-- NewProjectë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤. -->
        <local:NewProject />
    </UserControl.DataContext>
    <StackPanel Background="White">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <!-- NewProjectë‚´ì˜ ProjectTemplatesë¥¼ itemìœ¼ë¡œ ì“¸êº¼ì—ìš” -->
            <ListBox Width="195" Height="250" ItemsSource="{Binding ProjectTemplates}" x:Name="templateListBox"
                     SelectedIndex="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                        <!-- ProjectTemplatesë‚´ë¶€ ë°ì´í„°ì— ì ‘ê·¼ -->
                            <Image Source="{Binding Icon}" Margin="0,0,5,0"/>
                            <TextBlock Text="{Binding ProjectType}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Border Width="400" Height="250" Margin="5,0,0,0">
                <Border.Background>
                    <ImageBrush ImageSource="{Binding Path=SelectedItem.Screenshot, ElementName=templateListBox}"/>
                </Border.Background>
            </Border>
        </StackPanel>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                    Margin="0,30,0,0">
            <TextBlock Text="Name" Width="50"/>
            <TextBox Width="550" Text="{Binding ProjectName}"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                    Margin="0,5,0,0">
            <TextBlock Text="Path" Width="50"/>
            <TextBox Width="500" Text="{Binding ProjectPath}"/>
            <Button Content="Browse" Width="45" Margin="5,0,0,0"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                    Margin="0,30,0,0">
            <Button Content="Create" Width="96" IsDefault="True"/>
            <Button Content="Exit" Width="96" Margin="30,0,0,0" IsCancel="True"/>
        </StackPanel>
    </StackPanel>
</UserControl>
```

---

## DataContractì™€ DataMember

* C#ì—ì„œ DataContractê³¼ DataMemberì€ WCF (Windows Communication Foundation)ì˜ ì¼ë¶€ë¡œ ì‚¬ìš©ë˜ëŠ” **annotation**ì…ë‹ˆë‹¤. 
* ì´ë“¤ì€ ê°ì²´ì˜ **ì§ë ¬í™”(serialization)** ë° **ì—­ì§ë ¬í™”(deserialization)** ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ê°œë…ë“¤ì„ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

### DataContract Attribute

* ëª©ì : DataContractì€ í´ë˜ìŠ¤ë‚˜ êµ¬ì¡°ì²´(struct)ê°€ ì§ë ¬í™”ë  ìˆ˜ ìˆëŠ” ë°ì´í„° ê³„ì•½(data contract)ì„ ê°–ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” WCFì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ê°ì²´ë¥¼ XML, JSON ë“±ì˜ í˜•ì‹ìœ¼ë¡œ ì§ë ¬í™”í•  ë•Œ í•„ìš”í•©ë‹ˆë‹¤.
* ì‚¬ìš© ë°©ë²•: í´ë˜ìŠ¤ë‚˜ êµ¬ì¡°ì²´ ìœ„ì— **DataContract**ìœ¼ë¡œ ëª…ì‹œí•©ë‹ˆë‹¤.
* ë™ì‘: ì´ íŠ¹ì„±ì„ ì‚¬ìš©í•˜ë©´, í•´ë‹¹ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì„œë¹„ìŠ¤ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“¤ ë•Œ ì§ë ¬í™”/ì—­ì§ë ¬í™” ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.
* ê¸°ë³¸ ë™ì‘: **DataContract**ë¥¼ ëª…ì‹œí•˜ë©´, ê¸°ë³¸ì ìœ¼ë¡œ í´ë˜ìŠ¤ì˜ ëª¨ë“  ê³µê°œ(public) ë©¤ë²„ëŠ” ì§ë ¬í™” ëŒ€ìƒì—ì„œ ì œì™¸ë©ë‹ˆë‹¤. ì§ë ¬í™”í•˜ê³ ì í•˜ëŠ” ë©¤ë²„ëŠ” ëª…ì‹œì ìœ¼ë¡œ **DataMember**ì„ ì‚¬ìš©í•˜ì—¬ í‘œì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

### DataMember Attribute

* ëª©ì : íŠ¹ì • í•„ë“œë‚˜ ì†ì„±ì´ ì§ë ¬í™” ê³¼ì •ì—ì„œ í¬í•¨ë˜ì–´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
* ì‚¬ìš© ë°©ë²•: í´ë˜ìŠ¤ë‚˜ êµ¬ì¡°ì²´ì˜ ë©¤ë²„(í•„ë“œë‚˜ ì†ì„±) ìœ„ì— **DataMember**ìœ¼ë¡œ ëª…ì‹œí•©ë‹ˆë‹¤.
* ë™ì‘: ì´ íŠ¹ì„±ì´ ìˆëŠ” ë©¤ë²„ëŠ” ì§ë ¬í™” ê³¼ì •ì—ì„œ ë°ì´í„°ë¡œ í¬í•¨ë˜ë©°, ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ í•´ë‹¹ ë°ì´í„°ê°€ ë‹¤ì‹œ ê°ì²´ì˜ í•´ë‹¹ ë©¤ë²„ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.

