---
layout: default
title: "(07. ì—”ì§„ì˜ ë„¤íŠ¸ì›Œí‚¹ ì‹œìŠ¤í…œì—ì„œ í”„ë¡œí¼í‹° ë³µì œ(Property Replication) ë©”ì»¤ë‹ˆì¦˜)"
parent: "(UE Code-Review ğŸ¤–)"
has_children: true
nav_order: 1
permalink: docs/review/ue/ver4/07/UEPropertyReplication
---

## ì—¬ê¸°ì„œ ë§í•˜ëŠ” Propertyë€?

* ì–¸ë¦¬ì–¼ ì—”ì§„ì—ì„œ 'í”„ë¡œí¼í‹°(Property)'ëŠ” í´ë˜ìŠ¤ì˜ ë©¤ë²„ ë³€ìˆ˜ë¥¼ ì˜ë¯¸
* íŠ¹íˆ ë„¤íŠ¸ì›Œí‚¹ ì‹œìŠ¤í…œì—ì„œ ì–¸ê¸‰í•˜ëŠ” í”„ë¡œí¼í‹°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤:

```cpp
UPROPERTY(replicated)
int32 Score;
```

```cpp
UPROPERTY()
bool bReplicateA;  // ë³µì œ ì¡°ê±´ì„ ê²°ì •í•˜ëŠ” ë³€ìˆ˜ (ë³µì œë˜ì§€ ì•ŠìŒ)

UPROPERTY(replicated)
int32 A;  // ë³µì œë˜ëŠ” í”„ë¡œí¼í‹° (ì¡°ê±´ì„ ë„£ì„ìˆ˜ë„ ìˆìŒ)
```

---

## í”„ë¡œí¼í‹° ë³µì œ ì¡°ê±´

* íƒ€ì…(CLASS) ê¸°ë°˜: GetLifetimeReplicatedProps()ë¥¼ í†µí•´ CDO(Class Default Object)ì—ì„œ ì„¤ì •
* ê°ì²´(OBJECT) ê¸°ë°˜: GetReplicatedCustomConditionState()ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë³„ë¡œ ì„¤ì •

### íƒ€ì…(CLASS) ê¸°ë°˜

```cpp
// íƒ€ì…(CLASS) ê¸°ë°˜ ì˜ˆì‹œ
class AWeapon : public AActor
{
    UPROPERTY(replicated)
    float Damage;
    
    UPROPERTY(replicated)
    int32 Ammo;
    
    virtual void GetLifetimeReplicatedProps(TArray<FLifetimeProperty>& OutLifetimeProps) const override
    {
        Super::GetLifetimeReplicatedProps(OutLifetimeProps);
        
        // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í•­ìƒ ë³µì œ
        DOREPLIFETIME(AWeapon, Damage);
        
        // ì†Œìœ ìì—ê²Œë§Œ ë³µì œ
        DOREPLIFETIME_CONDITION(AWeapon, Ammo, COND_OwnerOnly);
    }
};
```

* ì´ ì„¤ì •ì€ CDO(Class Default Object)ë¥¼ í†µí•´ ê²°ì •ë©ë‹ˆë‹¤
    * AWeapon í´ë˜ìŠ¤ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ì ìš©ë¨
    * DamageëŠ” í•­ìƒ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³µì œë¨
    * AmmoëŠ” ë¬´ê¸° ì†Œìœ ìì¸ í´ë¼ì´ì–¸íŠ¸ì—ê²Œë§Œ ë³µì œë¨
* ì´ ê·œì¹™ì€ ê²Œì„ ì¤‘ì— ë³€ê²½í•  ìˆ˜ ì—†ìŒ (ì •ì )

### ê°ì²´(OBJECT) ê¸°ë°˜

```cpp
class ACharacter : public AActor
{
    // ë³µì œ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ë³€ìˆ˜ë“¤
    UPROPERTY()
    bool bReplicateLocation;
    
    UPROPERTY()
    bool bReplicateInventory;
    
    // ë³µì œë  ë°ì´í„°
    UPROPERTY(replicated)
    FVector CustomLocation;
    
    UPROPERTY(replicated)
    TArray<FInventoryItem> Inventory;
    
    virtual void GetLifetimeReplicatedProps(TArray<FLifetimeProperty>& OutLifetimeProps) const override
    {
        Super::GetLifetimeReplicatedProps(OutLifetimeProps);
        DOREPLIFETIME(ACharacter, CustomLocation);
        DOREPLIFETIME(ACharacter, Inventory);
    }
    
    virtual void GetReplicatedCustomConditionState(FCustomPropertyConditionState& OutState) const override
    {
        Super::GetReplicatedCustomConditionState(OutState);
        
        // ì¸ìŠ¤í„´ìŠ¤ë³„ ì¡°ê±´ ì„¤ì •
        DOREPCUSTOMCONDITION_ACTIVE_FAST(ACharacter, CustomLocation, bReplicateLocation);
        DOREPCUSTOMCONDITION_ACTIVE_FAST(ACharacter, Inventory, bReplicateInventory);
    }
    
    virtual void PreReplication(IRepChangedPropertyTracker& ChangedPropertyTracker) override
    {
        Super::PreReplication(ChangedPropertyTracker);
        
        // ë§¤ í”„ë ˆì„ ì¡°ê±´ ê°±ì‹ 
        DOREPLIFETIME_ACTIVE_OVERRIDE_FAST(ACharacter, CustomLocation, bReplicateLocation);
        DOREPLIFETIME_ACTIVE_OVERRIDE_FAST(ACharacter, Inventory, bReplicateInventory);
    }
};
```

* ëŒ€ëµ ì´ë ‡ê²Œ ì‚¬ìš©ë˜ê² ì§€?

```cpp
void AGameMode::SpawnCharacters()
{
    // NPC ìºë¦­í„° - ìœ„ì¹˜ë§Œ ë³µì œ (ì¸ë²¤í† ë¦¬ ë³µì œ ì•ˆí•¨)
    ACharacter* NPC = SpawnCharacter(...);
    NPC->bReplicateLocation = true;
    NPC->bReplicateInventory = false;
    
    // í”Œë ˆì´ì–´ ìºë¦­í„° - ìœ„ì¹˜ì™€ ì¸ë²¤í† ë¦¬ ëª¨ë‘ ë³µì œ
    ACharacter* Player = SpawnCharacter(...);
    Player->bReplicateLocation = true;
    Player->bReplicateInventory = true;
}
```

* ê° ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ë³µì œ ì„¤ì • ê°€ëŠ¥
* NPCëŠ” ìœ„ì¹˜ë§Œ ë³µì œ, í”Œë ˆì´ì–´ëŠ” ìœ„ì¹˜ì™€ ì¸ë²¤í† ë¦¬ ëª¨ë‘ ë³µì œ
* ê²Œì„ ë„ì¤‘ì— ë³€ìˆ˜ê°’ì„ ë³€ê²½í•˜ì—¬ ë³µì œ ê·œì¹™ ë™ì  ë³€ê²½ ê°€ëŠ¥