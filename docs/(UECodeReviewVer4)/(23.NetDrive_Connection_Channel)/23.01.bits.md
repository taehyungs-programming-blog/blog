---
layout: default
title: "23.01. (tips) raw-bits 연산 트릭"
parent: "(23. NetDrive, Connection, Channel 관계)"
grand_parent: "(UE Code-Review 🤖)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

> 트릭이라 보긴 뭐 하지만 ㅎㅎ.. 재미있어 정리해 둔다

```cpp
// ...
{
    uint8 LastByte = Data[Count-1];
    if (LastByte != 0)
    {
        int32 BitSize = (Count * 8) - 1;

        // 이게 뭘 하는 걸까?
        while (!(LastByte & 0x80))
        {
            LastByte *= 2;
            BitSize--;
        }
```

```
//   ***Purpose: Try to reduce 'BitSize'                        
//                                                              
//                                                              
//                    Last Byte(8-bits)                         
//            │◄─────────────────────────────►│                 
//            ├───┬───┬───┬───┬───┬───┬───┬───┼───┬───┬───┬───┐ 
//            │ 0 │ 0 │ 1 │ 0 │ 1 │ 0 │ 1 │ 1 │ 0 │ 0 │ 0 │...│ 
//            ├───┴───┴───┴───┴───┴───┴───┴───┼───┴───┴───┴───┘ 
//            │                               │                 
//                                                              
//                     ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//         (Last Byte):│ 0 │ 0 │ 1 │ 0 │ 1 │ 0 │ 1 │ 1 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//                     ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//                0x80:│ 1 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//               *** 1:(Last Byte) & 0x80 == 0: BitSize--       
//                                                              
//                                                              
//               ┌───►(Last Byte)x2 == (Last Byte) << 1         
//       ────────┴──── ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//       (Last Byte)x2:│ 0 │ 1 │ 0 │ 1 │ 0 │ 1 │ 1 │ 0 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//                     ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//                0x80:│ 1 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//               *** 2:(Last Byte) & 0x80 == 0: BitSize--       
//                                                              
//                                                              
//                     ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//       (Last Byte)x2:│ 1 │ 0 │ 1 │ 0 │ 1 │ 1 │ 0 │ 0 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//                     ┌───┬───┬───┬───┬───┬───┬───┬───┐        
//                0x80:│ 1 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │ 0 │        
//                     └───┴───┴───┴───┴───┴───┴───┴───┘        
//               *** 3:(Last Byte) & 0x80 == 1: STOP!!!         
//                                              ───────         
//                                               ****                   
```