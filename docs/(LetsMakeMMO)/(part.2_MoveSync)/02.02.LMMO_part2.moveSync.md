---
layout: default
title: "02-02. ì´ë™ ë™ê¸°í™”"
parent: "(02. ì´ë™ ë™ê¸°í™”)"
grand_parent: "(MMORPG ë§Œë“¤ì–´ ë³´ê¸° ğŸ¤©)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒŸ](https://github.com/Arthur880708/LetMakeMMO/tree/2)

---

* ìš°ì„  Clientì—ì„œëŠ” ì–´ë–»ê²Œ ì›€ì§ì„ì„ ì¡°ì‘í• ê¹Œ?

```csharp
public class MyHero : Hero
{
    // ...

    protected override void Update()
    {
        UpdateInput();

        UpdateAI();

        UpdateLerpToCellPos(MoveSpeed, true);

        UpdateSendMovePacket();

        DrawVisionCells();
    }
```

```csharp
public void UpdateLerpToCellPos(float moveSpeed, bool canFlip = true)
{
    if (LerpCellPosCompleted)
        return;

    Vector3 destPos = Managers.Map.Cell2World(CellPos);
    Vector3 dir = destPos - transform.position;
    if (canFlip)
    {
        if (dir.x < 0)
            LookLeft = true;
        else if (dir.x > 0)
            LookLeft = false;
    }

    float moveDist = moveSpeed * Time.deltaTime;
    if (dir.magnitude < moveDist)
    {
        // ë‹¤ ì´ë™ í–ˆìœ¼ë©´ ë§µ ê·¸ë¦¬ë“œ ê°±ì‹ 
        SyncWorldPosWithCellPos();
        transform.position = destPos;
        LerpCellPosCompleted = true;
        return;
    }

    transform.position += dir.normalized * moveDist;
}
```

```csharp
public bool MoveTo(BaseObject obj, Vector3Int cellPos, bool forceMove = false)
{
    if (CanGo(obj, cellPos) == false)
        return false;

    RemoveObject(obj);

    AddObject(obj, cellPos);

    obj.SetCellPos(cellPos, forceMove);

    return true;
}
```

* ê·¸ëŸ°ë° ì´ êµ¬ì¡°ê°€ Userê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ë¹„íš¨ìœ¨ ì ì´ê²Œ ëœë‹¤.
* Userê°€ 100ì–µëª…ì´ê³  ê°ê° ì›€ì§ì¸ë‹¤ë©´ MoveíŒ¨í‚·ì´ ìˆ˜ë„ì—†ë‹¤ ..
    * ëª¨ì•„ ë³´ë‚´ê¸°ê°€ í•„ìš”í•´ì§€ëŠ” ì‹œì ì´ë‹¤.
* ë°©ë²•?
    * í˜„ì¬ëŠ” Session(User)ë³„ë¡œ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ë‚˜, íŠ¹ì •ì‹œê°„ì„ ë‘ê³  Packetì†¡ì‹ í•˜ê¸°