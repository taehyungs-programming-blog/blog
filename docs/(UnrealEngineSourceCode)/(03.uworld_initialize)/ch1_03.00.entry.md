---
layout: default
title: "(03. CreateWorld::Initialize)"
parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
has_children: true
nav_order: 1
---

```cpp
/** initialize the collection of systems; systems will be created and initialized */
void Initialize(UObject* NewOuter)
{
    // already initialized
    // ì´ë¯¸ ì´ˆê¸°í™”ë˜ì—ˆìŒ
    if (Outer)
    {
        return;
    }

    // we set NewOuter as UWorld
    // NewOuterë¥¼ UWorldë¡œ ì„¤ì •í•©ë‹ˆë‹¤
    Outer = NewOuter;
    
    if (ensure(BaseType) && ensure(SubSystemMap.Num() == 0))
    {
        check(IsInGameThread());

        // I eliminate UDynamicsSubsystem handling codes for simplicity
        // - the below code is about non-UDynamicSubsystem e.g. UWorldSubsystem
        // ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ UDynamicsSubsystem ì²˜ë¦¬ ì½”ë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤
        // - ì•„ë˜ ì½”ë“œëŠ” UWorldSubsystemê³¼ ê°™ì€ ë¹„-UDynamicSubsystemì— ê´€í•œ ê²ƒì…ë‹ˆë‹¤
        {
            // BaseType is UWorldSubsystem for UWorld::SubsystemCollection
            // - calling GetDerivedClasses() collects all classes derived from UWorldSubsystem
            // UWorld::SubsystemCollectionì˜ ê²½ìš° BaseTypeì€ UWorldSubsystemì…ë‹ˆë‹¤
            // - GetDerivedClasses()ë¥¼ í˜¸ì¶œí•˜ë©´ UWorldSubsystemì—ì„œ íŒŒìƒëœ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤
            TArray<UClass*> SubsystemClasses;
            GetDerivedClasses(BaseType, SubsystemClasses, true);

            // looping subsystem's classes derived from UWorldSubsystem
            // UWorldSubsystemì—ì„œ íŒŒìƒëœ ì„œë¸Œì‹œìŠ¤í…œ í´ë˜ìŠ¤ë“¤ì„ ìˆœíšŒí•©ë‹ˆë‹¤
            for (UClass* SubsystemClass : SubsystemClasses)
            {
                AddAndInitializeSubsystem(SubsystemClass);
            }
        }

        // update internal arrays without emptying it so that existing refs remain valid
        // ê¸°ì¡´ ì°¸ì¡°ê°€ ìœ íš¨í•˜ë„ë¡ ë‚´ë¶€ ë°°ì—´ì„ ë¹„ìš°ì§€ ì•Šê³  ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤
        for (auto& Pair : SubsystemArrayMap)
        {
            // note that we clear the array!
            // ë°°ì—´ì„ ì´ˆê¸°í™”í•œë‹¤ëŠ” ì ì— ì£¼ëª©í•˜ì„¸ìš”!
            Pair.Value.Empty();

            // SubsystemMapArray persist 1:1 mapping on Subsystem, but UDynamicSubsystem could allow multiple instance
            // - iterating SubSystemMap, refill class-[multiple instances]
            // - SubsystemArrayMap contains mappings from base class to derived classes
            // SubsystemMapArrayëŠ” ì„œë¸Œì‹œìŠ¤í…œì— ëŒ€í•´ 1:1 ë§¤í•‘ì„ ìœ ì§€í•˜ì§€ë§Œ, UDynamicSubsystemì€ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í—ˆìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
            // - SubSystemMapì„ ìˆœíšŒí•˜ë©° í´ë˜ìŠ¤-[ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤] ê´€ê³„ë¥¼ ë‹¤ì‹œ ì±„ì›ë‹ˆë‹¤
            // - SubsystemArrayMapì€ ê¸°ë³¸ í´ë˜ìŠ¤ì—ì„œ íŒŒìƒ í´ë˜ìŠ¤ë¡œì˜ ë§¤í•‘ì„ í¬í•¨í•©ë‹ˆë‹¤
            UpdateSubsystemArrayInternal(Pair.Key, Pair.Value);
        }

        // see the definition of GlobalSubsystemCollections
        // GlobalSubsystemCollectionsì˜ ì •ì˜ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”
        GlobalSubsystemCollections.Add(this);
    }
}
```