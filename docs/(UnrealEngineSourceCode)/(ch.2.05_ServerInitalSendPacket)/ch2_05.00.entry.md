---
layout: default
title: "([Network] 05. ServerInitalSendPacket)"
parent: "(UE SourceCode ë¶„ì„ ðŸ¤–)"
has_children: true
nav_order: 3
---

* ì—­ì‹œ Engine Tickì—ì„œ ë¶€í„° ì‹œìž‘ëœë‹¤.

```cpp
virtual void Tick(float DeltaSeconds, bool bIdleMode) override
{
    // ...
    
    for (FWorldContext* PieContextPtr : LocalPieContextPtrs)
    {
        // ...

        for (; PieContext.PIEAccumulatedTickSeconds >= TickDeltaSeconds; PieContext.PIEAccumulatedTickSeconds -= TickDeltaSeconds)
        {
            TickWorldTravel(PieContext, TickDeltaSeconds);

            // - we are looking into the server-side code, which is why we look into UWorld::Tick
            // - and also, we are interested in receiving packets sending from client as handshake packet

            // - ìš°ë¦¬ëŠ” ì„œë²„ ì¸¡ ì½”ë“œë¥¼ ì‚´íŽ´ë³´ê³  ìžˆìŠµë‹ˆë‹¤. ê·¸ëž˜ì„œ UWorld::Tickì„ ì‚´íŽ´ë³´ëŠ” ê²ƒìž…ë‹ˆë‹¤
            // - ë˜í•œ ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° í•¸ë“œì…°ì´í¬ íŒ¨í‚·ìœ¼ë¡œ ë³´ë‚´ëŠ” íŒ¨í‚·ì„ ìˆ˜ì‹ í•˜ëŠ” ê²ƒì— ê´€ì‹¬ì´ ìžˆìŠµë‹ˆë‹¤
            {
                PieContext.World()->Tick(LEVELTICK_All, TickDeltaSeconds);
            }
        }
    }
}
```

```cpp
/** update the level after a variable amount of time, DeltaSeconds, has passed
 * all child actors are ticked after their owners have been ticked 
 */
// ê°€ë³€ì ì¸ ì‹œê°„(DeltaSeconds)ì´ ì§€ë‚œ í›„ ë ˆë²¨ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤
// ëª¨ë“  ìžì‹ ì•¡í„°ë“¤ì€ ê·¸ë“¤ì˜ ì†Œìœ ìžê°€ í‹±ëœ ì´í›„ì— í‹±ë©ë‹ˆë‹¤

void Tick(ELevelTick TickType, float DeltaSeconds)
{
    FWorldDelegates::OnWorldTickStart.Broadcast(this, TickType, DeltaSeconds);

    // update the net code and fetch all incoming packets
    // ë„¤íŠ¸ì›Œí¬ ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  íŒ¨í‚·ì„ ê°€ì ¸ì˜µë‹ˆë‹¤
    {
        BroadcastTickDispatch(DeltaSeconds);
        BroadcastPostTickDispatch();
    }
```

```cpp
/** all registered net drivers TickDispatch() */
void BroadcastTickDispatch(float DeltaTime)
{
    TickDispatchEvent.Broadcast(DeltaTime);
}
```

```cpp
virtual bool InitBase(bool bInitAsClient, FNetworkNotify* InNotify, const FURL& URL, bool bReuseAddressAndPort, FString& Error)
{
    // ...
    TickDispatchDelegateHandle = InWorld->OnTickDispatch().AddUObject(this, &UNetDriver::InternalTickDispatch);
}
```

```cpp
class UNetDriver : public UObject, public FExec
{
public:
    void InternalTickDispatch(float DeltaSeconds)
    {
        TickDispatch(DeltaSeconds);
    }
```