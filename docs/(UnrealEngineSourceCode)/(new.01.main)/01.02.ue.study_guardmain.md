---
layout: default
title: "01-02. GuardMain"
parent: "(01. UEì˜ Mainì€ ì–´ë””ì¼ê¹Œ?)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
int32 GuardMain(const TCHAR* CmdLine)
{
    //...

#if !(UE_BUILD_SHIPPING)
    // waitforattachê°€ ìˆëŠ” ê²½ìš° whileì„ ëŒë©´ì„œ ëŒ€ê¸°í•©ë‹ˆë‹¤.
    if (FParse::Param(CmdLine, TEXT("waitforattach")))
    {
        while (!FPlatformMisc::IsDebuggerPresent())
        {
            FPlatformProcess::Sleep(0.1f);
        }

        // ì½”ë“œë¥¼ ì´ìš©í•´ì„œ DebugBreakPointë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. 
        // ì–¸ë¦¬ì–¼ì—ì„œ ì½”ë“œ ë ˆë²¨ì—ì„œ ë””ë²„ê¹…ì„ ì§„í–‰í•˜ê¸° ìœ„í•´ ì¡´ì¬í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤
        UE_DEBUG_BREAK();
    }
#endif

    // PreMainInitì„ ì•Œë¦°ë‹¤
    FCoreDelegates::GetPreMainInitDelegate().Broadcast();

    /*
    êµ¬ì¡°ì²´ì˜ ì •ì˜(EngineLoolCleanUp)ì™€ ë³€ìˆ˜(GuardMain) ì„ ì–¸ì„ ë™ì‹œì— ì§„í–‰í•©ë‹ˆë‹¤.
    GuardMain í•¨ìˆ˜ê°€ ëë‚˜ê²Œ ë  ê²½ìš° CleanupGuard ë³€ìˆ˜ë„ ì‚¬ë¼ì§€ê²Œ ë˜ê³  
    ê·¸ ì¦‰ì‹œ EngineExit() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. 
    ì–¸ë¦¬ì–¼ì—”ì§„ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ìœ¼ë¡œ í•œë²ˆì¯¤ ë´ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤.
    */
    struct EngineLoopCleanupGuard
    {
        ~EngineLoopCleanupGuard()
        {
            EngineExit();
        }
    } CleanupGuard;

    int32 ErrorLevel = EnginePreInit(CmdLine);

    {
#if WITH_EDITOR || 1
        if (GIsEditor)
        {

            ErrorLevel = EditorInit(GEngineLoop);
        }
        else
#endif
        {
            ErrorLevel = EngineInit();
        }
    }

    double EngineInitializationTime = FPlatformTime::Seconds() - GStartTime;

    while (!IsEngineExitRequested())
    {
        // ê²°êµ­ ì—¬ê¸°ê°€ ë©”ì¸ EventLoop!
        EngineTick();
    }

#if WITH_EDITOR || 1
    if (GIsEditor)
    {
        EditorExit();
    }
#endif

    return ErrorLevel;
}
```