---
layout: default
title: "01-03. UEditorEngine"
parent: "(01. UEì˜ Mainì€ ì–´ë””ì¼ê¹Œ?)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* `UEditorEngine` : 
    * ì–¸ë¦¬ì–¼ì—”ì§„ì—ì„œ ì—ë””í„°ë¥¼ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ ì…ë‹ˆë‹¤. 
    * ì—ë””í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ê²Œì„ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ” ë‹¤ì–‘í•œ ìƒí™©ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    * ì–´ì°Œë³´ë©´ ë””ë²„ê¹…ìš©ì´ë¼ ìƒê°í•´ë„ ì¢‹ë‹¤

```cpp
class UEditorEngine : public UEngine
{
public:
    // ì£¼ëª©í• ë§Œí•œ í•¨ìˆ˜ëŠ” GetEditorWorldContext
        // UEditorEngineì—ì„œ ê´€ë¦¬ì¤‘ì¸ Worldì˜ Context(ì„¤ì •ì •ë³´)ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤
    FWorldContext& GetEditorWorldContext(bool bEnsureIsGWorld = false)
    {
        for (int32 i = 0; i < WorldList.Num(); ++i)
        {
            if (WorldList[i].WorldType == EWorldType::Editor)
            {
                return WorldList[i];
            }
        }

        // falseëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. 
        check(false); 

        return CreateNewWorldContext(EWorldType::Editor);
    }

    virtual void Tick(float DeltaSeconds, bool bIdleMode) override
    {
        UWorld* CurrentGWorld = GWorld;

        FWorldContext& EditorContext = GetEditorWorldContext();
    }
};
```

* EditorWorldë€?

```cpp
// ìš°ì„  ë³´ëŠ”ë°”ì™€ ê°™ì´ ë‹¤ì–‘í•œ Typeì˜ Worldê°€ ì¡´ì¬í•  ìˆ˜ ìˆê³ 
namespace EWorldType
{
    enum Type
    {
        /** an untyped world */
        None,

        /** the game world */
        Game,

        /** a world being edited in the editor */
        Editor,

        /** a play in editor world */
        PIE,
    };
}
```

```cpp
// ì—”ì§„ ìˆ˜ì¤€ì—ì„œ ë‹¤ì–‘í•œ UWorldë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì»¨í…ìŠ¤íŠ¸ ì…ë‹ˆë‹¤. 
// ì¼ë°˜ì ì¸ ê²Œì„ì˜ ìƒí™© ì´ë¼ë©´ Worldê°€ 1ê°œë§Œ ì¡´ì¬í•˜ê² ì§€ë§Œ 
// ì—ë””í„°ì˜ ê²½ìš° ë™ì‹œì— ë‹¤ì–‘í•œ ë§µì´ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
struct FWorldContext
{
    void SetCurrentWorld(UWorld* World)
    {
        UWorld* OldWorld = ThisCurrentWorld;
        ThisCurrentWorld = World;

        if (OwningGameInstance)
        {
            OwningGameInstance->OnWorldChanged(OldWorld, ThisCurrentWorld);
        }
    }

    // WorldContextëŠ” ëŒ€í‘œì ìœ¼ë¡œ ì´ëŸ°ë°ì´í„°ë¥¼ ë‹´ëŠ”ë‹¤.
        // ìš°ì„ ì€ ì•Œì•„ë§Œ ë‘ì.
    TEnumAsByte<EWorldType::Type> WorldType;
    
    FName ContextHandle;

    TObjectPtr<class UGameInstance> OwningGameInstance;

    TObjectPtr<UWorld> ThisCurrentWorld;
};
```

---

## Q) ê·¸ëƒ¥ UWroldë¥¼ ì“°ì§€ì•Šê³  UWorldContextë¥¼ ì“°ëŠ”ì´ìœ ?

* ì–´ì°Œë³´ë©´ UEì—ì„œ Contextë¥¼ ì“°ëŠ”ì´ìœ ê¸°ë„í•˜ë‹¤

* ëª…í™•í•œ ì˜ë¯¸ ì „ë‹¬:
    * ContextëŠ” ë‹¨ìˆœíˆ ê°ì²´ë¥¼ ë„˜ê¸°ëŠ” ê²ƒë³´ë‹¤ ë” ë§ì€ ì˜ë¯¸ë¥¼ ë‚´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ UWorldContextëŠ” ë‹¨ìˆœíˆ UWorld ê°ì²´ë¥¼ ë„˜ê¸°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê·¸ì™€ ê´€ë ¨ëœ ì¶”ê°€ì ì¸ ì •ë³´ë‚˜ ìƒíƒœë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì½”ë“œì˜ ì˜ë„ê°€ ë” ëª…í™•í•´ì§‘ë‹ˆë‹¤.
* ì¶”ê°€ ì •ë³´ì™€ ìƒíƒœ ê´€ë¦¬:
    * Context ê°ì²´ëŠ” íŠ¹ì • ìƒí™©ì—ì„œ í•„ìš”í•œ ì¶”ê°€ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, UWorldContextëŠ” ì›”ë“œ ê°ì²´ ë¿ë§Œ ì•„ë‹ˆë¼ ê·¸ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ìƒíƒœë‚˜ ë©”íƒ€ ì •ë³´ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ í•„ìš”í•œ ë¶€ê°€ ì •ë³´ë¥¼ ì¼ê´€ë˜ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ìœ ì—°í•œ í™•ì¥ì„±:
    * Context ê°ì²´ëŠ” í•„ìš”í•œ ì •ë³´ë¥¼ ì–¸ì œë“ ì§€ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ Contextì— ì¶”ê°€í•  ìˆ˜ ìˆì–´ ì½”ë“œì˜ í™•ì¥ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.
* ì½”ë“œ ê°€ë…ì„± í–¥ìƒ:
    * Contextë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œì˜ ëª©ì ê³¼ ì‚¬ìš© ì˜ë„ê°€ ëª…í™•í•´ì ¸ ê°€ë…ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ë‹¨ìˆœíˆ UWorld ê°ì²´ë¥¼ ë„˜ê¸°ëŠ” ëŒ€ì‹  UWorldContextë¥¼ ë„˜ê¸°ë©´, í•´ë‹¹ í•¨ìˆ˜ê°€ ë‹¨ìˆœíˆ ì›”ë“œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‘ë™í•œë‹¤ëŠ” ê²ƒì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ë””ë²„ê¹…ê³¼ ìœ ì§€ë³´ìˆ˜ ìš©ì´:
    * Context ê°ì²´ëŠ” ë””ë²„ê¹…ê³¼ ìœ ì§€ë³´ìˆ˜ ì‹œì—ë„ ìœ ë¦¬í•©ë‹ˆë‹¤. í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ë„˜ê²¨ì§€ëŠ” ì»¨í…ìŠ¤íŠ¸ë¥¼ í†µí•´ ì–´ë–¤ ìƒí™©ì—ì„œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€, ì–´ë–¤ ìƒíƒœì˜€ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë²„ê·¸ë¥¼ ì°¾ê³  ìˆ˜ì •í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

* **ìœ„ì— ë§ì„ ë„ˆë¬´ ì–´ë µê²Œ ì ì€ê±° ê°™ì•„ ì‰½ê²Œ ì •ë¦¬**
    * WorldëŠ” í•˜ë‚˜ë§Œ ì¡´ì¬í• ìˆ˜ ìˆëŠ”ê±´ ì•„ë‹ˆë‹¤.
    * ë”°ë¼ì„œ Contextë¡œ ì ‘ê·¼í•´ íŠ¹ì • ì¡°ê±´ì˜ Worldë¥¼ êµ¬í•˜ê³ ì í• ë•Œ (ë³´í†µ) ì‚¬ìš©ëœë‹¤.

```cpp
// ìœ„ì—ì„œ ì„¤ëª…í•œ ë°”ì™€ ê°™ì´ ì›”ë“œëŠ” ì—¬ëŸ¬ê°œ ì¡´ì¬ ê°€ëŠ¥
namespace EWorldType
{
    enum Type
    {
        /** an untyped world */
        None,

        /** the game world */
        Game,

        /** a world being edited in the editor */
        Editor,

        /** a play in editor world */
        PIE,
    };
}
```

* ê°€ë ¹ ì˜ˆë¥¼ë“¤ìë©´ ì´ëŸ° í˜•íƒœë¡œ ë§ì´ ì‚¬ìš©ëœë‹¤.

```cpp
for ( const FWorldContext& Context : GEngine->GetWorldContexts() )
{
    // Contextë¡œ Worldë¥¼ ì–»ì–´ì™€
    UWorld* CurWorld = Context.World();
    // ì¡°ê±´ ì²´í¬ í›„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.
    if ( CurWorld && CurWorld->IsGameWorld() )
    {
        UGameViewportClient* GameViewportClient = CurWorld->GetGameViewport();
```