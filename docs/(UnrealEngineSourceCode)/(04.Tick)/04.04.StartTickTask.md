---
layout: default
title: "04. StartTickTask"
parent: "(04.Tick ë¶„ì„)"
grand_parent: "(UE SourceCode ë¶„ì„ ðŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
void StartTickTask(const FGraphEventArray* Prerequisites, FTickFunction* TickFunction, const FTickContext& TickContext)
{
    FTickContext UseContext = TickContext;

    bool bIsOriginalTickGroup = (TickFunction->InternalData->ActualStartTickGroup == TickFunction->TickGroup);
    
    // TickFunction->bRunOnAnyThread - ë©€í‹°ìŠ¤ë ˆë”©ì´ í—ˆìš©
    // bIsOriginalTickGroupì˜ í™•ì¸ì´ í•„ìš”í•´ ì§€ê²Œ ëœë‹¤.
    if (TickFunction->bRunOnAnyThread && bIsOriginalTickGroup)
    {
        if (TickFunction->bHighPriority)
        {
            UseContext.Thread = CPrio_HiPriAsyncTickTaskPriority.Get();
        }
        else
        {
            UseContext.Thread = CPrio_NormalAsyncTickTaskPriority.Get();
        }
    }
    else
    {
        // ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ê²Œìž„ìŠ¤ë ˆë“œë¡œ.
        UseContext.Thread = ENamedThreads::SetTaskPriority(ENamedThreads::GameThread, TickFunction->bHighPriority ? ENamedThreads::HighTaskPriority : ENamedThreads::NormalTaskPriority);
    }

    // ConstructAndDispatch - ë„£ê³  ë°”ë¡œ ì‹¤í–‰
    // ConstructAndHold - ë„£ê³  ëŒ€ê¸° í›„ Unlockì˜¤ë©´ ì‹¤í–‰
    //Diagram:                                                                                                                                           
    //    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                                       
    //    â”‚        TaskQueue        â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                   
    //    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”Œâ”€â”€â”¤ TickFunction0 â”‚                                                                   
    //    â”‚                         â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€Prerequisite[1,]                                            
    //    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                â”‚                      â”‚                                                               
    //    â”‚ â”‚  TickFunction0      â—„â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”€ConstructAndDispatchâ”€â”€â”€â”€â”¤  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           
    //    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                            â””â”€â”€â”¤ TickFunction1 â—„â”€â”€â”€â”´â”€â”€â”€â”¤ TickFunction2 â”‚                                           
    //    â”‚                         â”‚   â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           
    //    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚                                                           TickFunction2 can't be pushed into TaskQueue            
    //    â”‚ â”‚  TickFunction1      â—„â”€â”¼â”€â”€â”€â”˜                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           (Even though it is called by ConstructAndDispatch)      
    //    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                 â”Œâ”€â”¤ TickFunction3 â”‚                                                                   
    //    â”‚                         â”‚                                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                   
    //    â”‚                       â—„â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€  ConstructAndHold â—„â”€â”¤                                                                                     
    //    â”‚                         â”‚    â”‚                            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                   
    //    â”‚                         â”‚    â”‚                            â””â”€â”¤ TickFunction4 â”‚                                                                   
    //    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                   
    //                                   â”‚                                                                                                                  
    //                                 Unlock()                                                                                                             
    //                                  :Only when Unlock() called                                                                                          
    //                                   tick function will be pushed into TaskQueue  
    //                                                              
                                                                                                                                                                                                                                                                                          
    TickFunction->InternalData->TaskPointer = TGraphTask<FTickFunctionTask>::CreateTask(Prerequisites, TickContext.Thread).ConstructAndHold(TickFunction, &UseContext, false, false);
}
```