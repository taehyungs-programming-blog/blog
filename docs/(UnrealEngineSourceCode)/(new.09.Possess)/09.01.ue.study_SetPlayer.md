---
layout: default
title: "09-01. SetPlayer"
parent: "(09. Possess)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
/** associate a new UPlayer for this PlayerController */
virtual void SetPlayer(UPlayer* InPlayer)
{
    // link Player <-> PlayerController
    Player = InPlayer;
    InPlayer->PlayerController = this;

    // initializations only for local players
    ULocalPlayer* LP = Cast<ULocalPlayer>(InPlayer)
    if (LP)
    {
        // clients need this marked as local (server already knew at construction time)
        SetAsLocalPlayerController();

        // initialize input system binded to LocalPlayer
        InitInputSystem();

        // let's summerize how InputSystem is initialized:
        //                                                                                                                                             
        //  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                        
        //  â”‚CreateInnerProcessPIEGameInstanceâ”‚                                                                                                        
        //  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                        
        //      â”‚                                                                                                                                      
        //      â”‚                                                                                                                                      
        //  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                        
        //  â”‚...                              â”‚:Create GameInstance/WorldContext/PIEWorld/GameViewportClient/...                                       
        //  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                        
        //      â”‚                                                                                                                                      
        //      â”‚                                                                                                                                      
        //  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                        
        //  â”‚GameInstance:                    â”‚                                                                                                        
        //  â”‚StartPlayInEditorGameInstance    â”‚                                                                                                        
        //  â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                        
        //    â”‚                                                                                                                                        
        //    â”œâ”€â”€InitializeActorsForPlay                                                                                                               
        //    â”‚   â”‚                                                                                                                                    
        //    â”‚   â”œâ”€â”€1.UpdateWorldComponents(): Register all actor's components and actors                                                             
        //    â”‚   â”‚                                                                                                                                    
        //    â”‚   â””â”€â”€2.Iterating Levels in World, call ULevel::RouteActorInitialize(): Initialize all actor's component and actors                     
        //    â”‚         â”‚                                                                                                                              
        //    â”‚         â””â”€â”€AActor::PreInitializeComponents():                                                                                          
        //    â”‚             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         
        //    â”‚             â””â”€â”€â”¤GetWorld()->PersistLevel->RegisterActorForAutoReceiveInput(this, PlayerIndex)â”‚                                         
        //    â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         
        //    â”‚                 *** create new InputComponent and add it pending register-list on PersistentLevel                                      
        //    â”‚                                                          â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         
        //    â”‚                                                                  â”‚                                                                     
        //    â”‚                                                                  â”‚                                                                     
        //    â””â”€â”€LocalPlayer::SpawnPlayActor():                                  â”‚                                                                     
        //        â”‚                                                              â”‚                                                                     
        //        â”œâ”€â”€Create LocalPlayer's New PlayerController                   â”‚                                                                     
        //        â”‚                                                              â”‚                                                                     
        //        â”‚                                                              â”‚ ***In ULevel::PushPendingAutoReceiveInput()                         
        //        â””â”€â”€PlayerController::SetPlayer(LocalPlayer)                    â”‚    ,Add pending InputComponents to PlayerController's PlayerInput   
        //             â”‚                                                         â”‚                                                                     
        //             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚                                                                     
        //             â””â”€â”¤InitInputSystem() â”‚                                    â”‚                                                                     
        //               â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚                                                                     
        //                 â”‚                                                     â–¼                                                                     
        //                 â””â”€â”€ULevel::PushPendingAutoReceiveInput(New-PlayerController)                                                                
        //                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€                                                                
        //                                                                       â”‚                                                                     
        //                                                                       â”‚                                                                     
        //                                                                       â”‚                                                                     
        //                                                                       â”‚                                                                     
        //                                                                       â”‚                                                                     
        //                                                                       â–¼                                                                     
        //                                                              *** We're ready to get input events from UGameViewportClientâ”€â”€â”€â–ºLocalPlayer (APlayerController::TickPlayerInput())    
        //                                                                                                                              
    }
    else
    {
        // if current Player is not local-player, the player is replicated from the server:
        // - it creates NetConnection for the player
        // - it is out of scope in this tutorial, so skip it 
        NetConnection = Cast<UNetConnection>(InPlayer);
        if (NetConnection)
        {
            NetConnection->OwningActor = this;
        }
    }
}
```