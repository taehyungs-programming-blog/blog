---
layout: default
title: "08-02. ViewPort"
parent: "(08. CreateInnerProcessPIEGameInstance)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
/**
 * an abstract interface to a viewport's client
 * the viewport's client processes input received by the viewport, and draws the viewport 
 */
// FViewportClient is the interface class:
// 1. recevie and process inputs
// 2. draw viewport
//
// what is the meaning of ViewportClient?
// - ViewportClient means 'Viewport's Client'
// - let's see the picture below:
//                                                                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
//                                                                                                  â”‚ Operating System â”‚                                          
//           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
//           â–¼                                                                                    â”‚         â”‚                                                     
//    Viewport in OS                                                                              â”‚         â”‚                                                     
//    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”¬â”€â”                                              â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                                               
//    â”‚                                      â”‚-â”‚oâ”‚xâ”‚                                              â”‚    â”‚ Process0 â”‚                                               
//    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”´â”€â”¤                                              â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                               
//    â”‚                                            â”‚                                              â”œâ”€â”€â”€â”€â”¤ Process1 â”‚                                               
//    â”‚                                            â”‚  Viewport's Client?                          â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                               
//    â”‚                                            â”‚   :Process(Main Thread)                      â”‚    â”‚ Process2 â”‚                                               
//    â”‚                                            â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                               
//    â”‚                                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚FViewportClientâ”‚â—„â”€â”€â”€â”€â”˜    â”‚ Process3 â”‚                                               
//    â”‚                                            â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               
//    â”‚                                            â”‚                                â”‚                                                                             
//    â”‚                                            â”‚                                â”‚                                                                             
//    â”‚                                            â”‚                       1.ViewportClient is the bridge between Process and UnrealEngine                        
//    â”‚                                            â”‚                                                                                                              
//    â”‚                                            â”‚                       2.ViewportClient listen input interrupts from Process (from OS)                        
//    â”‚                                            â”‚                                                                                                              
//    â”‚                                            â”‚                            OS â”€â”€â”€â”€â”€â–º Process â”€â”€â”€â”€â”€â–º FViewportClient â”€â”€â”€â”€â–º Unreal System                      
//    â”‚                                            â”‚                                                                                                              
//    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            : Transfer input events from OS to Unreal Engine                                  
//                                                                                                                                                                
//                                                                         3.Viewport doesn't mean graphical viewport (D3D11), it is about OS's window' viewport  
//                                                                                                                                                
```

* ViewPortClientëŠ” OSì™€ UnrealSystemì˜ ì¤‘ê°„ ê´€ë¦¬ì ì—­í•  ì…ë‹ˆë‹¤. 
* ë„¤íŠ¸ì›Œí¬ë¡œ í‘œí˜„í•˜ë©´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ì¤‘ê°„ ë‹¤ë¦¬ì¸ Sessionì˜ ê°œë…ê³¼ ë™ì¼í•©ë‹ˆë‹¤.
    * ê·¸ëŸ¬ë©´ ì™œ ì¤‘ê°„ê´€ë¦¬ìê°€ í•„ìš”í•œì§€ ì§ì ‘ì ìœ¼ë¡œ ì–¸ë¦¬ì–¼ì—”ì§„ê³¼ OSê°€ í†µì‹ í•˜ë©´ ì•ˆë˜ëŠ”ì§€ì— ëŒ€í•œ ì˜ë¬¸ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬í•œ ì˜ë¬¸ì€ UGameviewportclientë¥¼ í†µí•´ì„œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```cpp
class FViewportClient
{
    virtual void Draw(FViewport* Viewport, FCanvas* Canvas) {}

    /** 
     * check a key event received by the viewport 
     * if the viewport client uses the event, it should return true to consume it
     */
    virtual bool InputKey(const FInputKeyEventArgs& EventArgs)
    {
        //...
    }

    /**
     * check an axis movement received by the viewport
     * if the viewport client uses the movement, it should return true to consume it 
     */
    virtual bool InputAxis(FViewport* Viewport, FInputDeviceId InputDevice, FKey Key, float Delta, float DeltaTime, int32 NumSamples = 1, bool bGamepad = false) { return false; }
};
```