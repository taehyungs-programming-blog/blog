---
layout: default
title: "02. CalcNewComponentToWorld"
parent: "(05.SetRelativeLocationAndRotation ë¶„ì„)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
FTransform CalcNewComponentToWorld
(
    const FTransform& NewRelativeTransform, 
    const USceneComponent* Parent=nullptr, 
    FName SocketName=NAME_None
) const
{
    SocketName = Parent ? SocketName : GetAttachSocketName();
    Parent = Parent ? Parent : GetAttachParent();
    if (Parent)
    {
        return CalcNewComponentToWorld_GeneralCase(NewRelativeTransform, Parent, SocketName);
    }
    else
    {
        return NewRelativeTransform;
    }
}
```

```cpp
FTransform CalcNewComponentToWorld_GeneralCase
(
    const FTransform& NewRelativeTransform, 
    const USceneComponent* Parent, 
    FName SocketName
) const
{
    if (Parent != nullptr)
    {
        // Parentì˜ Socketì •ë³´ë¥¼ ë°›ì•„ì˜¨ë‹¤.
            // Socket ì •ë³´ --- USceneComponent::GetSocketTransform
            //              ã„´ UKinnedMeshComponent::GetSocketTransform
            // ë‘ ê°€ì§€ê°€ ì¡´ì¬! -> ë‹¤ìŒ ê°• ì°¸ì¡°!!
        const FTransform ParentToWorld = Parent->GetSocketTransform(SocketName);

        // ì¨‹ë“  ParentToWorldì—ì„œ NewRelativeTransformë¥¼ ê³±í•´ NewCompToWorld ìƒì„±
        FTransform NewCompToWorld = NewRelativeTransform * ParentToWorld;
        return NewCompToWorld;
    }
    else
    {
        // Parentê°€ ì—†ëŠ”ê²½ìš° NewRelativeTransform ë¦¬í„´
        return NewRelativeTransform;
    }
}
```