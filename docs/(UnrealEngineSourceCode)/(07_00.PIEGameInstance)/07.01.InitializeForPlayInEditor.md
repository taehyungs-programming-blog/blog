---
layout: default
title: "01. InitializeForPlayInEditor"
parent: "(07_00.PIEGameInstanceë§Œë“¤ê¸°)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## InitializeForPlayInEditor

* PIEì‹¤í–‰ì‹œ GameInstanceì˜ Initializeë¥¼ ë‹´ë‹¹í•œë‹¤ê³  ìƒê°í•˜ë©° ëœë‹¤.

```cpp
virtual FGameInstancePIEResult InitializeForPlayInEditor(int32 PIEInstanceIndex, const FGameInstancePIEParameters& Params)
{
    FWorldDelegates::OnPIEStarted.Broadcast(this);

    UEditorEngine* const EditorEngine = CastChecked<UEditorEngine>(GetEngine());

    // ì—¬ê¸°ì„œ ë§í•˜ëŠ” PIEInstanceIndexëŠ” Editorì—ì„œ ì„¤ì •í•œ Playerì˜ ìˆ«ìë¥¼ ì˜ë¯¸í•¨, ë³´í†µ 0ì¼ë“¯?
        // GetWorldContextFromPIEInstanceëŠ” ì•„ë˜ ì°¸ì¡°
    WorldContext = EditorEngine->GetWorldContextFromPIEInstance(PIEInstanceIndex);
    if (!WorldContext)
    {
        WorldContext = &EditorEngine->CreateNewWorldContext(EWorldType::PIE);
        WorldContext->PIEInstance = PIEInstanceIndex;
    }

    WorldContext->OwningGameInstance = this;

    UWorld* NewWorld = nullptr;
    bool bNeedsGarbageCollection = false;
    
        // CreatePIEWorldByDuplicationì˜ ì„¤ëª…ì€ ë‹¤ìŒì¥ ì°¸ì¡°!
    NewWorld = EditorEngine->CreatePIEWorldByDuplication(*WorldContext, EditorEngine->EditorWorld, PIEMapName);

    bNeedsGarbageCollection = true;

    WorldContext->SetCurrentWorld(NewWorld);

    NewWorld->SetGameInstance(this);

    // GCê°€ ëŒì•„ê°€ëŠ” ëª¨ìŠµ
    if(bNeedsGarbageCollection)
    {
        CollectGarbage(GARBAGE_COLLECTION_KEEPFLAGS);
    }

    Init();

    EditorEngine->PostCreatePIEWorld(NewWorld);

    return FGameInstancePIEResult::Success();
}
```

---

## GetWorldContextFromPIEInstance

```cpp
FWorldContext* GetWorldContextFromPIEInstance(const int32 PIEInstance)
{
    // ë‹¨ìˆœí•˜ë‹¤ ê´€ë¦¬ì¤‘ì¸ Listì¤‘ì— ì°¾ì•„ì„œ ë¦¬í„´
    for (FWorldContext& WorldContext : WorldList)
    {
        if (WorldContext.WorldType == EWorldType::PIE && WorldContext.PIEInstance == PIEInstance)
        {
            return &WorldContext;
        }
    }
    return nullptr;
}
```