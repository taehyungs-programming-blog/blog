---
layout: default
title: "01. AController"
parent: "(07_02.UGameInstance)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
/**
 * controllers are non-physical actors that can possess a Pawn to control its actions.
 * PlayerControllers are used by human players to control pawns, while AIControllers implement the AI for the pawns they control.
 * controllers take control of a pawn using their Possess() method, and relinquish control of the pawn by calling UnPossess()
 * 
 * controllers receive notifications for many of the events occuring for the Pawn they are controlling.
 * this gives the controller the opportunity to implement the behavior in response to this event, intercepting the event and
 * superseding the Pawn's default behavior
 * 
 * ControlRotation (accessed via GetControlRotation()), determines the viewing/aiming direction of the controller Pawn
 * and is affected by input such as from a mouse or gamepad 
 */


// - try to understand AController by the diagram:
//                   [GameInstance]   â”‚   [World]                                                                 
//                                    â”‚                                                                           
//                                    â”‚                                                                           
//    UPlayer(ULocalPlayer)           â”‚                                                                           
//       â”‚                            â”‚                                                                           
//       â””â”€â”€â”€AControllerâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º APawn                                                     
//           (APlayerController)      â”‚    â”‚            (ACharacter)                                              
//                                    â”‚    â”‚             â”‚                                                        
//                                    â”‚ Possess          â””â”€â”€RootComponent                                         
//                                    â”‚ (UnPossess)          â”‚                                                    
//                                    â”‚    â–²                 â”œâ”€â”€Component0                                        
//                                         â”‚                 â”‚                                                    
//                                         â”‚                 â””â”€â”€Component1                                        
//                                    â”Œâ”€â”€â”€â”€â”˜                                                                      
//                                    â”‚                                                                           
//                                    â”‚                                                                           
//                      - Possess()/UnPossess() can be considered as connecting world object(APawn or ACharacter) 
//                      - AController gives control actions to world object(APawn) to UPlayer                     
//  
// - try to understand the above comments by Epic:
//   1. controller(PlayerController) gives authority to take action on APawn in UWorld to UPlayer(ULocalPlayer)
//      - giving authority      == Possess()
//      - giving up authorithy  == UnPossess()
//   2. controller(AIController) gives authority to order commands on APawn in UWorld to AI object(agent)
//      - we can also think of 'Controller' as a bridge between world and non-world, giving authority to order commands:
//                                                                      
//                   the bridge between non-world and world             
//                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             
//                   â”‚             AController            â”‚             
//          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”€â”€â”        
//          â”‚ Non-World â”‚                              â”‚ World â”‚        
//          â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”¬â”€â”€â”€â”˜        
//             â”‚                                           â”‚            
//             â”œâ”€â”€GameState (?!)                   â”Œâ”€â”€â”€â”€â”€â–º â”œâ”€â”€â”€APawn0   
//             â”‚   â”‚                               â”‚       â”‚            
//             â”‚   â””â”€â”€LyraBotCreationComponent     â”‚       â”œâ”€â”€â”€APawn1   
//             â”‚       :TArray<AAIController>â”€â”€â”€â”€â”€â”€â”˜       â”‚            
//             â”‚               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â””â”€â”€â”€APawn2   
//             â””â”€â”€GameInstance    ***                            â–²      
//                 â”‚                                             â”‚      
//                 â””â”€â”€LocalPlayers                               â”‚      
//                     :TArray<ALocalPlayer>                     â”‚      
//                                 â”‚                             â”‚      
//                                 â”‚                             â”‚      
//                             APlayerController â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      
//                             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       
//                                  ***                 
//
//  3. controller gets world's events of possessing APawn:
//     - controller can implement event's response behavior
//  4. controller determines the viewing/aiming direction of Pawn:
//     - understand by the diagram:
//                                                                                                                       
//       Platforms     â”‚    Unreal Engine(Non-World)                                         â”‚   Unreal Engine(World)    
//                     â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚                           
//                     â”‚                             â”‚EditorEngine â”‚                         â”‚       â”Œâ”€â”€â”€World0          
//                     â”‚                             â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚       â”‚                   
//                     â”‚                                â”‚                                    â”‚       â”œâ”€â”€â”€World1          
//      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                â””â”€â”€TArray<FWorldContext>â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤                   
//      â”‚PC      â”œâ”€â”€â”  â”‚                                                                     â”‚       â”œâ”€â”€â”€World2          
//      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                                                                     â”‚       â”‚                   
//                  â”‚  â”‚                                                                     â”‚       â””â”€â”€â”€World3          
//      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚            â”‚              
//      â”‚Console â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â–ºâ”‚UGameViewportClientâ”œâ”€â”€â”€â”€â–ºGameInstanceâ”€â”€â”€â–ºLocalPlayers         â”‚            â””â”€â”€Level0      
//      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â–²   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â–²               â–²   â”‚                   â”‚                    â”‚      
//                  â”‚  â”‚  â”‚                          â”‚               â”‚   â”œâ”€â”€Player0â”€â”€â”€â”€â”     â”‚       â”Œâ”€â”€â”€â–ºAPawn0â”€â”€â”¤      
//      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚                          â”‚               â”‚   â”‚             â”‚     â”‚       â”‚            â”‚      
//      â”‚Mobile  â”œâ”€â”€â”˜  â”‚  â”‚                          â”‚               â”‚   â”œâ”€â”€Player1â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â–²â”€â”€â”€â”€â”¼â”€â”€â”€â–ºAPawn1â”€â”€â”¤      
//      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚                          â”‚               â”‚   â”‚             â”‚  â–²  â”‚  â”‚    â”‚            â”‚      
//                     â”‚  â”‚                          â”‚               â”‚   â””â”€â”€Player2â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚    â””â”€â”€â”€â–ºAPawn2â”€â”€â”˜      
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚  â”‚                        
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚  â”‚                        
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚ APlayerController         
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚                           
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚                           
//                     â”‚  â”‚                          â”‚               â”‚                    â”‚  â”‚                           
//                        â”‚                          â”‚               â”‚                    â”‚                              
//                        â”‚                          â”‚               â”‚                    â”‚                              
//                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              
//                                                          â”‚                                                            
//                                                          â”‚                                                            
//                                                          â”‚                                                            
//                                       1.Input events are propagate from Platform to UnrealEngine(World):              
//                                          Platformsâ”€â”€â–ºUnreal Engine(Non-World)â”€â”€â”€â–ºUnreal Engine(World)                 
//                                                       â”‚                           â”‚                                   
//                                                       â””â”€GameViewportClient        â””â”€â”€Pawns                            
//                                                               â”‚                                                       
//                                                               â–¼                                                       
//                                                         GameInstance                                                  
//                                                               â”‚                                                       
//                                                               â–¼                                                       
//                                                         LocalPlayers                                                  
//                                                                                                                       
//                                       2.Input events are propagated to Pawns directly                                 
//  
//
// - see AController's member variables (goto 012: CreateInnerProcessPIEGameInstance)                                                                                                                     
class AController : public AActor, public INavAgentInterface
```