---
layout: default
title: "02-01. UWorldSubsystem"
parent: "(02. UWorldë“¤ì–´ê°€ê¸°)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* SubSystemì€ ì–¸ë¦¬ì–¼ì—”ì§„ì˜ êµ¬ì„± ìš”ì†Œì˜ ìˆ˜ëª…(ìƒì„±/íŒŒê´´)ë¥¼ ë”°ë¥´ëŠ” ì‹œìŠ¤í…œ ì…ë‹ˆë‹¤.
* ì—”ì§„ì˜ ì‹œìŠ¤í…œì˜ ìˆ˜ëª…ì— ë§ì¶°ì„œ ë§¤ë‹ˆì € ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ë³µì¡í•˜ì§€ë§Œ SubSystemì„ ì´ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ê°œë°œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì‹œìŠ¤í…œì˜ ì¢…ë¥˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
    * UEngineSubsystem
    * UEditorSubsystem
    * UGameInstanceSubsystem
    * UWorldSubsystem
    * ULocalPlayerSubsystem 

```cpp
class USubsystem : public UObject
{
    /**
     * override to control if the Subsystem should be created
     * for example you could only have your system created on servers
     * it is important to note that if using this is becomes very important to null check whenever getting the Subsystem
     * 
     * NOTE: this function is called on the CDO prior to instances being created!!! 
     */
    // this member function is called via CDO(ClassDefaultObject)
    virtual bool ShouldCreateSubsystem(UObject* Outer) const { return true; }

    /** implement this for init/deinit of instances of the system */
    virtual void Initialize(FSubsystemCollectionBase& Collection) {}
    virtual void Deinitialize() {}

    // í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì— ì—¬ëŸ¬ê°œì˜ SubSystemì´ ì¡´ì¬ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ê·¸ê²ƒì„ ê´€ë¦¬í•˜ëŠ” Collectionì…ë‹ˆë‹¤.
    FSubsystemCollectionBase* InternalOwningSubsystem;
};
```

```cpp
class FSubsystemCollectionBase
{
    // ...

    UObject* Outer;         // is UWorld

    // SubSystemì˜ íƒ€ì… ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ SubSystemì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì¡´ì¬í•©ë‹ˆë‹¤.
    UClass* BaseType;       // is UWorldSubsystem

    /*
    SubSystemì„ A B Cë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë©´ ê° í´ë˜ìŠ¤ëŠ” ê³ ìœ ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. 
    ê·¸ê²ƒì„ ì´ìš©í•´ ì„œ 1:1ë¡œ ë§¤í•‘í•œ í•¨ìˆ˜ ì…ë‹ˆë‹¤. 
    Key : A ClassType Value : Instance A
    */
    TMap<TObjectPtr<UClass>, TObjectPtr<USubsystem>> SubsystemMap;

    /*
    SubSystemì€ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—”ì§„ì˜ êµ¬ì„±ë‹¨ê³„ì—ì„œ ê²°ì •ë˜ëŠ”ë°
    DynamicSubSystemì„ ì´ìš©í•˜ë©´ ë™ì ìœ¼ë¡œ ì—¬ëŸ¬ê°œê°€ ìƒì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. 
    ê·¸ê²ƒì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ë³„ë„ë¡œ ë§Œë“  Map ì…ë‹ˆë‹¤.
    */
    mutable TMap<UClass*, TArray<USubsystem*>> SubsystemArrayMap;
};
```