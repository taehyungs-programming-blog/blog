---
layout: default
title: "01. UWorld::CreateWorld"
parent: "(02.CreateWorld)"
grand_parent: "(UE SourceCode ë¶„ì„ ğŸ¤–)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## InitializationValues

* ë“¤ì–´ê°€ê¸° ì „ `InitializationValues`

```cpp
using InitializationValues = FWorldInitializationValues;

struct FWorldInitializationValues
{
    /** should the scenes (physics, rendering) be created */
    uint32 bInitializeScenes:1;

    /** Should the physics scene be created. bInitializeScenes must be true for this to be considered. */
    uint32 bCreatePhysicsScene:1;

    /** Are collision trace calls valid within this world. */
    uint32 bEnableTraceCollision:1;

    //...
};
```

---

## CreateWorld

```cpp
static UWorld* CreateWorld(
    const EWorldType::Type InWorldType, 
    bool bInformEngineOfWorld, 
    FName WorldName = NAME_None, 
    UPackage* InWorldPackage = NULL, 
    bool bAddToRoot = true, 
    ERHIFeatureLevel::Type InFeatureLevel = ERHIFeatureLevel::Num, 
    const InitializationValues* InIVS = nullptr, 
    bool bInSkipInitWorld = false
)
{
    // UPackageëŠ” Worldë¥¼ Serializeí™” í•œ Object(ë°”ì´ë„ˆë¦¬í™” í•œ Object)ë¼ ìƒê°í•˜ì.
        // ë³´í†µ OutterPrivateì— UPackageê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤.
    UPackage* WorldPackage = InWorldPackage;
    if (!WorldPackage)
    {
        // ìš°ì„  ë”ë¯¸ë¥¼ í•˜ë‚˜ë§Œë“¤ê³  ì±„ì›Œë‚˜ê°€ê²Œ ëœë‹¤.
        WorldPackage = CreatePackage(nullptr);
    }

    if (InWorldType == EWorldType::PIE)
    {
        WorldPackage->SetPackageFlags(PKG_PlayInEditor);
    }

    // Unrealì—ì„œ Transientë€ ìš©ì–´?
        // Transientì´ë©´ Packaging(Serializing) í•˜ì§€ë§ì•„ë‹¬ë¼
        // ë‹¤ì‹œë§í•´ Fileì˜ í˜•íƒœë¡œ ë‚¨ê¸°ì§€ë§ì•„ ë‹¬ë¼ëŠ” ë§ì´ë‹¤.
    if (WorldPackage != GetTransientPackage())
    {
        WorldPackage->ThisContainsMap();
    }

    const FString WorldNameString = (WorldName != NAME_None) ? WorldName.ToString() : TEXT("Untitled");

    // UWorldëŠ” ì„¤ëª…ì´ ê¸¸ì–´ì§€ê¸°ì— 2ì¥ ì°¸ì¡°!
    UWorld* NewWorld = NewObject<UWorld>(WorldPackage, *WorldNameString);


    NewWorld->SetFlags(RF_Transactional);
    NewWorld->WorldType = InWorldType;
    NewWorld->SetFeatureLevel(InFeatureLevel);

    NewWorld->InitializeNewWorld(
        InIVS ? *InIVS : UWorld::InitializationValues()
            .CreatePhysicsScene(InWorldType != EWorldType::Inactive)
            .ShouldSimulatePhysics(false)
            .EnableTraceCollision(true)
            .CreateNavigation(InWorldType == EWorldType::Editor)
            .CreateAISystem(InWorldType == EWorldType::Editor)
        , bInSkipInitWorld);

    WorldPackage->SetDirtyFlag(false);

    if (bAddToRoot)
    {
        NewWorld->AddToRoot();
    }

    if ((GEngine) && (bInformEngineOfWorld == true))
    {
        GEngine->WorldAdded(NewWorld);
    }

    return NewWorld;
}
```