---
layout: default
title: "03. [ë³µìŠµ] smart_pointerëŠ” thread-safeí•œê°€? + Memory Poolì˜ ë‹¨ì ?"
parent: "(UE + IOCP)"
grand_parent: "Game Server ğŸ‘¾"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/Arthur880708/cpp.unreal.server.example/tree/1)

---

## smart_pointerëŠ” thread-safeí•œê°€?

* smart_pointerë¥¼ ì½ê¸°ë§Œ í• ë•ŒëŠ” thread-safeí•œê²Œ ë§ë‹¤
* ë‹¨ ì£¼ì˜í•´ì•¼ í•  ì ì€ ìƒˆë¡œ smart_pointerë¥¼ ìƒì„±ì‹œ ì´ë‹¤.
    * ì›ë³¸ ì£¼ì†Œì§€ì™€ ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ê°€ ë™ì‹œì— ì—…ë°ì´íŠ¸ì•ˆë˜ì–´ thread-safeí•˜ì§€ ëª»í• ìˆ˜ ìˆìŒ.
    * atomic smart_pointerë¡œ í•´ê²°í•˜ì

```cpp
#include <atomic>
#include <memory>
#include <thread>

// atomic smart_pointer C++17
std::atomic<std::shared_ptr<int>> globalPtr;

void ThreadFunc() {
    // ì•ˆì „í•˜ê²Œ std::shared_ptrë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •
    auto localPtr = std::make_shared<int>(42);
    globalPtr.store(localPtr, std::memory_order_relaxed);
}

int main() {
    std::thread t1(ThreadFunc);
    std::thread t2(ThreadFunc);

    t1.join();
    t2.join();

    if (auto shared = globalPtr.load(std::memory_order_relaxed)) {
        // ì•ˆì „í•˜ê²Œ ê³µìœ ëœ ë°ì´í„° ì‚¬ìš©
    }

    return 0;
}

```

---

## Memory Poolì˜ ë‹¨ì ?

* ë©”ëª¨ë¦¬ ì˜¤ì—¼ìœ¼ë¡œ ì¸í•œ Crashë¥¼ ì¡ê¸°ê°€ ì‰½ì§€ ì•ŠìŒ
    * ê³¼ê±°ì—ì‚¬ìš©í–ˆë˜ ì• ê°€ ì˜¤ì—¼ì‹œì¼œë‘” ë©”ëª¨ë¦¬ë¥¼ ë‹¤ìŒìˆœì°¨ì— ì“°ë˜ì• ì—ì„œ Crash ë‚˜ëŠ” ê²½ìš° ...
* ìµœê·¼ C++ì˜ new, deleteê°€ ë¹ ë¥´ê¸°ì— ê·¸ëƒ¥ Memory Poolì„ ì“°ì§€ ì•ŠëŠ” ì¶”ì„¸



