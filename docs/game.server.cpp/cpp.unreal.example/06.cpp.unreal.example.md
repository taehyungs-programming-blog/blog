---
layout: default
title: "06. Unrealì— Protobuf ë¶™ì´ê¸°"
parent: "(UE + IOCP)"
grand_parent: "Game Server ğŸ‘¾"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/Arthur880708/cpp.unreal.server.example/tree/2)

---

## Protobuf Lib ë¶™ì´ê¸°

* `{UnrealProject}\Source\ProtobufCore` ìƒì„±
    * ë‚´ë¶€ì— include, libë¥¼ ë„£ëŠ”ë‹¤
    * `ProtobufCore.Build.cs` ìƒì„±í›„ ì•„ë˜ì™€ ê°™ì´ ë„£ëŠ”ë‹¤
* Q) ê·¸ëƒ¥ Unrealì—ì„œ ì œê³µí•˜ëŠ” Protobufë¥¼ ì“°ë©´ì•ˆë˜ë‚˜?
    * ë‚´ê°€ ë²„ì „ì§€ì •ì„ ëª»í•¨.
* `.uproject` ìš°í´ë¦­ í›„ generateë‹¤ì‹œ

```csharp
// Fill out your copyright notice in the Description page of Project Settings.

using System.IO;
using UnrealBuildTool;

public class ProtobufCore : ModuleRules
{
	public ProtobufCore(ReadOnlyTargetRules Target) : base(Target)
	{
		Type = ModuleType.External;

		PublicSystemIncludePaths.Add(Path.Combine(ModuleDirectory, "Include"));
		PublicIncludePaths.Add(Path.Combine(ModuleDirectory, "Include"));
		PublicAdditionalLibraries.Add(Path.Combine(ModuleDirectory, "Lib", "Win64", "libprotobuf.lib"));

		PublicDefinitions.Add("GOOGLE_PROTOBUF_NO_RTTI=1");
	}
}

```

* `{UnrealProject}\Source\{UnrealProject}`ë‚´ì˜ `Build.cs`ë¥¼ ìˆ˜ì •í•´ ì¤€ë‹¤

```csharp
// Copyright Epic Games, Inc. All Rights Reserved.

using UnrealBuildTool;

public class UnrealProject : ModuleRules
{
	public UnrealProject(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;
	
		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore", "Sockets", "Networking" });

		PrivateDependencyModuleNames.AddRange(new string[] { "ProtobufCore" });

		PrivateIncludePaths.AddRange(new string[]
		{
			"UnrealProject/",
			"UnrealProject/Network/",
		});

		// Uncomment if you are using Slate UI
		// PrivateDependencyModuleNames.AddRange(new string[] { "Slate", "SlateCore" });

		// Uncomment if you are using online features
		// PrivateDependencyModuleNames.Add("OnlineSubsystem");

		// To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true
	}
}

```

---

## ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜ ë“¤ì–´ê°”ë‚˜ í™•ì¸í•´ ë³´ì

* Protobufë¡œ ë§Œë“  .cpp/.híŒŒì¼ì„ includeí•´ì„œ ë¹Œë“œê°€ ë˜ëŠ”ì§€ ë³´ì
* ë§Œì•½ ì§€ì†ì ìœ¼ë¡œ warningì´ë‚˜ errorê°€ ë°œìƒì‹œ ì•„ë˜ íŒŒì¼(`port_def.inc`)ì„ ìˆ˜ì •í•´ ë³´ì

```cpp
// ...

#ifdef _MSC_VER
#pragma warning(disable: 4800)
#pragma warning(disable: 4459)
#endif
```

---

