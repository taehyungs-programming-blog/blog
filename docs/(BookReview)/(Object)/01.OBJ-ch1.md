---
layout: default
title: "Ch.1 - ê°ì²´, ì„¤ê³„"
parent: "(ì˜¤ë¸Œì íŠ¸)"
grand_parent: "ì±…(ê°œë°œë„ì„œ) ë¦¬ë·° ğŸ“š"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ê¸°ì¡´ì½”ë“œ

* í‹°ì¼“ íŒë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•˜ë©° ë¬¸ì œê°€ ë­”ì§€ ì‚´í´ë³´ì

```cpp
class Invitation
{
private:
    LocalDateTime when;
};
```

```cpp
class Ticket
{
public:
    long getFee() { return fee; }

private:
    long fee;
};
```

```cpp
class Bag 
{   
public:
    Bag(long _amount) : amount(_amount) {}
    Bag(Invitation _invitation, long _amount) : invitation(_invitation), amount(_amount) {}

    bool hasInvitation() { return inviation != nullptr; }
    bool hasTicket() { return ticket != nullptr; }
    void setTicket(Ticket* _ticket) { ticket = _ticket; }
    void minusAcount(long _amount) { amount -= _amount; }
    void plusAcount(long _amount) { amount += _amount; }

private:
    long amount;        // í˜„ê¸ˆ
    Invitation* invitation = nullptr;
    Ticket* ticket = nullptr;
};
```

```cpp
class Audience
{
public:
    Audience(Bag* _bag) { bag = _bag; }
    Bag* getBag() { return bag; }

private:
    Bag* bag;
};
```

```cpp
class TicketOffice
{
public:
    TicketOffice(long _amount, std::vector<Ticket> _tickets)
    {
        amount = _amount;
        tickets = _tickets;
    }
    void minusAcount(long _amount) { amount -= _amount; }
    void plusAcount(long _amount) { amount += _amount; }

private:
    long amount;
    std::vector<Ticket> tickets;
};
```

```cpp
class TicketSeller
{
public:
    TicketSeller(TicketOffice* _ticketOffice) : ticketOffice(_ticketOffice) {}

    TicketOffice* getTicketOffice() { return ticketOffice; }

private:
    TicketOffice* ticketOffice;
};
```

```cpp
class Theater
{
public:
    Theater(TicketSeller* _ticketSeller) : ticketSeller(_ticketSeller) {}

    void enter(Audience* audience) {
        if (audience->getBag().hasInvitation()) {
            // ì´ˆëŒ€ì¥ì´ ìˆëŠ” ê²½ìš° í‹°ì¼“ì„ ì¤€ë‹¤
            Ticket* t = ticketSeller->getTicketOffice().getTicket();
            audience->getBag().setTicket(t);
        }
        else {
            // ì´ˆëŒ€ì¥ì´ ì—†ëŠ” ê²½ìš° í‹°ì¼“ì„ íŒë§¤í•œë‹¤
            Ticket* t = ticketSeller->getTicketOffice().getTicket();
            audience->getBag().minusAmount(t.getFee());
            ticketSeller->getTicketOffice().plusAmount(t.getFee());
            audience->getBag().setTicket(t);
        }
    }
private:
    TicketSeller* ticketSeller;
};
```

---

## ë­ê°€ ë¬¸ì œì¼ê¹Œ?

* ë¬¸ì œëŠ” audienceì˜ ê°€ë°©ì—ì„œ Theaterê°€ invitationì´ë‚˜ ticketì„ ì°¾ê±°ë‚˜ ë„£ì–´ì¤€ë‹¤. + ëˆê¹Œì§€ Theaterê°€ ê´€ë¦¬í•´ì¤€ë‹¤!
* ë” í° ë¬¸ì œëŠ” Theater.enterë¥¼ êµ¬í˜„í•˜ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„  audienceê°€ Bag, Ticket, Invitationì„ ëª¨ë‘ ë³´ìœ í•˜ê³  ìˆìŒì„ ì¸ì§€í•˜ê³  ìˆì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.
    * ì´ê²Œ ì™œ ë¬¸ì œëƒ? ë§Œì•½ audienceì— bagì´ ì‚¬ë¼ì§„ë‹¤ë©´??? ì˜ì¡´ì„±ì˜ ë¬¸ì œë¡œ ì´ì–´ì§„ë‹¤

```cpp
// 1ì°¨ ìˆ˜ì • - Ticketì„ íŒë§¤í•˜ëŠ” ì¼ì„ TicketSellerì—ê²Œ ë„˜ê¸´ë‹¤

class TicketSeller
{
public:
    TicketSeller(TicketOffice* _ticketOffice) : ticketOffice(_ticketOffice) {}

    TicketOffice* getTicketOffice() { return ticketOffice; }

    void sellTo(Audience* _audience)
    {
        if (audience->getBag().hasInvitation()) {
            // ì´ˆëŒ€ì¥ì´ ìˆëŠ” ê²½ìš° í‹°ì¼“ì„ ì¤€ë‹¤
            Ticket* t = ticketSeller->getTicketOffice().getTicket();
            audience->getBag().setTicket(t);
        }
        else {
            // ì´ˆëŒ€ì¥ì´ ì—†ëŠ” ê²½ìš° í‹°ì¼“ì„ íŒë§¤í•œë‹¤
            Ticket* t = ticketSeller->getTicketOffice().getTicket();
            audience->getBag().minusAmount(t.getFee());
            ticketSeller->getTicketOffice().plusAmount(t.getFee());
            audience->getBag().setTicket(t);
        }
    }

private:
    TicketOffice* ticketOffice;
};
```

```cpp
class Theater
{
public:
    Theater(TicketSeller* _ticketSeller) : ticketSeller(_ticketSeller) {}

    void enter(Audience* audience) {
        ticketSeller->sellTo(audience);
    }
private:
    TicketSeller* ticketSeller;
};
```

```cpp
// 2ì°¨ ìˆ˜ì • - TicketSellerì™€ Audienceì˜ ì˜ì¡´ì„±ì„ ë‚®ì¶˜ë‹¤

class Audience
{
public:
    Audience(Bag* _bag) { bag = _bag; }
    // Bag* getBag() { return bag; } // ì œê±°

    long buy(Ticket* _ticket)
    {
        if (bag->hasInvitation()) {
            // ì´ˆëŒ€ì¥ì´ ìˆëŠ” ê²½ìš° í‹°ì¼“ì„ ì¤€ë‹¤
            bag->setTicket(_ticket);
            return 0;
        }
        else {
            // ì´ˆëŒ€ì¥ì´ ì—†ëŠ” ê²½ìš° í‹°ì¼“ì„ íŒë§¤í•œë‹¤
            bag->setTicket(_ticket);
            bag->minusAmount(_ticket.getFee());
            return _ticket.getFee();
        }
    }

private:
    Bag* bag;
};
```

* í•µì‹¬ì€? -> ì„œë¡œ ì˜ì¡´ì„±ì„ ë‚®ì¶”ë¼!!!

```cpp
// ë§ˆì§€ë§‰

class Bag 
{   
public:
    Bag(long _amount) : amount(_amount) {}
    Bag(Invitation _invitation, long _amount) : invitation(_invitation), amount(_amount) {}

    bool hasInvitation() { return inviation != nullptr; }
    bool hasTicket() { return ticket != nullptr; }
    void setTicket(Ticket* _ticket) { ticket = _ticket; }
    void minusAcount(long _amount) { amount -= _amount; }
    void plusAcount(long _amount) { amount += _amount; }

    // Bagì—ì„œ ì²˜ë¦¬í•œë‹¤
    long hold(Ticket* _ticket)
    {
        if (hasInvitation()) {
            // ì´ˆëŒ€ì¥ì´ ìˆëŠ” ê²½ìš° í‹°ì¼“ì„ ì¤€ë‹¤
            setTicket(_ticket);
            return 0;
        }
        else {
            // ì´ˆëŒ€ì¥ì´ ì—†ëŠ” ê²½ìš° í‹°ì¼“ì„ íŒë§¤í•œë‹¤
            setTicket(_ticket);
            minusAmount(_ticket.getFee());
            return _ticket.getFee();
        }
    }

private:
    long amount;        // í˜„ê¸ˆ
    Invitation* invitation = nullptr;
    Ticket* ticket = nullptr;
};
```