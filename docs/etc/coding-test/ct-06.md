---
layout: default
title: "(Easy) dfs"
parent: "Coding Test ğŸ’»"
grand_parent: "Etc ğŸ› "
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [ì°¸ê³ ì‚¬ì´íŠ¸ ğŸŒ](https://better-tomorrow.tistory.com/entry/DFS-BFS-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)

## dfs(Depth-First Search)

* ê·¸ë˜í”„ ì „ì²´ë¥¼ íƒìƒ‰í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.
* íƒìƒ‰ ë°©ë²•ì€
    * ì‹œì‘ ë…¸ë“œë¥¼ ìŠ¤íƒì— ë„£ê³  ë°©ë¬¸ì²˜ë¦¬
    * ì¸ì ‘ ë…¸ë“œê°€ ìˆë‹¤ë©´ ê·¸ ë…¸ë“œë¥¼ ìŠ¤íƒì— ë„£ê³  ë°©ë¬¸ ì²˜ë¦¬, ë§Œì•½ ì¸ì ‘í•œ ë…¸ë“œê°€ ì—†ë‹¤ë©´ ìµœìƒë‹¨ ìŠ¤íƒì„ í•˜ë‚˜ êº¼ë‚¸ë‹¤.
    * ë°˜ë³µ

<ê·¸ë¦¼>

## Example

* ì•„ë˜ì™€ ê°™ì€ Graphê°€ ìˆë‹¤ê³  ê°€ì •í• ë•Œ DFSë¥¼ êµ¬í˜„í•˜ë¼

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/etc/coding-test/ct-6-2.png"/>
</p>

```cpp
// Q

#include <iostream>
#include <vector>
using namespace std;

vector<int> graph[8];

void dfs(int x)
{
	// Enter Your Code
}

int main(void)
{
    /* ìœ„ ê·¸ë˜í”„ì™€ ë™ì¼í•˜ê²Œ ì •ì˜ */
    graph[1].push_back(2);
    graph[1].push_back(3);
    graph[1].push_back(8);

    graph[2].push_back(1);
    graph[2].push_back(7);

    graph[3].push_back(1);
    graph[3].push_back(4);
    graph[3].push_back(5);

    graph[4].push_back(3);
    graph[4].push_back(5);

    graph[5].push_back(3);
    graph[5].push_back(4);

    graph[6].push_back(7);

    graph[7].push_back(2);
    graph[7].push_back(6);
    graph[7].push_back(8);

    graph[8].push_back(1);
    graph[8].push_back(7);

    dfs(1);
}
```

```cpp
// A

#include <iostream>
#include <vector>
#include <array>
using namespace std;

array<bool, 9> visits;
vector<int> graph[9];

void dfs(int x)
{
    if (visits[x] == false)
    {
        visits[x] = true;
        for(auto item : graph[x])
            dfs(item);
    }
}

int main(void)
{
    /* ìœ„ ê·¸ë˜í”„ì™€ ë™ì¼í•˜ê²Œ ì •ì˜ */
    graph[1].push_back(2);
    graph[1].push_back(3);
    graph[1].push_back(8);

    graph[2].push_back(1);
    graph[2].push_back(7);

    graph[3].push_back(1);
    graph[3].push_back(4);
    graph[3].push_back(5);

    graph[4].push_back(3);
    graph[4].push_back(5);

    graph[5].push_back(3);
    graph[5].push_back(4);

    graph[6].push_back(7);

    graph[7].push_back(2);
    graph[7].push_back(6);
    graph[7].push_back(8);

    graph[8].push_back(1);
    graph[8].push_back(7);

    dfs(1);

    for (auto v : visits)
    {
        cout << v << endl;
    }
}
```

---

## ì¥/ë‹¨ì  ?

* ì¥ì 
    * ë‹¨ì§€ í˜„ ê²½ë¡œìƒì˜ ë…¸ë“œë§Œì„ ê¸°ì–µí•˜ë©´ ë˜ë¯€ë¡œ ì €ì¥ê³µê°„ì˜ ìˆ˜ìš”ê°€ ë¹„êµì  ì ë‹¤.
    * ëª©í‘œë…¸ë“œê°€ ê¹Šì€ ë‹¨ê³„ì— ìˆì„ ê²½ìš° í•´ë¥¼ ë¹¨ë¦¬ êµ¬í•  ìˆ˜ ìˆë‹¤.
* ë‹¨ì 
    * í•´ê°€ ì—†ëŠ” ê²½ë¡œì— ê¹Šì´ ë¹ ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆë‹¤. 
    * ë”°ë¼ì„œ ì‹¤ì œì˜ ê²½ìš° ë¯¸ë¦¬ ì§€ì •í•œ ì„ì˜ì˜ ê¹Šì´ê¹Œì§€ë§Œ íƒìƒ‰í•˜ê³  ëª©í‘œë…¸ë“œë¥¼ ë°œê²½í•˜ì§€ ëª»í•˜ë©´ ë‹¤ìŒ ê²½ë¡œë¥¼ ë”°ë¼ íƒìƒ‰í•˜ëŠ” ë°©ë²•ì´ ìœ ìš©í•  ìˆ˜ë„ ìˆë‹¤.
    * ì–»ì–´ì§„ í•´ê°€ ìµœë‹¨ ê²½ë¡œê°€ ëœë‹¤ëŠ” ë³´ì¥ì´ ì—†ë‹¤. 
    * ì´ëŠ” ëª©í‘œì— ì´ë¥´ëŠ” ê²½ë¡œê°€ ë‹¤ìˆ˜ì¸ ë¬¸ì œì— ëŒ€í•´ DFSëŠ” í•´ì— ë‹¤ë‹¤ë¥´ë©´ íƒìƒ‰ì„ ëë‚´ë²„ë¦¬ë¯€ë¡œ, ì´ë•Œ ì–»ì–´ì§„ í•´ëŠ” ìµœì ì´ ì•„ë‹ ìˆ˜ë„ ìˆë‹¤.

---

## ì‹¤ì „ì˜ˆì œ

* DeadLock ê°ì§€ê¸°ì— ì‚¬ìš©í•¨
* [Link ğŸŒ](https://taehyungs-programming-blog.github.io/blog/docs/game-server/cpp-iocp/16-cpp-iocp/)

```cpp
void DeadLockProfiler::Dfs(int32 here)
{
    // í˜„ì¬ ì§€ì ì´ ë°œê²¬ì´ ëœ ìƒíƒœ
	if (_discoveredOrder[here] != -1)
		return;

	_discoveredOrder[here] = _discoveredCount++;

	// ëª¨ë“  ì¸ì ‘í•œ ì •ì ì„ ìˆœíšŒí•œë‹¤.
	auto findIt = _lockHistory.find(here);  // hereê°€ ì–´ë–¤ Threadë¥¼ lockì¡ê³ ìˆëŠ”ì§€ í™•ì¸
	if (findIt == _lockHistory.end())
	{
        // ë‹¤ë¥¸ ì •ì ì„ ì¡ê³ ìˆëŠ” ì• ê°€ ì—†ìŒ.
		_finished[here] = true;
		return;
	}

	set<int32>& nextSet = findIt->second;
	for (int32 there : nextSet)
	{
		// ì•„ì§ ë°©ë¬¸í•œ ì ì´ ì—†ë‹¤ë©´ ë°©ë¬¸í•œë‹¤.
		if (_discoveredOrder[there] == -1)
		{
			_parent[there] = here;
			Dfs(there);
			continue;
		}

		// hereê°€ thereë³´ë‹¤ ë¨¼ì € ë°œê²¬ë˜ì—ˆë‹¤ë©´, thereëŠ” hereì˜ í›„ì†ì´ë‹¤. (ìˆœë°©í–¥ ê°„ì„ )
		if (_discoveredOrder[here] < _discoveredOrder[there])
			continue;

		// ìˆœë°©í–¥ì´ ì•„ë‹ˆê³ , Dfs(there)ê°€ ì•„ì§ ì¢…ë£Œí•˜ì§€ ì•Šì•˜ë‹¤ë©´, thereëŠ” hereì˜ ì„ ì¡°ì´ë‹¤. (ì—­ë°©í–¥ ê°„ì„ )
		if (_finished[there] == false)
		{
			printf("%s -> %s\n", _idToName[here], _idToName[there]);

			int32 now = here;
			while (true)
			{
				printf("%s -> %s\n", _idToName[_parent[now]], _idToName[now]);
				now = _parent[now];
				if (now == there)
					break;
			}

			CRASH("DEADLOCK_DETECTED");
		}
        else
        {
            // í•˜ë‚˜ë§Œ ë” ê³ ë ¤í•´ ë³´ì
            // if (_finished[there] == true)
            // ì—­ë°©í–¥ ê°„ì„ ì´ ìˆì—ˆìœ¼ë‚˜ _finishedë¥¼ í•œ ê²½ìš°ëŠ” ìˆì„ê¹Œ?

            // ì—†ìŒ.
            // _finished[there] == trueì˜ ì¡°ê±´ì´
                // lockì„ ì¡ê³ ìˆëŠ” ìë…€ê°€ ì—†ê±°ë‚˜
                // ìë…€ì˜ dfsê°€ ëª¨ë‘ ëë‚œê²½ìš° ë°–ì— ì—†ê¸°ì— ë¬´ì¡°ê±´ ì¡íŒë‹¤
        }
	}

	_finished[here] = true;
}
```