---
layout: default
title: "01. (CLionê³¼ CMake ì—°ë™)"
parent: "(CMake ğŸ¦Š)"
grand_parent: "Etc ğŸ› "
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```powershell
# PowerShell ì‹¤í–‰ ì •ì±… ë³€ê²½
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# Scoop ì„¤ì¹˜
irm get.scoop.sh | iex

# í•„ìš”í•œ ë²„í‚· ì¶”ê°€
scoop bucket add main
scoop bucket add extras
scoop bucket add versions
scoop bucket add nonportable

# í•„ìš”í•œ ë„êµ¬ ì„¤ì¹˜
scoop install vcpkg
scoop install cmake
scoop install vs2022-build-tools
```

```powershell
# vcpkg í™˜ê²½ë³€ìˆ˜ ì„¤ì •
[Environment]::SetEnvironmentVariable("VCPKG_ROOT", "$env:USERPROFILE\scoop\apps\vcpkg\current", "User")
```

```powershell
# vcpkgë¡œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
vcpkg install curl:x64-windows
vcpkg install spdlog:x64-windows

# vcpkg í†µí•© ì„¤ì¹˜
vcpkg integrate install
```

```
í”„ë¡œì íŠ¸ êµ¬ì¡°

hellocmake/
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ vcpkg.json
â””â”€â”€ src/
    â””â”€â”€ main.cpp
```

```json
// vcpkg.json

{
  "name": "hellocmake",
  "version": "1.0.0",
  "dependencies": [
    "curl",
    "spdlog"
  ]
}
```

```cmake
# ìƒì„±ê¸°(Generator) ì„¤ì •
    # -G Option
    # Clionì˜ ë””í´íŠ¸ëŠ” Ninjaì´ë‹¤.
if(WIN32 AND NOT DEFINED CMAKE_GENERATOR)
    set(CMAKE_GENERATOR "Visual Studio 17 2022" CACHE INTERNAL "" FORCE)
    if(NOT DEFINED CMAKE_GENERATOR_PLATFORM)
        set(CMAKE_GENERATOR_PLATFORM "x64" CACHE INTERNAL "" FORCE)
    endif()
endif()

cmake_minimum_required(VERSION 3.15)
project(hellocmake)

# ì»´íŒŒì¼ëŸ¬ë³„ ì„¤ì •
if(MSVC)
    # MSVC ê´€ë ¨ ì„¤ì •
    add_compile_options(/utf-8)
    add_compile_options(/MP)
    add_compile_options(/WX-)
    add_definitions(-D_CRT_SECURE_NO_WARNINGS)
else()
    # GCC/Clang ê´€ë ¨ ì„¤ì •
    add_compile_options(-Wall -Wextra)
    if(WIN32)
        add_compile_options(-fexec-charset=UTF-8)
    endif()
endif()

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# ë””ë²„ê·¸ ëª¨ë“œì¼ ë•Œ 'D' ì ‘ë¯¸ì‚¬ ì¶”ê°€
set(CMAKE_DEBUG_POSTFIX "d")

# vcpkg í†µí•©
if(DEFINED ENV{USERPROFILE} AND NOT DEFINED CMAKE_TOOLCHAIN_FILE)
    set(CMAKE_TOOLCHAIN_FILE "$ENV{USERPROFILE}/scoop/apps/vcpkg/current/scripts/buildsystems/vcpkg.cmake"
        CACHE STRING "")
endif()

# ì˜ì¡´ì„± ì°¾ê¸°
find_package(CURL REQUIRED)
find_package(spdlog CONFIG REQUIRED)

# ì‹¤í–‰ íŒŒì¼ ì¶”ê°€
add_executable(${PROJECT_NAME} src/main.cpp)

# ì˜ì¡´ì„± ë§í¬
target_link_libraries(${PROJECT_NAME} 
    PRIVATE 
    CURL::libcurl
    spdlog::spdlog
)

# ì¶œë ¥ ë””ë ‰í† ë¦¬ ì„¤ì •
set_target_properties(${PROJECT_NAME} PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin"
    LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
    ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
) 
```

* CLionì—ì„œ CMake ì„¤ì •

```
-DCMAKE_TOOLCHAIN_FILE=${USERPROFILE}/scoop/apps/vcpkg/current/scripts/buildsystems/vcpkg.cmake
```