---
layout: default
title: "08. Indirect Arguments"
parent: "(Computer Animation)"
grand_parent: "(Graphics ğŸ˜)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/Arthur880708/Graphics_Part4/blob/main/Examples/Ex1407_IndirectArguments.h)

* DrawInstancedì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´

```cpp
void DrawInstanced(
  [in] UINT VertexCountPerInstance,
  [in] UINT InstanceCount,
  [in] UINT StartVertexLocation,
  [in] UINT StartInstanceLocation
);
```

* ì´ë ‡ê²Œ ë‹¤ì–‘í•œ Vertex ì •ë³´ë¥¼ ë„˜ê²¨ì•¼ í•˜ëŠ”ë° ì´ ì •ë³´ë¥¼ ë¯¸ë¦¬ GPUì— ë„£ì–´ë‘ê³ 
* GPU ì£¼ì†Œê°’ë§Œ ë³´ë‚´ë ¤ í•œë‹¤.

```cpp
struct IndirectArgs {
    UINT VertexCountPerInstance;
    UINT InstanceCount;
    UINT StartVertexLocation;
    UINT StartInstanceLocation;
};
vector<IndirectArgs> m_argsCPU = {
    {32, 1, 0, 0}, 
    {64, 1, 0, 0}, 
    {256, 1, 0, 0}};
    // ì²« ì¸ìˆ˜ê°€ VertexCountPerInstance Vertex Countì´ê¸°ì— ëª‡ê°œ ê·¸ë ¤ì§€ëŠ”ì§€ ë‹´ë‹¹

// ...

void DrawSprites() {
    // ...

    // ì´ë ‡ê²Œ ì“´ë‹¤
    const UINT offset = sizeof(IndirectArgs) * 0; // offsetì´ 0ì´ê¸°ì— 32ê°œê°€ ê·¸ë ¤ì§ˆ ê²ƒ
    m_context->DrawInstancedIndirect(m_argsGPU.Get(), offset);
}
```

* ì•„ë‹ˆ ì´ëŸ° ë»˜ì§“ì´ ìˆë‚˜?? Constant Bufferë€ ì¢‹ì€ ë²„í¼ê°€ìˆëŠ”ë° ì´ê±¸ ì™œ ì¨???
    * ì´ í•µì‹¬ì€ GPUì— CPUë°ì´í„°ë¥¼ CSê°€ ì“°ê³  ë‹¤ì‹œ CSì—ì„œ ê·¸ ë°ì´í„°ë¥¼ ìˆ˜ì •í• ìˆ˜ìˆìŒì´ í•µì‹¬
    * ì²˜ìŒ 32ê°œë¼ë„ CSê°€ ê²½ìš°ì— ë”°ë¼ ë³€ê²½í• ìˆ˜ ìˆë‹¤ëŠ” ë§.
* ì˜ˆë¥¼ ë“¤ì–´ Frustum Cullingì´ ìˆìŒ
    * ê·¸ë ¤ì•¼í•  ë¬¼ì²´ë¥¼ ì¼ë‹¤ GPUì— ë‹¤ ë„£ì–´ë‘ê³  ë‹¤ì‹œ ê·¸ë¦´ì§€ ë§ì§€ë¥¼ GPUì—ì„œ ê²°ì •