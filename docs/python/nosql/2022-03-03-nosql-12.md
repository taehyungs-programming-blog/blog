---
layout: default
title: "12. mongodb ë¬¸ë²• - 2"
parent: (NoSQL)
grand_parent: Python
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/EasyCoding-7/pymongo_examples/blob/main/pymongo_1/pymongo_1/pymongo_7.py)

---

## nor ì—°ì‚°

```py
# nor
docs = actor_collection.find( 
    { 
        '$nor' : 
        [ 
            { 'hits' : { '$gte': 10000 } }, 
            { 'hits' : { '$lt': 1000 } } 
        ] 
    }, 
    { 'ë°°ìš°ì´ë¦„':1, '_id':0 } 
)
for doc in docs:
    print(doc)
```

---

## in/ nin

```py
# in
docs = actor_collection.find( 
    { 
        'hits' : 
        {
            # '$in': [9182]
            '$nin': [9182]
        }
    }, 
    { 'ë°°ìš°ì´ë¦„':1, '_id':0 } 
).limit(3)
for doc in docs:
    print(doc)
```

---

## skip

* **skip** : ê²€ìƒ‰ê²°ê³¼ nê°œë¥¼ ê±´ë„ˆëœ€

```py
# skip
docs = actor_collection.find( 
    { 
        'hits' : 
        {
            '$gte': 10000
        }
    }
)
for doc in docs:
    print(doc)

docs = actor_collection.find( 
    { 
        'hits' : 
        {
            '$gte': 10000
        }
    }
).skip(3)
for doc in docs:
    print(doc)
```

---

## list ë‚´ë¶€ ê²€ìƒ‰

```py
docs = actor_collection.find( 
    { 
        # '$or' : 
        '$and' : 
        [
            { 'ì¶œì—°ì‘': 'ê·¹í•œì§ì—…' },
            { 'ì¶œì—°ì‘': 'ì‚¬ë°”í•˜' }
        ]
    }
)
for doc in docs:
    print(doc)
```

```py
# ì´ë ‡ê²Œ í‘œí˜„í•´ë„ ëœë‹¤.
docs = actor_collection.find( 
    { 
        'ì¶œì—°ì‘' : 
        {
            '$all' :
            [
                'ê·¹í•œì§ì—…',
                'ì‚¬ë°”í•˜'
            ]
        }
    }
)
for doc in docs:
    print(doc)
```

```py
# indexë²ˆí˜¸ë¡œ í™•ì¸ê°€ëŠ¥
docs = actor_collection.find( 
    { 
        'ì¶œì—°ì‘.0' :    # indexê°€ 0ì¸ê²Œ
        'ì‚¬ë°”í•˜'        # ì‚¬ë°”í•˜ì¼ê²½ìš° ì¶œë ¥
    }
)
for doc in docs:
    print(doc)
```

```py
# ì¶œì—°ì‘ì´ 5ê°œì¸ê²½ìš°
docs = actor_collection.find( 
    { 
        'ì¶œì—°ì‘' : { '$size': 5 }
    }
)
for doc in docs:
    print(doc)
```

---

## elemMatch

```py
# ìƒˆë¡œìš´ sample collectionì„ ë§Œë“¤ê³ 
elemmatch_sample = actor_db.sample

# í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°ë¥¼ ë„£ì
elemmatch_sample.insert_many([
    {'results': [82, 85, 88]},
    {'results': [75, 88, 91]}
])
```

ì—¬ê¸°ì„œ ë§Œì•½ 90ì´ìƒ 85ë¯¸ë§Œì„ ê°–ëŠ” documentë¥¼ ì°¾ê³ ì‹¶ë‹¤ë©´?

```py
docs = elemmatch_sample.find({
    'results': { '$gte': 90, '$lt':85 }
})
# ì´ë ‡ê²Œ í•˜ë©´ ë‹¨ì ì´ 90ì´ìƒë„ ìˆê³ , 85ë¯¸ë§Œë„ ìˆëŠ” documentë§Œ ì¶œë ¥
```

```py
# ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ì¶œë ¥í•˜ê²Œ í•˜ê³ ì‹¶ë‹¤ë©´
docs = elemmatch_sample.find({
    'results': { '$elemMatch': { '$gte': 90, '$lt':85 }}
})
```
