---
layout: default
title: "06. async, await"
parent: "(ë¬¸ë²•ğŸ‘¨â€ğŸ’»)"
grand_parent: "Python"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ì •ì˜

```python
import asyncio

# async ì´ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° í•¨ìˆ˜ì„ì„ ë‚˜íƒ€ë‚¸ë‹¤.
async def say_after(delay, what):
    # await ê²°ê³¼ë¥¼ ëŒ€ê¸°í•˜ë¼ë¥¼ ì˜ë¯¸
        # ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ ë¦¬í„´ì´ ì•„ë‹ˆë¼ ëŒ€ê¸°ì„ì„ ê¸°ì–µí•˜ì!
        # ë‹¨, ì—¬ê¸°ì„œ ëŒ€ê¸°ë€ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì´ê¸°ì— ë‹¤ë¥¸ ì‘ì—…ì˜ ìˆ˜í–‰ì„ ì˜ë¯¸
    await asyncio.sleep(delay)
    print(what)

async def main():
    print("Start")
    
    # ë‘ ì½”ë£¨í‹´ì„ ë™ì‹œì— ì‹¤í–‰
    await asyncio.gather(
        say_after(1, 'hello'),
        say_after(2, 'world')
    )

    print("End")

# ë©”ì¸ ì½”ë£¨í‹´ ì‹¤í–‰
asyncio.run(main())

```

---

## Example

```python
import asyncio
import aiohttp

async def download_url(session, url):
    # async with ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ ê°ì²´ë¥¼ as ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜
    async with session.get(url) as response:
        print(f"Reading from {url}")
        return await response.text()

async def main():
    urls = [
        "http://example.com",
        "http://example.org",
        "http://example.net"
    ]

    async with aiohttp.ClientSession() as session:
        tasks = [download_url(session, url) for url in urls]
        downloaded_content = await asyncio.gather(*tasks)
        # ë‹¤ìš´ë¡œë“œ ë°›ì€ ë‚´ìš©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        # ì˜ˆ: íŒŒì¼ì— ì €ì¥í•˜ê¸°, íŒŒì‹±í•˜ê¸° ë“±

# ë©”ì¸ ì½”ë£¨í‹´ ì‹¤í–‰
asyncio.run(main())

```

```python
import asyncio

async def fetch_num(num):
    # ì„ì˜ì˜ ì‹œê°„ ë™ì•ˆ ëŒ€ê¸°í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œë®¬ë ˆì´ì…˜
    await asyncio.sleep(1)
    return num

async def process_numbers():
    # ìˆœì°¨ì ìœ¼ë¡œ ìˆ«ìë¥¼ ê°€ì ¸ì˜¤ê³  ì¶œë ¥
    for i in range(1, 6):
        num = await fetch_num(i)
        print(num)

# ë©”ì¸ ë¹„ë™ê¸° í•¨ìˆ˜ ì‹¤í–‰
asyncio.run(process_numbers())

```