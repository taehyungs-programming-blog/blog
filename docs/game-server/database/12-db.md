---
layout: default
title: "12. [ë¬¸ë²•] SUBQUERY"
parent: "(DATABASE)"
grand_parent: "Game Server ğŸ‘¾"
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

ğŸ³ **SUBQUERY** : sql ëª…ë ¹ë¬¸ ì•ˆì—ì„œ ì§€ì •í•˜ëŠ” í•˜ë¶€ SELECT

```sql
USE BaseballData

-- ì—°ë´‰ì´ ì—­ëŒ€ê¸‰ìœ¼ë¡œ ë†’ì€ ì„ ìˆ˜ ì •ë³´
SELECT TOP 1 *
FROM salaries
ORDER BY salary DESC
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-12-1.png"/>
</p>

ğŸ³ ì—°ë´‰ì´ 1ìœ„ì¸ rodrial01ì˜ ë‹¤ë¥¸ ì •ë³´ë¥¼ ë³´ê³ ì‹¶ë‹¤ë©´?

```sql
SELECT *
FROM players
WHERE playerID = 'rodrial01'
-- rodrial01ë¥¼ ë¯¸ë¦¬ ì•Œê³  ìˆì–´ì•¼ í•˜ë‚˜?
```

ğŸ³ **SUBQUERY**ë¥¼ ì¨ë³´ì

```sql
SELECT *
FROM players
WHERE playerID = (SELECT TOP 1 playerID FROM salaries ORDER BY salary DESC)
-- SUBQUERYê°€ ë¨¼ì € ì‹¤í–‰ë˜ë©° rodrial01ë¥¼ ë¨¼ì € ë°›ì•„ì˜¤ê²Œ ëœë‹¤.
```

ğŸ³ ë‹¤ì¤‘í–‰ì¼ ê²½ìš° INì„ ì‚¬ìš©í•˜ì

```sql
SELECT *
FROM players
WHERE playerID IN (SELECT TOP 20 playerID FROM salaries ORDER BY salary DESC)
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-12-2.png"/>
</p>

```sql
SELECT (SELECT COUNT(*) FROM players) AS playerCount, (SELECT COUNT(*) FROM batting) AS battingCount
```

ğŸ³ INSERT ë‚´ì—ì„œ ì‚¬ìš©í•´ë³´ì

```sql
SELECT *
FROM salaries
ORDER BY yearID DESC

INSERT INTO salareies
VALUE (2020, 'KOR', 'NL', 'name', (SELECT MAX(salary) FROM salaries))
-- ìµœëŒ€ ì—°ë´‰ì— ë§ì¶° ì—°ë´‰ì„ ë„£ìŒ

INSERT INTO salareies
SELECT 2020, 'KOR', 'NL', 'name', (SELECT MAX(salary) FROM salarie
-- ì´ê²ƒë„ ê°€ëŠ¥

INSERT INTO salareies_temp
SELECT yearID, playerID, salary FROM salaries
-- salaries í…Œì´ë¸”ì—ì„œ salareies_temp í…Œì´ë¸”ë¡œ yearID, playerID, salaryë¥¼ ë³µì‚¬
```

---

## ìƒê´€ ê´€ê³„ ì„œë¸Œì¿¼ë¦¬

```sql
-- í¬ìŠ¤íŠ¸ ì‹œì¦Œ íƒ€ê²©ì— ì°¸ì—¬í•œ ì„ ìˆ˜ë“¤ ëª©ë¡
SELECT *
FROM player
WHERE playerID IN (SELECT playerID FROM battingpost)
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-12-3.png"/>
</p>

ğŸ³ ìƒê´€ ê´€ê³„ë¥¼ ì´ìš©í•´ ìœ„ ì •ë³´ë¥¼ ì¶œë ¥í•´ë³´ì

```sql
SELECT *
FROM player
WHERE EXISTS (SELECT playerID FROM battingpost WHERE players.playerID = battingpost.playerID)
-- EXISTS : ê°’ì´ ìˆìœ¼ë©´ ì¶œë ¥ ì—†ìœ¼ë©´ ë¬´ì‹œ
```