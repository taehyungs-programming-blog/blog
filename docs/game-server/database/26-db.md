---
layout: default
title: "26. [íŠœë‹] ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œ"
parent: "(DATABASE)"
grand_parent: "Game Server ğŸ‘¾"
nav_order: 3
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ë³µí•© ì¸ë±ìŠ¤ì˜ ì»¬ëŸ¼ ìˆœì„œ

ğŸ“ ë³µí•© ì¸ë±ìŠ¤ë¥¼ ê±¸ ê²½ìš° **ì¸ë±ìŠ¤ì˜ ìˆœì„œì— ë”°ë¼ ì„±ëŠ¥**ì— ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤.

```sql
-- ë°ì´í„° ìƒì„±
USE Northwind;

SELECT *
INTO TestOrders
FROM Orders;

DECLARE @i INT = 1;
DECLARE @emp INT;
SELECT @emp = MAX(EmployeeID) FROM Orders;

WHILE (@i < 1000)
BEGIN
    INSERT INTO TestOrders(CustomerID, EmployeeID, OrderDate)
    SELECT CustomerID, @emp + @i, OrderDate
    FROM Orders;
    SET @i = @i + 1;
END
GO

-- ë°ì´í„°ê°€ ëª‡ê°œì¸ì§€ ë³´ì
SELECT COUNT(*)
FROM TestOrders;
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-1.png"/>
</p>

```sql
-- ë‘ ê°œì˜ INDEXë¥¼ ìˆœì„œë§Œ ë°”ê¿”ì„œ ê±¸ì–´ë³´ì.
CREATE NONCLUSTERED INDEX idx_emp_ord
ON TestOrders(EmployeeID, OrderDate);

CREATE NONCLUSTERED INDEX idx_ord_emp
ON TestOrders(OrderDate, EmployeeID);
```

```sql
-- ì†ë„ ì²´í¬ë¥¼ ìœ„í•œ ì˜µì…˜ ON
SET STATISTICS TIME ON;
SET STATISTICS IO ON;

SELECT *
FROM TestOrders WITH(INDEX(idx_emp_ord))
WHERE EmployeeID = 1 AND OrderDate = '19970101';

SELECT *
FROM TestOrders WITH(INDEX(idx_ord_emp))
WHERE EmployeeID = 1 AND OrderDate = '19970101';
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-2.png"/>
</p>

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-3.png"/>
</p>

ğŸ“ ì‰??? ì„±ëŠ¥ì— ì°¨ì´ê°€ ì—†ëŠ”ë°???

```sql
SELECT *
FROM TestOrders
ORDER BY EmployeeID, OrderDate;
```

ğŸ“ EmployeeID, OrderDate ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.<br>
ğŸ“ sqlì…ì¥ì—ì„œ `WHERE EmployeeID = 1 AND OrderDate = '19970101';` ëŒ€ë¡œ ê²€ìƒ‰í•´ ë³´ìë©´ `EmployeeID = 1`ì¸ ë¦¬í”„ë¡œ ì´ë™í›„ ìˆœì°¨ì ìœ¼ë¡œ `OrderDate = '19970101'`ì„ ì°¾ê²Œ ëœë‹¤.

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-4.png"/>
</p>

```sql
SELECT *
FROM TestOrders
ORDER BY OrderDate, EmployeeID;
```

ğŸ“ OrderDate, EmployeeID ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.<br>
ğŸ“ sqlì…ì¥ì—ì„œ  `WHERE EmployeeID = 1 AND OrderDate = '19970101';` ëŒ€ë¡œ ê²€ìƒ‰í•´ ë³´ìë©´ `OrderDate = '19970101'`ì¸ ë¦¬í”„ë¡œ ì´ë™í›„ ìˆœì°¨ì ìœ¼ë¡œ `EmployeeID = 1`ë¥¼ ì°¾ê²Œ ëœë‹¤.

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-5.png"/>
</p>

ğŸ“ ë§í•˜ê³ ì í•˜ëŠ” ê²ƒì€ ë‘ INDEX ìˆœì„œì— ë”°ë¼ ê²€ìƒ‰ì˜ ì ˆì°¨ê°€ **í¬ê²Œ ì°¨ì´ê°€ ì—†ë‹¤ëŠ” ê²ƒ**ì´ë‹¤.

---

ğŸ“ ì´ë²ˆì—” **ë²”ìœ„ë¡œ ì°¾ì•„ë³´ì.**

```sql
SELECT *
FROM TestOrders WITH(INDEX(idx_emp_ord))
-- WHERE EmployeeID = 1 AND OrderDate >= '19970101' AND OrderDate <= '19970103';
WHERE EmployeeID = 1 AND OrderDate BETWEEN '19970101' AND '19970103';

SELECT *
FROM TestOrders WITH(INDEX(idx_ord_emp))
WHERE EmployeeID = 1 AND OrderDate BETWEEN '19970101' AND '19970103';
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-6.png"/>
</p>

ğŸ“ ì„±ëŠ¥ì˜ ì°¨ì´ê°€ ì¡´ì¬í•œë‹¤. ğŸ‘‰ ìˆœì„œê°€ EmployeeID, OrderDateì¸ IndexëŠ” `EmployeeID = 1`ë¥¼ ì°¾ê³  OrderDateë„ ì •ë ¬ì´ ë˜ì–´ ìˆê¸°ì— ë¹ ë¥¸ ë°˜ë©´<br>
ğŸ“ ìˆœì„œê°€ OrderDate, EmployeeIDì¸ IndexëŠ”  OrderDateëŠ” ì •ë ¬ì´ ë˜ì–´ ìˆìœ¼ë‚˜ ë²”ìœ„ì´ê¸°ì— ë°©ëŒ€í•˜ë©°, ê·¸ ë°©ëŒ€í•œ ë°ì´í„°ì˜ EmployeeIDë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë‹¤ ëŒì•„ì•¼ í•œë‹¤.

<br>

ğŸ“ **(TIP)** `BETWEEN`ì˜ ë²”ìœ„ê°€ ì‘ì„ ê²½ìš° ğŸ‘‰ IN-LISTë¡œ ëŒ€ì²´í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ë¼

```sql
SET STATISTICS PROFILE ON;

SELECT *
FROM TestOrders WITH(INDEX(idx_ord_emp))
WHERE EmployeeID = 1 AND OrderDate IN ('19970101','19970102' ,'19970103');
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-26-7.png"/>
</p>

ğŸ“ ì†ë„ê°€ ê°œì„ ì´ ë˜ëŠ”ë° `IN`ì˜ ê²½ìš° `OR`ë¬¸ì„ ì“´ë‹¤ê³  ìƒê°í•˜ì