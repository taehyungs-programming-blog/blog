---
layout: default
title: "10. GROUP BY"
parent: "(DATABASE)"
grand_parent: "Game Server ğŸ‘¾"
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```sql
USE BaseballData

-- ë³µìŠµ
-- 2004ë…„ ë³´ìŠ¤í„´ ì†Œì†ì˜ íƒ€ê²©ì •ë³´
SELECT *
FROM batting
WHERE yearId = 2004 AND teamId = 'BOS'

-- Q 2004ë…„ë„ì— ê°€ì¥ ë§ì€ í™ˆëŸ°ì„ ë‚ ë¦° íŒ€ì€?
SELECT *
FROM batting
WHERE yearId = 2004
ORDER BY teamID
-- íŒ€ë³„ í™ˆëŸ°ì˜ ê°œìˆ˜ë¥¼ ì¹´ìš´íŠ¸ í•´ì•¼í•œë‹¤.
-- teamIDë¥¼ ê¸°ì¤€ìœ¼ë¡œ GROUPì„ ë‚˜ëˆ„ì
```

```sql
SELECT teamID   -- teamIDë§Œ ë³´ì—¬ë‹¬ë¼ëŠ” ê²ƒì€ GROUP BYë¥¼ í• ê²½ìš° playerIDì™€ ê°™ì€ stringì •ë³´ëŠ” í•©ì¹˜ê±°ë‚˜ ì–´ë–»ê²Œ í• ìˆ˜ ì—†ê¸°ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.
FROM batting
WHERE yearId = 2004
GROUP BY teamID
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-10-1.png"/>
</p>


íŒ€ê¹Œì§€ ì¶œë ¥ì´ ë¨

```sql
SELECT teamID, COUNT(teamID) AS playerCount, SUM(HR) AS homeRuns
FROM batting
WHERE yearId = 2004
GROUP BY teamID
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/database/basic-10-2.png"/>
</p>

```sql
SELECT TOP 1 teamID, SUM(HR) AS homeRuns
FROM batting
WHERE yearId = 2004
GROUP BY teamID
ORDER BY homeRuns DECS
```

```sql
-- 2004ë…„ë„ì— 200í™ˆëŸ° ì´ìƒì„ ê¸°ë¡í•œ íŒ€
SELECT TOP 1 teamID, SUM(HR) AS homeRuns
FROM batting
WHERE yearId = 2004 AND homeRuns >= 200 -- Error : homeRunsê°€ ìƒì„±ë˜ê¸°ì „ WHEREê°€ í˜¸ì¶œë¨
GROUP BY teamID
ORDER BY homeRuns DECS

--

SELECT TOP 1 teamID, SUM(HR) AS homeRuns
FROM batting
WHERE yearId = 2004
GROUP BY teamID
HAVING SUM(HR) >= 200 -- ê·¸ë£¹ì§€ì • ì´í›„ WHEREê³¼ ë™ì¼
ORDER BY homeRuns DECS

/*
ì‹¤í–‰ìˆœì„œë¥¼ ë‹¤ì‹œ ì •ë¦¬í•˜ë©´
FROM
WHERE
GROUP BY
HAVING
SELECT
ORDER BY
*/
```

```sql
-- ë‹¨ì¼ ë…„ë„ì— ê°€ì¥ ë§ì€ í™ˆëŸ°ì„ ë‚ ë¦° íŒ€ì€?
SELECT teamID, yearID SUM(HR) AS homeRuns
FROM batting
GROUP BY teamID, yearID
ORDER BY homeRuns DECS
```