---
layout: default
title: "PlayerControllerì—ì„œ SceneRenderì—°ê´€ ë¶€ë¶„ ì •ë¦¬"
parent: "(01. SceneRender)"
grand_parent: "(UE Code-Review ğŸ³)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ìš°ì„ , PlayerControllerì— ëŒ€í•´ ì´í•´í•˜ì.

* PlayerControllerëŠ” í”Œë ˆì´ì–´ê°€ ê²Œì„ ì›”ë“œì˜ Pawnì„ ì œì–´í•˜ê¸° ìœ„í•œ í•µì‹¬ í´ë˜ìŠ¤

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/unreal_review_ver3/basic/01.03_01.png"/>
</p>

### ì…ë ¥ì²˜ë¦¬

```cpp
class APlayerController {
    // ì…ë ¥ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
    virtual void InitInputSystem() {
        // PlayerInput ìƒì„±
        PlayerInput = NewObject<UPlayerInput>(this);
        
        // InputComponent ì„¤ì •
        SetupInputComponent();
    }
};
```

### ì¹´ë©”ë¼ ê´€ë¦¬

```cpp
class APlayerController {
    // ì¹´ë©”ë¼ ë§¤ë‹ˆì €ë¥¼ í†µí•œ ì‹œì  ì œì–´
    virtual void UpdateCamera(float DeltaTime) {
        if (PlayerCameraManager) {
            PlayerCameraManager->UpdateCamera(DeltaTime);
        }
    }
};
```

### Pawn ì†Œìœ ê¶Œ ê´€ë¦¬

```cpp
class APlayerController {
    // Pawn ì†Œìœ 
    virtual void Possess(APawn* InPawn) {
        if (InPawn) {
            // ê¸°ì¡´ Pawnê³¼ì˜ ì—°ê²° í•´ì œ
            if (GetPawn()) {
                UnPossess();
            }
            
            // ìƒˆë¡œìš´ Pawnê³¼ ì—°ê²°
            InPawn->PossessedBy(this);
            SetPawn(InPawn);
        }
    }
};
```

---

## Worldì—ì„œ Tickì„ ëŒë©° Controllerì˜ Updateë¥¼ ìœ ë„ í•˜ëŠ” ë¶€ë¶„ ì •ë¦¬ë¦¬

```cpp
class APlayerController : public AController, public IWorldPartitionStreamingSourceProvider
{
    void UpdateCameraManager(float DeltaSeconds)
    {
        if (PlayerCameraManager != NULL)
        {
            PlayerCameraManager->UpdateCamera(DeltaSeconds);
        }
    }

```

### ì¹´ë©”ë¼ ê´€ë ¨ì€ APlayerCameraManagerì—ì„œ ê´€ë¦¬

* í´ë˜ìŠ¤ì˜ ëª©ì ê³¼ ì—­í• 
    * APlayerCameraManagerëŠ” í”Œë ˆì´ì–´ì˜ ì¹´ë©”ë¼ ì‹œì ì„ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤
    * ì£¼ìš” ì—­í• 
        * ì¹´ë©”ë¼ ì‹œì (ViewTarget) ê´€ë¦¬
        * ì¹´ë©”ë¼ ì „í™˜ íš¨ê³¼(ë¸”ë Œë”©) ì²˜ë¦¬
        * ì¹´ë©”ë¼ í¬ìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ íš¨ê³¼ ì ìš©
        * ìµœì¢… ì¹´ë©”ë¼ ì†ì„±ì„ ë Œë”ëŸ¬ì— ì œê³µ

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/unreal_review_ver3/basic/01.03_02.png"/>
</p>

```cpp
// ì¹´ë©”ë¼ ë§¤ë‹ˆì €ë¥¼ í†µí•œ ê¸°ë³¸ì ì¸ ì¹´ë©”ë¼ ì œì–´
class AMyPlayerController : public APlayerController 
{
    void SetupCamera()
    {
        // ì¹´ë©”ë¼ íƒ€ê²Ÿ ì„¤ì •
        ACameraActor* NewCamera = GetWorld()->SpawnActor<ACameraActor>();
        SetViewTarget(NewCamera);

        // ì¹´ë©”ë¼ ìœ„ì¹˜ ì–»ê¸°
        FVector CameraLocation;
        FRotator CameraRotation;
        PlayerCameraManager->GetCameraViewPoint(CameraLocation, CameraRotation);

        // ì¹´ë©”ë¼ FOV ì–»ê¸°
        float CurrentFOV = PlayerCameraManager->GetFOVAngle();
    }
};
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/unreal_review_ver3/basic/01.03_03.png"/>
</p>