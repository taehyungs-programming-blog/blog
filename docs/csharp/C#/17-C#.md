---
layout: default
title: "17. Coroutine"
parent: (C#)
grand_parent: "(C#)"
nav_order: 3
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```csharp
// IntLinkedListë¥¼ ë§Œë“¤ì–´ ë³´ì.
class IntLinkedListEnumerator : IEnumerator
{
    public Node head = null;
    public Node current = null;

    public IntLinkedListEnumerator(Node n) { head = n; }

    public object Current => current.data;

    public bool MoveNext()
    {
        if( current == null )
        {
            current = head;
        }
        else
        {
            current = current.next;
        }

        return current != null;
    }

    public void Reset()
    {
        current = null;
    }
}


class IntLinkedList : IEnumerable
{
    public Node head = null;

    public void AddFirst(int data)
    {
        head = new Node(data, head);
    }

    public IEnumerator GetEnumerator()
    {
        return new IntLinkedListEnumerator(head);
    }
}

// ...

IntLinkedList st = new IntLinkedList();

st.AddFirst(10);
st.AddFirst(20);
st.AddFirst(30);
st.AddFirst(40);
st.AddFirst(50);

IEnumerator<int> e = st.GetEnumberator();
while(e.MoveNext())
{
    Console.WriteLine(e.Current);
}
```

```csharp
// coroutineì„ í™œìš©í•˜ë©´ ìœ„ ì½”ë“œë¥¼ ë‹¨ìˆœí™” í•  ìˆ˜ ìˆë‹¤.
// class IntLinkedListEnumerator : IEnumeratorê°€ ì—†ì–´ë„ ëœë‹¤.
class IntLinkedList : IEnumerable
{
    public Node head = null;

    public void AddFirst(int data)
    {
        head = new Node(data, head);
    }

    public IEnumerator GetEnumerator()
    {
        Node current = head;
        while(current != null)
        {
            yield return current.data;
            current = current.next;
            // ??? - ì´ê²Œ ì™œ ë˜ì§€ ???
        }
    }
}
```

```csharp
public IEnumerator GetEnumerator()
{
    // ì²˜ìŒ MoveNext() í˜¸ì¶œì‹œ ì—¬ê¸°ë¡œ ë“¤ì–´ì˜¨ë‹¤
    Node current = head;
    while(current != null)
    {
        // Current í˜¸ì¶œì‹œ returní˜•ì´ ë„˜ì–´ê°
        yield return current.data;

        // MoveNext() í˜¸ì¶œì‹œ ì—¬ê¸°ë¡œ ë„˜ì–´ê°
        current = current.next;
    }
}

// ì´ëŸ°ë™ì‘ì„ C#ì´í•˜ê²Œ ë„ì™€ì¤€ë‹¤.
// ì´ ë™ì‘ì´ Coroutineì˜ ë™ì‘ì´ë‹¤.
```

---

ğŸ ê·¸ëŸ¼ ê¼­ Enumeratorêµ¬í˜„ì—ë§Œ Coroutineì´ ì‚¬ìš©ë ê¹Œ? -> ê¼­ ê·¸ë ‡ì§€ë§Œì€ ì•Šë‹¤

```csharp
public static int Foo()
{
    Console.WriteLine("1"); return 10;
    Console.WriteLine("2"); return 20;
    Console.WriteLine("3"); return 30;
    Console.WriteLine("4"); return 40;
    Console.WriteLine("5"); return 50;
}

static void Main()
{
    int n1 = Foo(); // 10
    int n2 = Foo(); // 10
}
```

```csharp
public static IEnumerator<int> Foo()
{
    Console.WriteLine("1"); yield return 10;
    Console.WriteLine("2"); yield return 20;
    Console.WriteLine("3"); yield return 30;
    Console.WriteLine("4"); yield return 40;
    Console.WriteLine("5"); yield return 50;
}

static void Main()
{
    IEnumerator<int> e1 = Foo();
    e1.MoveNext();
    e1.Current;                     // 10
    e1.MoveNext();
    e1.Current;                     // 20
    // ...
}
```

```csharp
// IEnumerableë¡œë„ ë°›ì„ ìˆ˜ ìˆë‹¤
public static IEnumerable<int> Foo()
{
    Console.WriteLine("1"); yield return 10;
    Console.WriteLine("2"); yield return 20;
    Console.WriteLine("3"); yield return 30;
    Console.WriteLine("4"); yield return 40;
    Console.WriteLine("5"); yield return 50;
}

static void Main()
{
    IEnumerable<int> c = Foo();
    IEnumerator<int> e1 = c.GetEnumerator();
    // ì´ê±¸ ì™œ ì“°ì§€? -> LINQì—ì„œ í™œìš©ë¨.
}
```