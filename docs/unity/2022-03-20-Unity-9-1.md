---
layout: default
title: "9-1. Scene Manager"
parent: "9. Scene"
grand_parent: Unity
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/EasyCoding-7/unity_tutorials/tree/9.1.1)

ğŸ‘½ í˜„ì¬ëŠ” ëª¨ë“  ì´ˆê¸°í™”ë¥¼ PlayerControllerì—ì„œ í•˜ê³ ìˆëŠ”ë° ë§¤ë²ˆ Playerê°€ ìˆì„êº¼ë¼ëŠ” ë³´ì¥ë„ ì—†ê³  Scene ìì²´ì—ì„œ í•˜ëŠ”ê²Œ ë§ë‹¤.<br>
ğŸ‘½ ê·¸ëŸ¼ Sceneìœ¼ë¡œ ì´ˆê¸°í™”ë¥¼ í• í…ë°, Sceneì—ì„œ Sceneìœ¼ë¡œ ì´ë™í•˜ëŠ” ë²•ì€? <br>

```csharp
public abstract class BaseScene : MonoBehaviour
{
    public Define.Scene SceneType { get; protected set; } = Define.Scene.Unkown;

    void Start()
    {
        
    }

    protected virtual void Init()
    {

    }

    public abstract void Clear();
}
```

```csharp
public class GameScene : BaseScene
{
    // Start is called before the first frame update
    void Start()
    {
        Init();
    }

    protected override void Init()
    {
        base.Init();

        SceneType = Define.Scene.Game;

        // ì´ì œ UIëŠ” GameSceneì—ì„œ ë¶ˆëŸ¬ì˜¨ë‹¤.
        Managers.UI.ShowSceneUI<UI_Inven>();
    }

    public override void Clear()
    {

    }
}
```

ğŸ‘½ ìƒˆë¡œìš´ Sceneì„ ë§Œë“¤ì–´ ë³´ì.<br>
ğŸ‘½ File -> New Scene -> Login Scene ìƒì„±<br>
ğŸ‘½ ìƒˆë¡œìš´ Sceneì„ ë§Œë“¤ì–´ ë³´ë©´ EventSystemì´ ì—†ëŠ”ë° ì´ëŸ¬ë©´ UI ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ì—†ë‹¤. -> EventSystemì„ ë§Œë“¤ê²Œ ë³€ê²½í•˜ì

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-9-1-1.png"/>
</p>

```csharp
public abstract class BaseScene : MonoBehaviour
{
    // ...

    protected virtual void Init()
    {
        // EvnetSystemì„ ì°¾ê³  ì—†ë‹¤ë©´ Prefabìœ¼ë¡œ ë§Œë“¤ì–´ë‘” EventSystem ì‚¬ìš©
        Object obj = GameObject.FindObjectOfType(typeof(EventSystem));
        if (obj == null)
            Managers.Resource.Instantiate("UI/EventSystem").name = "@EventSystem";
    }
```

---

* [Get Code ğŸŒ](https://github.com/EasyCoding-7/unity_tutorials/tree/9.1.2)

ğŸ‘½ LoginSceneì—ì„œ GameSceneìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ í•´ë³´ì.

```csharp
public class UI_Login : BaseScene
{
    public override void Clear()
    {
        
    }

    protected override void Init()
    {
        base.Init();

        SceneType = Define.Scene.Login;
    }

    private void Update()
    {
        if(Input.GetKeyDown(KeyCode.Q))
        {
            // SceneManagerëŠ” Unityì—ì„œ ì§€ì›í•œë‹¤.
            SceneManager.LoadScene("Game");
        }
    }
}
```

ğŸ‘½ ì¶”ê°€ì ìœ¼ë¡œ Build Settingë„ ë³€ê²½í•´ì¤˜ì•¼ ëœë‹¤.<br>
ğŸ‘½ File -> Build Settings ...

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-9-1-2.png"/>
</p>

ğŸ‘½ ì—¬ê¸°ê¹Œì§€ë§Œ í•´ë„ Sceneì´ ì˜ ì „í™˜ëœë‹¤.<br>
ğŸ‘½ í•˜ì§€ë§Œ ì¶”ê°€ê¸°ëŠ¥ì„ ìœ„í•´ ìš°ë¦¬ë§Œì˜ SceneManagerë¥¼ êµ¬í˜„í•´ë³´ì.<br>
ğŸ‘½ C# Script SceneManagerEx ìƒì„±

```csharp
public class SceneManagerEx
{
    public BaseScene CurrentScene { get { return GameObject.FindObjectOfType<BaseScene>(); } }
    public void LoadScene(Define.Scene type)
    {
        CurrentScene.Clear();   // í˜„ì¬ Sceneì„ ë‚ ë¦°ë‹¤.
        SceneManager.LoadScene(GetSceneName(type));
    }

    string GetSceneName(Define.Scene type)
    {
        string name = System.Enum.GetName(typeof(Define.Scene), type);
        return name;
    }
}
```

```csharp
public class UI_Login : BaseScene
{
    // ...

    private void Update()
    {
        if(Input.GetKeyDown(KeyCode.Q))
        {
            // SceneManagerëŠ” Unityì—ì„œ ì§€ì›í•œë‹¤.
            // SceneManager.LoadScene("Game");
            Managers.Scene.LoadScene(Define.Scene.Game);
        }
    }
```
