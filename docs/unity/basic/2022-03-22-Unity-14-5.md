---
layout: default
title: "14-5. ê³µê²©"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/EasyCoding-7/unity_tutorials/tree/14.5)

ğŸ˜ [TIP] `Ctrl + m + o` - Region, Function ë‹«ê¸°<br>
ğŸ˜ [TIP] `Ctrl + m + l` - Region, Function ì—´ê¸°<br>

---

ğŸ˜ ì‚¬ì‹¤ìƒ ë³„ê²Œ ì—†ìŒ...

```csharp
void UpdateMoving()
{
    // íƒ€ê²Ÿì´ ìˆëŠ” ê²½ìš°
    if (_lockTarget != null)
    {
        // ëª¬ìŠ¤í„°ê°€ ë‚´ ì‚¬ì •ê±°ë¦¬ë³´ë‹¤ ê°€ê¹Œìš°ë©´ ê³µê²©
        _destPos = _lockTarget.transform.position;
        float distance = (_destPos - transform.position).magnitude;
        if (distance <= 1)
        {
            State = PlayerState.Skill;

    /*
        public PlayerState State
        {
            get { return _state; }
            set
            {
                _state = value;

                Animator anim = GetComponent<Animator>();
                switch (_state)
                {
                    case PlayerState.Die:
                        break;
                    case PlayerState.Idle:
                        anim.CrossFade("WAIT", 0.1f);
                        break;
                    case PlayerState.Moving:
                        anim.CrossFade("RUN", 0.1f);
                        break;
                    case PlayerState.Skill:
                        anim.CrossFade("ATTACK", 0.1f, -1, 0);
                        break;
                }
            }
        }
    */

            return;
        }
    }

    // ...
```

```csharp
void UpdateSkill()
{
    if (_lockTarget != null)
    {
        Vector3 dir = _lockTarget.transform.position - transform.position;
        Quaternion quat = Quaternion.LookRotation(dir);
        transform.rotation = Quaternion.Lerp(transform.rotation, quat, 20 * Time.deltaTime);
    }
}
```

```csharp
void OnHitEvent()
{
    Debug.Log("OnHitEvent");

    // TODO
    if (_stopSkill)
    {
        State = PlayerState.Idle;
    }
    else
    {
        State = PlayerState.Skill;
    }
}
```

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-14-5-1.png"/>
</p>


