---
layout: default
title: "4. Prefab"
parent: Unity-ê¸°ì´ˆ
grand_parent: "Unity ğŸ¡"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## Prefab

* Sceneì—ì„œ objectë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ Projectì— ë„£ì–´ë³´ì.
    * Tank ì•ˆì— Cubeë¥¼ ë„£ëŠ”ë‹¤
* ì´ë ‡ê²Œ ì €ì¥ëœ objectë¥¼ prefabì´ë¼ í•œë‹¤.
    * ì—¬ê¸°ì„œ ìœ ì˜í•  ì ì€ Cubeì˜ ì¢Œí‘œê³„ëŠ” Tankì¢Œí‘œê³„ë¥¼ ë”°ë¥¸ë‹¤ëŠ” ê²ƒì´ë‹¤.
    * í˜¹ì‹œ Tankë¥¼ íšŒì „í–ˆëŠ”ë° Cubeì˜ ê°ì´ ë³€í•˜ì§€ ì•Šì•„ ë‹¹í™©í•´ í•˜ì§€ ë§ì.
* ??? ê·¸ëƒ¥ objectì•„ë‹ˆëƒ?
    * ì •í™•íˆ ë§í•˜ë©´ ì´ objectë¥¼ ì €ì¥í• ìˆ˜ ìˆëŠ”ë° ì´ ì €ì¥ëœ objectê°€ prefabì´ ëœë‹¤.

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-4-1.png"/>
</p>

* prefabì„ ë”ë¸”í´ë¦­í•˜ë©´ í¸ì§‘í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-4-2.png"/>
</p>

* Prefabë‚´ì— Prefabì„ ì¶”ê°€í• ìˆ˜ ìˆìŒ(Nested Prefab)

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-4-3.png"/>
</p>

---

## Resource Manager

* í•˜ê³ ìí•˜ëŠ” ê²ƒ! - ì½”ë“œë¡œ Prefabì„ ë§Œë“¤ì–´ ë³´ì.

```csharp
public class PrefabTestScripts : MonoBehaviour
{
    public GameObject prefab;

    void Start()
    {
        Object.Instantiate(prefab);
    }
}
```

ğŸ† Unityì—ì„œ ë‚´ê°€ ì›í•˜ëŠ” Prefabì¶”ê°€

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-4-4.png"/>
</p>

```csharp
public class PrefabTestScripts : MonoBehaviour
{
    public GameObject prefab;
    void Start()
    {
        var tank = Object.Instantiate(prefab);

        Destroy(tank, 3.0f/*3ì´ˆ í›„ ì‚­ì œ*/);
    }
}
```

ğŸ† Prefabì„ publicìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ì‹«ë‹¤ë©´??

```csharp
public class PrefabTestScripts : MonoBehaviour
{
    GameObject prefab;
    
    void Start()
    {
        prefab = Resources.Load<GameOBject>("Prefabs/Tank");    // ë‹¨, ê²½ë¡œëŠ” Assests/Resources ì•„ë˜ ìˆì–´ì•¼í•¨.
        var tank = Object.Instantiate(prefab);

        Destroy(tank, 3.0f/*3ì´ˆ í›„ ì‚­ì œ*/);
    }
}
```

ğŸ† ì´ëŸ° Prefabì„ ResourceManagerë¥¼ í†µí•´ì„œ í•´ë³´ì.

```csharp
public class ResourceManager
{
    public T Load<T>(string path) where T : Object
    {
        return Resources.Load<T>(path);
    }

    public GameObject Instantiate(string path, Transform parent = null)
    {
        GameObject prefab = Load<GameObject>($"Prefabs/{path}");

        if(prefab == null)
        {
            Debug.Log($"Failed to load prefab : {path}");
            return null;
        }

        return Object.Instantiate(prefab, parent);
    }

    public void Destroy(GameObject go)
    {
        if (go == null)
            return;

        Object.Destroy(go);
    }
}
```

```csharp
public class Managers : MonoBehaviour
{
    static Managers Instance;
    public static Managers GetInstance() { Init(); return Instance; }

    InputManager _input = new InputManager();
    public static InputManager Input { get { return Instance._input; } }

    // ì „ì—­ì—ì„œ ê´€ë¦¬í•˜ê²Œ ë³€ê²½
    ResourceManager _resource = new ResourceManager();
    public static ResourceManager Resource { get { return Instance._resource; } }

    // ...
```

```csharp
var tank = Managers.Resource.Instantiate("Tank")
Destroy(tank);
```