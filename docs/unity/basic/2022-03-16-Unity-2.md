---
layout: default
title: "2. Manager, Singleton"
parent: Unity-ê¸°ì´ˆ
grand_parent: "Unity ğŸ¡"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class HelloUnity : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
    }

    // Update is called once per frame
    void Update()
    {
        // x, y, zì¶•ì„ 1ë„ì”© ëŒë¦°ë‹¤.
        transform.Rotate(new Vector3(1.0f, 1.0f, 1.0f));
    }
}
```

---

## Manager ë§Œë“¤ê¸°

ğŸ† ë„¤íŠ¸ì›Œí¬ë‚˜ UIë“±ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  Manager í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ ì í•œë‹¤.<br>
ğŸ† ê·¸ëƒ¥ C# ìŠ¤í¬ë¦½ë¥¼ Managerë€ ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì–´ ë„£ìœ¼ë©´ ë ê¹Œ?

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-2-1.png"/>
</p>

```csharp
public class Players : MonoBehaviour
{
    void Start()
    {
        Managers m = new Managers();    // Error - MonoBehaviourë¡œ ìƒì„±ëœ Managerë¥¼ newí• ìˆ˜ ì—†ìŒ.
        // ì´ëŸ°ì‹ìœ¼ë¡œ ë¶€ë¥´ì§€ ë§ê³  unity objectë¥¼ ë§Œë“¤ì–´ì„œ ë¶ˆëŸ¬ì•¼ í•œë‹¤.
    }

    // ...
```

```csharp
public class Players : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        GameObject o = GameObject.Find("@Manager");
        Managers m = o.GetComponent<Managers>();
    }

    // ...
```

ğŸ† ê·¸ëŸ°ë° ì´ëŸ° ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆë‹¤. ì‹¤ìˆ˜ë¡œ @Managerë¥¼ í•˜ë‚˜ ë” ìƒì„±í•´ ë²„ë ¸ë‹¤ë©´??

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/csharp/unity/unity-2-2.png"/>
</p>

ğŸ† ë‘ ê°œì˜ Managerê°€ ìƒì„±ë˜ì–´ ë²„ë¦°ë‹¤.<br>
ğŸ† ê°•ì œë¡œ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ê²Œ í•´ë³´ì.

---

## Singleton

```csharp
public class Managers : MonoBehaviour
{
    static Managers Instance;
    public static Managers GetInstance() { Init(); return Instance; }

    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    // Init ì‹œì ì— ë§Œë“¦ì„ ê¸°ì–µ.
    static void Init()
    {
        if (Instance == null)
        {
            GameObject o = GameObject.Find("@Manager");
            if (o == null)  // @Managerê°€ ì—†ëŠ” ìƒí™©ì„ ëŒ€ë¹„
            {
                // GameObjectì— Managerë¥¼ ë¶™ì—¬ì•¼í•¨ì„ ê¸°ì–µí•˜ì.
                o = new GameObject { name = "@Manager" };
                o.AddComponent<Managers>();
            }

            DontDestroyOnLoad(o);   // ì ˆëŒ€ ì‚­ì œí•˜ì§€ë§ˆë¼
            Instance = o.GetComponent<Managers>();
        }
        
    }
}
```

```csharp
public class Players : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        Managers m = Managers.GetInstance();
    }

    // Update is called once per frame
    void Update()
    {
        
    }
}
```

---

* ì½”ë“œì •ë¦¬

```csharp
public class Managers  MonoBehaviour
{
    static Manager s_instance;
    public static Managers instance { get { Init(); return s_instance; } }

    void Start()
    {
        Init();
    }

    // ... ìƒë™
}
```

