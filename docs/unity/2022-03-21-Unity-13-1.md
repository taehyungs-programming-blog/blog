---
layout: default
title: "13-1. Data Manager"
parent: "13. Data Manager"
grand_parent: Unity-ê¸°ì´ˆ
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/EasyCoding-7/unity_tutorials/tree/13.1)

ğŸ¥ ë°ì´í„° ê´€ë ¨ ë³€ìˆ˜ë¥¼ ë³„ë„ì˜ íŒŒì¼ë¡œ ê´€ë¦¬í•´ ë³´ì.<br>
ğŸ¥ DataManager C# Script ìƒì„±

```csharp
public interface ILoader<Key, Value>
{
    Dictionary<Key, Value> MakeDict();
}

public class DataManager
{
    public Dictionary<int, Stat> StatDict { get; private set; } = new Dictionary<int, Stat>();

    public void Init()
    {
        StatDict = LoadJson<StatData, int, Stat>("StatData").MakeDict();
    }

    Loader LoadJson<Loader, Key, Value>(string path) where Loader : ILoader<Key, Value>
    {
		TextAsset textAsset = Managers.Resource.Load<TextAsset>($"Data/{path}");
        return JsonUtility.FromJson<Loader>(textAsset.text);
	}
}
```

```csharp
[Serializable]
public class Stat
{
    // ë³€ìˆ˜ ì´ë¦„ ìì²´ëŠ” jsonê³¼ ê°™ì•„ì•¼ í•œë‹¤. ì£¼ì˜
	public int level;
	public int hp;
	public int attack;
}

[Serializable]
public class StatData : ILoader<int, Stat>
{
    // ê²€ìƒ‰ì´ ì—†ë‹¤ë©´ List
	public List<Stat> stats = new List<Stat>();

    // ê²€ìƒ‰ì´ í•„ìš”í•˜ë‹¤ë©´ Dictionary
	public Dictionary<int, Stat> MakeDict()
	{
		Dictionary<int, Stat> dict = new Dictionary<int, Stat>();
		foreach (Stat stat in stats)
			dict.Add(stat.level, stat);
		return dict;
	}
}
```

