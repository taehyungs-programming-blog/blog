---
layout: default
title: "16. container - 1"
parent: (C++20)
grand_parent: C++
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

ğŸ˜º ê°„ë‹¨ê°„ë‹¨í•˜ê²Œ containerì— ì–´ë–¤ë¶€ë¶„ì´ ë³€ê²½ì´ ë˜ì—ˆëŠ”ì§€ ì •ë¦¬

## vector, stringê³¼ ê°™ì€ containerì— constexprì‚¬ìš©ê°€ëŠ¥
    
* ì°¸ê³ ë¡œ algorithm ì˜ 100ê°œ ì´ìƒì˜ í•¨ìˆ˜ê°€ constexprë¡œ ë³€ê²½ë¨

```cpp
constexpr int Test()
{
    std::vector<int> v{1,4,5,2,3};
    std::sort(v.begin(), v.end());
    return v.back();
}

// ì»´íŒŒì¼ íƒ€ì„ì— ê°’ì´ ê²°ì •ì´ ë¨
constexpr int ret = Test();

enum
{
    VALUE = Test()  // enumì— ë“¤ì–´ê°ˆìˆ˜ ìˆê²Œëœë‹¤.(ì»´íŒŒì¼íƒ€ì„ì— ê²°ì •ë˜ê¸°ì—)  
};
```

<br>

---

## std::array ë§Œë“œëŠ” ë°©ë²•ì´ ì¶”ê°€ ë¨

```cpp
auto arr1 = std::to_array("Hello World!");

// ìë£Œí˜•ë„ ì§€ì •ê°€ëŠ¥
auto arr2 = std::to_array<int>({1,2,3,4,5});
```

<br>

---

## std::make_sharedë¥¼ í†µí•´ shared_ptr ë°°ì—´ ìƒì„±ì´ ê°€ëŠ¥

```cpp
// ê¸°ì¡´ í¬ì¸í„° ë°°ì—´ ì„ ì–¸, ì‚­ì œ
int* arr3 = new int[10];
delete[] arr3;
```

```cpp
std::shared_ptr<int> sp(new int[10]);
// delete???

std::shared_ptr<int> sp(new int[10], ArrayDeleter<int>()/*ì‚­ì œìë¥¼ ë„£ì–´ì¤˜ì•¼ í•œë‹¤*/);

template<tpyename T>
struct ArrayDeleter
{
    void operator()(const T* ptr)
    {
        delete[] ptr;
    }
}
```

```cpp
// C++20ì—ì„œëŠ” ì•Œì•„ì„œ ì‚­ì œí•´ì¤€ë‹¤
std::shared_ptr<double[]> shared_arr = std::make_shared<double[]>(1024);
```

<br>

---

## erase, erase_if

```cpp
std::vector<int> vec{-1, 2, -3, 4, -5};

// ìŒìˆ˜ë§Œ ì‚­ì œí•´ì•¼í•œë‹¤ë©´?
for (auto it = vec.begin(); it != vec.end(); )
{
    int value = *it;
    if(value < 0)
    {
        it = vec.erase(it);
    }
    else
    {
        it++;
    }
}
// ì‚­ì œë¥¼ ìœ„í•´ì„œ ëª‡ì¤„ì„ ì¨ì•¼í•˜ëŠ” ê±°ì§€??? ê·¸ë¦¬ê³  ì‹¤ìˆ˜í•˜ê¸° ë„ˆë¬´ì¢‹ìŒ
```

<br>

ğŸ˜º ì¡°ê¸ˆ ë” ê°œì„ í•´ë³´ìë©´?

```cpp
std::remove_if(vec.begin(), vec.end() [](int num){return num < 0;});
// ì ˆëŒ€ ì´ë ‡ê²Œ ì“°ë©´ì•ˆë¨
// remove_ifê°€ ìš”ì†Œë¥¼ ì‚­ì œí•˜ëŠ”ê²Œ ì•„ë‹˜
/*
    -1 2 -3 4 -5 ë¼ë©´
    remove_ifë¥¼ ëŒë¦¬ë©´
    2 4 -1 -3 -4
    ìˆœì„œë§Œ ë°”ê¿”ì¤€ë‹¤
*/

// ê·¸ë˜ë„ ê·¸ë˜ë„ ì¨ì•¼ê² ë‹¤ë©´?
auto newEnd = std::remove_if(vec.begin(), vec.end() [](int num){return num < 0;});
vec.erase(newEnd, vec.end());
// ì´... ë­... ê°€ë…ì„±ì´ ë˜¥ë§...
```

<br>

ğŸ˜º C++20ì´ ê·¸ë˜ì„œ ì¤€ë¹„í–ˆë‹¤!

```cpp
std::erase(vec, 2); // 2ë¥¼ ì§€ì›Œì£¼ì„¸ìš”
std::erase_if(vec, [](int num){return num < 0;});
```

<br>

---

## stringì˜ prefix/suffix

```cpp
std::string str = "Hello World!";

bool b1 = std.strart_with("Hello");  // Helloë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
bool b2 = std.strart_with("World!"); // World!ë¡œ ëë‚˜ëŠ”ì§€ í™•ì¸
```

---