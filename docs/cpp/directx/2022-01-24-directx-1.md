---
layout: default
title: "1. ëœë”ë§ íŒŒì´í”„ë¼ì¸ + í”„ë¡œì íŠ¸ ì„¸íŒ…"
parent: (DirectX)
grand_parent: C++
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ëœë”ë§ íŒŒì´í”„ë¼ì¸

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-0.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

<br>

* ë“¤ì–´ê°€ê¸° ì „ ì•Œì•„ ë‘˜ ì 
    * 3D ê·¸ë˜í”½ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ê·¸ë¦´ë•Œ ì˜¤ë¸Œì íŠ¸ë¥¼ **ì‚¼ê°í˜•(ì •ì )**ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.
    * ëŒ€ëµ í•œ í”„ë ˆì„ì´ ê·¸ë ¤ì§ˆë•Œ ìœ„ **íŒŒì´í”„ë¼ì¸**ì´ ëŒì•„ê°„ë‹¤ê³  ìƒê°í•˜ë©´ëœë‹¤.
* Input-Assembler Stage : ì •ì ì •ë³´ê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ ì „ë‹¬
* Vertex Shader Stage : ì •ì ì •ë³´ë¥¼ ì—°ì‚°(ì¢Œí‘œì´ë™ ë“±), ê°€ë ¹ ìºë¦­í„°ì˜ ì›€ì§ì„
* Tessellation Stage(DX12) : ìƒˆë¡œìš´ ì •ì ì„ ê³„ì‚°(ê²½ìš°ì— ë”°ë¼ ì •ì ì´ ì¶”ê°€/ì œê±°ë˜ì–´ì•¼ í•  í•„ìš”ê°€ ìˆìŒ(Ex> ë©€ë¦¬ìˆëŠ” ì‚°ì˜ í‘œí˜„))
    * Hull Shader
    * Tesselator Stage
    * Domain Stage
* Geometry Shader Stage(DX11) : ìƒˆë¡œìš´ ì •ì ì„ ê³„ì‚°, Ex) ê°€ê¹Œì´ ìˆëŠ” ë¬¼ì²´ì˜ ê²½ìš° ìƒˆë¡œìš´ ì •ì ì´ í•„ìš”
* Rasterize Stage : ì—¬ê¸°ë¶€í„° ìƒ‰ìƒì„ ì…íŒë‹¤, ì •ì ì˜ ìƒ‰ìƒ ì •ë³´ ê´€ë¦¬(A, Bì ìœ¼ë¡œ ê°€ë©° ìƒ‰ìƒì„ ì–´ë–»ê²Œ ë³€ê²½í•˜ëŠ”ì§€ ì •ì ê°„ ì„ ì„ ì–´ë–»ê²Œ ê·¸ì„ì§€ ë“±)
* Pixel Shader Stage : ìƒ‰ìƒì„ ë„£ëŠ”ë‹¤
* Output-Merger Stage : ëª¨ë“  ìƒ‰ìƒì„ ì¡°í•©
* **DirectX Library** : ìœ„ì™€ ê°™ì€ íŒŒì´í”„ë¼ì¸ ì‘ì—…ì„ ê°œë°œìê°€ ë§¤ë²ˆ GPUì— ë§ì¶”ì–´ í• ìˆœ ì—†ë‹¤. ê°œë°œìëŠ” íŒŒì´í”„ë¼ì¸ì„ ì–´ë–»ê²Œ ì“°ê²Œ í•´ë‹¬ë¼ê³  DirectXì— ìš”ì²­í•˜ê²Œ ë˜ê³  GPUì˜ ì§ì ‘ì ‘ê·¼ì€ DirectX ê°€ í•´ì¤€ë‹¤.

---

## ê²Œì„ì»¨í…ì¸ ìš© í”„ë¡œì íŠ¸ ìƒì„±

ğŸ˜¸ VS2019ë¡œ ìƒì„±

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-1.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

<br>

ğŸ˜¸ ë©”ì‹œì§€ë£¨í”„ë¥¼ ì•½ê°„ ìˆ˜ì •í•˜ì

```cpp
// ê¸°ë³¸ ë©”ì‹œì§€ ë£¨í”„ì…ë‹ˆë‹¤:
while (true)
{
    // ì´í›„ Updateë¥¼ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ ëŒì•„ì•¼ í•˜ê¸°ì—
    // ë©”ì‹œì§€ê°€ ë“¤ì–´ì˜¬ë•Œë§Œ ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼ ìˆëŠ”ì§€ë¥¼ ì²´í¬í›„ êº¼ë‚´ëŠ” í˜•íƒœë¡œ ë³€ê²½
    if (PeekMessage(&msg, nullptr, 0, 0, PM_REMOVE))
    {
        if (msg.message == WM_QUIT)
            break;

        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    // TODO : ê²Œì„ë¡œì§
}
```

<br>

ğŸ˜º ë¯¸ë¦¬ ì»´íŒŒì¼ëœ í—¤ë” ì‚¬ìš©í•˜ê²Œ ë³€ê²½

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-2.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

<br>

```cpp
// pch.h
#pragma once

#include <vector>
#include <memory>
using namespace std;
```

```cpp
// directx-example.cpp 
#include "pch.h"
// ...
```

<br>

---

## í˜¸ì¶œë  Game class(ê²Œì„ì»¨í…ì¸  í´ë˜ìŠ¤) ìƒì„±

```cpp
// game.h

#pragma once
class Game
{
public:
	void Init();
	void Update();
};
```

```cpp
// game.cpp

#include "pch.h"
#include "Game.h"

void Game::Init()
{
}

void Game::Update()
{
}
```

<Br>

ğŸ˜º Gameì„ ì£¼ê¸°ì ìœ¼ë¡œ Update

```cpp
// main.cpp

int APIENTRY wWinMain(_In_ HINSTANCE hInstance,
                     _In_opt_ HINSTANCE hPrevInstance,
                     _In_ LPWSTR    lpCmdLine,
                     _In_ int       nCmdShow)

// ...

MSG msg;

//Game* game = new Game();
unique_ptr<Game> game = make_unique<Game>();
game->Init();

// ê¸°ë³¸ ë©”ì‹œì§€ ë£¨í”„ì…ë‹ˆë‹¤:
while (true)
{
    if (PeekMessage(&msg, nullptr, 0, 0, PM_REMOVE))
    {
        if (msg.message == WM_QUIT)
            break;

        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    // TODO : ê²Œì„ë¡œì§
    game->Update();
}

// ...
```

---

## DirectX ë¼ì´ë¸ŒëŸ¬ë¦¬ìš© í”„ë¡œì íŠ¸ ìƒì„±

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-3.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

<br>

ğŸ˜º ì—­ì‹œ ë¯¸ë¦¬ì»´íŒŒì¼ëœ í—¤ë” ì¶”ê°€

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-2.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

<br>

ğŸ˜º d3dx12ë¥¼ ì“¸ê²ƒì´ê¸°ì— [d3dx12.h](https://github.com/microsoft/DirectX-Headers/blob/main/include/directx/d3dx12.h)ë¥¼ ë‹¤ìš´ë°›ì•„ì„œ í”„ë¡œì íŠ¸ì— ë„£ì

ğŸ˜º `pch.h`ì— ì•„ë˜ë¥¼ ì¶”ê°€

```cpp
// pch.h

#pragma once

// ê°ì¢… include
#include <windows.h>
#include <tchar.h>
#include <memory>
#include <string>
#include <vector>
#include <array>
#include <list>
#include <map>
using namespace std;

#include "d3dx12.h"
#include <d3d12.h>
#include <wrl.h>
#include <d3dcompiler.h>
#include <dxgi.h>
#include <DirectXMath.h>
#include <DirectXPackedVector.h>
#include <DirectXColors.h>
using namespace DirectX;
using namespace DirectX::PackedVector;
using namespace Microsoft::WRL;

// ê°ì¢… lib
#pragma comment(lib, "d3d12")
#pragma comment(lib, "dxgi")
#pragma comment(lib, "dxguid")
#pragma comment(lib, "d3dcompiler")

// ê°ì¢… typedef
using int8		= __int8;
using int16		= __int16;
using int32		= __int32;
using int64		= __int64;
using uint8		= unsigned __int8;
using uint16	= unsigned __int16;
using uint32	= unsigned __int32;
using uint64	= unsigned __int64;
using Vec2		= XMFLOAT2;
using Vec3		= XMFLOAT3;
using Vec4		= XMFLOAT4;
using Matrix	= XMMATRIX;

void HelloEngine();
```

<br>

ğŸ˜º ë§ˆì§€ë§‰ìœ¼ë¡œ ì¶œë ¥ë””ë ‰í„°ë¦¬ë§Œ ìˆ˜ì •í•´ë³´ì

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/directx/directx-1-4.png" style="border-radius:5%;border:1px solid #e6e1e8"/>
</p>

ğŸ± ë? ë§í‚¹ì„¤ì •ì€??

```cpp
// pch.cpp
#pragma once

// í”„ë¡œì íŠ¸ë§ˆë‹¤ ë§¤ë²ˆ ì„¤ì •í•˜ê¸° ê·€ì°®ê¸°ì— ì´ë ‡ê²Œ í•˜ì
#pragma comment(lib, "Engine.lib")

#include "EnginePch.h"
```