---
layout: default
title: "08. Perspective Projection"
parent: "(DirectX 11 ğŸ‡)"
grand_parent: C++
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Git Clone ğŸŒ](https://github.com/EasyCoding-7/Directx11_Rasterization/tree/8/8_perspectiveprojection)

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/d11/d11-8-1.jpg"/>
</p>

* ê·¸ëŸ°ë° ë‹¨ìˆœíˆ Perspective Projectionì„ ì ìš©ì‹œ ì™œê³¡ì´ ë°œìƒí•˜ê²Œ ëœë‹¤.

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/d11/d11-8-2.jfif"/>
</p>

* ê°„ë‹¨íˆ ë§í•˜ë©´ Interpolationì„ 3D Objectì—ì„œ í•´ì•¼í•˜ëŠ”ë° Screen Viewì—ì„œ í•˜ë‹¤ë³´ë‹ˆ ë°œìƒí•œ ë¬¸ì œì´ë‹¤.

```cpp
// ...

// ì½”ë“œìƒìœ¼ë¡  ê°„ë‹¨

float w0 = EdgeFunction(v1, v2, point) / area;
float w1 = EdgeFunction(v2, v0, point) / area;
float w2 = EdgeFunction(v0, v1, point) / area;

if (w0 >= 0.0f && w1 >= 0.0f && w2 >= 0.0f) {

    // Perspective-Correct Interpolation
    // ë…¼ë¬¸
    // https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
    // í•´ì„¤ê¸€
    // https://www.scratchapixel.com/lessons/3d-basic-rendering/rasterization-practical-implementation/perspective-correct-interpolation-vertex-attributes
    // OpenGL êµ¬í˜„
    // https://stackoverflow.com/questions/24441631/how-exactly-does-opengl-do-perspectively-correct-linear-interpolation

    const float z0 = this->vertexBuffer[i0].z + distEyeToScreen;
    const float z1 = this->vertexBuffer[i1].z + distEyeToScreen;
    const float z2 = this->vertexBuffer[i2].z + distEyeToScreen;

    if (this->usePerspectiveProjection &&
        this->usePerspectiveCorrectInterpolation) {

            // w0, w1, w2ë¥¼ z0, z1, z2ë¥¼ ì´ìš©í•´ì„œ ë³´ì •
        w0 /= z0;
        w1 /= z1;
        w2 /= z2;

        const float wSum = w0 + w1 + w2;

        w0 /= wSum;
        w1 /= wSum;
        w2 /= wSum;
    }

// ...
```