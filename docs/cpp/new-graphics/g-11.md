---
layout: default
title: "11. Component"
parent: "(GraphicsğŸŒ )"
grand_parent: C++
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* [Get Code ğŸŒ](https://github.com/taehyung77/DirextX-Example/tree/11)

* ê²Œì„ì—”ì§„ì€ Object -> Objectë¥¼ ìŒ“ì•„ì„œ ë§Œë“œëŠ” êµ¬ì¡°ì´ë‹¤
* í•˜ë‚˜í•˜ë‚˜ì˜ Objectë¥¼ Componentë¡œ ì •ì˜í•˜ê³  í•„ìš”í•œ Componentë¥¼ ë„£ëŠ”ì‹ìœ¼ë¡œ í•˜ë‚˜ì˜ Objectë¥¼ ë§Œë“ ë‹¤(ê·¸ë§ì´ ê·¸ë§ì¸ê°€?)
    * ì°¸ê³ ë¡œ Unityì˜ ê²½ìš° ìœ„ ì„¤ëª…ì²˜ëŸ¼ Compoenntë¥¼ ì¶”ê°€í•´ì„œ Objectë¥¼ ë§Œë“œëŠ”ê°œë…ì´ê³ 
    * Unrealì˜ ê²½ìš° ìƒì†ì„ í†µí•´ì„œ Objectë¥¼ ë§Œë“œëŠ” ê°œë…ì´ë‹¤.
    * Unrealì´ ì¡°ê¸ˆ ë” ë³´ìˆ˜ì (ììœ ë„ê°€ ë‚®ë‹¤)ì´ë‹¤.
* ì—¬ê¸°ì„œ ë§Œë“œë ¤ëŠ” ê²ƒì€ Componentë¥¼ ë§Œë“¤ì–´ ë³´ë ¤í•œë‹¤.

---

```cpp
// ì‚¬ìš©ë˜ëŠ” Objectë¥¼ Component ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ ì˜ˆì •
class Component
{
public:
	Component(COMPONENT_TYPE type);
	virtual ~Component();


ê·¸ë¦¬ê³  ì´ëŸ° Componentë“¤ì„ Gameobjectë¡œ ëª¨ì•„ì„œ ê´€ë¦¬í•  ì˜ˆì •

class GameObject : public enable_shared_from_this<GameObject>
{
public:
	GameObject();
	virtual ~GameObject();

	void Init();

	void Awake();
	void Start();
	void Update();
	void LateUpdate();

	shared_ptr<Transform> GetTransform();

	void AddComponent(shared_ptr<Component> component);

private:
	array<shared_ptr<Component>, FIXED_COMPONENT_COUNT> _components;
	vector<shared_ptr<MonoBehaviour>> _scripts;
};
```

```cpp
// ì•„ì§ì€ MeshRenderer ì •ë„ë§Œ ë§Œë“¤ì–´ë³´ì

class MeshRenderer : public Component
{
public:
	MeshRenderer();
	virtual ~MeshRenderer();

	void SetMesh(shared_ptr<Mesh> mesh) { _mesh = mesh; }
	void SetMaterial(shared_ptr<Material> material) { _material = material; }

	virtual void Update() override { Render(); }

	void Render();

private:
	shared_ptr<Mesh> _mesh;
	shared_ptr<Material> _material;
};
```

```cpp
shared_ptr<GameObject> gameObject = make_shared<GameObject>();

void Game::Init(const WindowInfo& info)
{
	// ...

	gameObject->Init(); // Transform

	// ...

	gameObject->AddComponent(meshRenderer);	

	GEngine->GetCmdQueue()->WaitSync();
}
```

```cpp
void Game::Update()
{
	GEngine->Update();

	GEngine->RenderBegin();

	gameObject->Update();

	GEngine->RenderEnd();
}

// ì‚¬ì‹¤ìƒ ë‚´ìš©ì€ ì‰½ë‹¤.
```