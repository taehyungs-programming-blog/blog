---
layout: default
title: "6. Name Manling"
parent: (Windows API)
grand_parent: C++
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
// main.cpp
#include "square.h"
int main()
{
    // Error - squareë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
    square(3);
}
```

```cpp
// square.h
#pragma once
int square(int a);
```

```cpp
// square.c
int square(int a)
{
    return a * a;
}
```

<br>

ğŸ˜º ì™œ ê·¸ëŸ´ê¹Œ?

* ì–¸ì–´ ì˜µì…˜ ì¤‘ ë‹¤ìŒ ë‘ ê°€ì§€ê°€ ìˆë‹¤
    * `/Tc` : ì£¼ì–´ì§„ ì†ŒìŠ¤ë¥¼ Cì–¸ì–´ ë¬¸ë²•ìœ¼ë¡œ ì»´íŒŒì¼
    * `/Tp` : ì£¼ì–´ì§„ ì†ŒìŠ¤ë¥¼ C++ì–¸ì–´ ë¬¸ë²•ìœ¼ë¡œ ì»´íŒŒì¼

```bash
# Example
$ cl /Tc squre.c /c /FAs /Faasm1.asm # /Faasm1.asm : ì–´ì…ˆë¸”ë¦¬ íŒŒì¼ì´ë¦„ì„ asm1.asmìœ¼ë¡œ ë§Œë“¤ì–´ë‹¬ë¼
$ cl /Tp squre.c /c /FAs /Faasm2.asm
```

<br>

ğŸ˜º ì´ë ‡ê²Œí•´ì„œ ì–´ì…ˆë¸”ë¦¬íŒŒì¼ì„ ë³´ë©´

* í•¨ìˆ˜ì˜ ì´ë¦„ì´ ë‹¤ìŒê³¼ ê°™ë‹¤
    * C : `_squre`
    * C++ : `?squre@@YAHH@Z` - C++ì€ í•¨ìˆ˜ ì˜¤ë²„ë¡œë”© ë¬¸ë²•ìœ¼ë¡œ ê°™ì€ í•¨ìˆ˜ëª…ì˜ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ê°œ ë‚˜ì˜¬ ìˆ˜ ìˆìŒ. ë”°ë¼ì„œ C++ì—ì„œëŠ” ë§¤ê°œë³€ìˆ˜ + í•¨ìˆ˜ëª…ìœ¼ë¡œ í•´ì„œ ì–´ì…ˆë¸”ë¦¬ì˜ í•¨ìˆ˜ëª…ì´ ì´ìƒí•˜ê²Œ ë‚˜ì˜¨ë‹¤ -> ì´ê±¸ Name Mangling ì´ë¼í•œë‹¤
* ì´ì œ ìœ„ ì½”ë“œì˜ ë¬¸ì œë¥¼ ì•Œ ìˆ˜ ìˆëŠ”ë° main.cppì—ì„œ squre.cë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ëª…ì˜ ê·œì¹™ì´ ê°™ì§€ì•Šê¸°ì— ë§í¬ì—ëŸ¬ê°€ ë°œìƒ!

```cpp
// square.h
#pragma once
// Cë¡œ êµ¬í˜„ë˜ì—ˆìŒì„ ì•Œë ¤ì¤€ë‹¤
extern "C" int square(int a);
```

<br>

ğŸ˜º ì—¬ê¸°ì„œ ë˜ ë¬¸ì œê°€ ë°œìƒ

* `extern "C"`ë¥¼ cì»´íŒŒì¼ëŸ¬ê°€ ëª¨ë¥¸ë‹¤
* `extern "C"` ìì²´ê°€ C++ë¬¸ë²•ì´ë‹¤

<br>

```cpp
// square.h
#pragma once
#ifdef __cplusplus
extern "C" {
#endif
int square(int a);
#ifdef __cpluscplus
}
#endif
```