---
layout: default
title: "15. decltye"
parent: (C++)
grand_parent: (C++)
nav_order: 2
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

```cpp
#include <iostream>

int main() 
{ 
    int n = 10; 
    int& r = n; 
    int* p = &n; 
    const int c = 10; 
    const int& cr = c;

    // ì•„ë˜ì™€ ê°™ì´ ì¶”ë¡ ëœë‹¤.
    decltype(n) d1; // int  d1 
    decltype(r) d2; // int& d2     ì´ˆê¸°í™”ë¬¸ì œ error 
    decltype(p) d3; // int* d3 
    decltype(c) d4; // const int d4  ì´ˆê¸°í™” ë¬¸ì œ error 
    decltype(cr) d5;// const int& d5 ì´ˆê¸°í™” ë¬¸ì œ error 
}
```


```cpp
int x = 10; 
int  foo() { return x; } 
int& goo() { return x; }

int main() 
{ 
//    foo() = 20; // 10 = 20   error (ê°’ íƒ€ì…ì€ lvalueê°€ ë  ìˆ˜ ì—†ìŒ) 
//    goo() = 20; // xì˜ ì°¸ì¡° = 20  ok (ì°¸ì¡° íƒ€ì…ì€ lvalueê°€ ë  ìˆ˜ ìˆë‹¤)

    int n = 10; 
    int* p = &n; 
    
    // decltypeê´„í˜¸ ë‚´ë¶€ì˜ ë¬¸ìëŠ” ì—°ì‚°ì´ í¬í•¨ì‹œ ì°¸ì¡°í˜•ìœ¼ë¡œ ìë™í˜•ë³€í™˜ í•´ì¤€ë‹¤
        // ë‹¨ ì—°ì‚°ì´ l-valueê°€ ë  ìˆ˜ì—†ë‹¤ë©´ ì°¸ì¡°í˜•ì€ ì•ˆë¶‡ìŒ
    decltype(p)  d1;    // int* d1; 
    decltype(*p) d2;    // *ë¼ëŠ” ì—°ì‚°ì´ ìˆê¸°ì— -> int& d2; -> ì´ˆê¸°ê°’ ë¬¸ì œë¡œ error

    decltype(n)    d3;  // int  d3; 
    decltype(n+1)  d4;  // n+1ì´ë¼ëŠ” ì—°ì‚° ì´ê¸´í•˜ë‚˜ n+1ì´ lvalueëŠ” ë  ìˆ˜ ì—†ìŒ -> int  d4; 
    decltype((n))  d5;  // ()ë¼ëŠ” ì—°ì‚°ì´ ìˆê¸°ì— -> int& d5; 
    decltype(n=20) d6;  // n=20ë¼ëŠ” ì—°ì‚°ì´ ìˆê¸°ì— -> int& d6; 

    int x[3] = {1,2,3}; 
     
    decltype(x[0]) d7;  // x[0]ëŠ” ì°¸ì¡°í˜•ì´ê¸°ì— -> int& d7;  
    auto a1 = x[0];     // autoì—ì„œ reference ì†ì„±ì´ ì‚¬ë¼ì ¸ì„œ -> int a1 ê°€ ëœë‹¤(ì£¼ì˜)
    decltype(x) d8;     // int d8[3] 
    auto a2 = x;        // int a2[3] = x ì—ëŸ¬ì´ë¯€ë¡œ 
                        // int* a2 = x;

}
```

```cpp
#include <iostream>

int x = 0; 
int  foo(int a, int b);// { return 0;} 
int& goo(int a, int b) { return x;}

int main() 
{ 
    decltype(foo)      d1;  // int(int, int) 
                            // int d1(int, int)    // í•˜ë‚˜ì˜ í•¨ìˆ˜ì˜ ì„ ì–¸ì´ ëœë‹¤
    decltype(foo(1,2)) d2;  // int - ì£¼ì˜í•  ì ì€ ì§„ì§œ foo(1, 2)ê°€ ì‹¤í–‰ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. decltypeì€ ì»´íŒŒì¼íƒ€ì„ì— ê²°ì •ë˜ê¸°ì— ê·¸ëƒ¥ foo(1, 2)ì˜ ê²°ê³¼ íƒ€ì…ë§Œ ì €ì¥ë¨.
    // ì–´ë ¤ìš´ ë§ë¡œëŠ” í‰ê°€ ë˜ì§€ ì•Šì€ í‘œí˜„ì‹(unevaluated expression)ì´ë¼ í•œë‹¤
//  decltype(goo(1,2)) d3;  // int&


    auto ret1 = goo(1,2); // int ret1 = goo(1, 2) - autoëŠ” referenceë¥¼ ë²„ë¦¬ê¸°ì— intê°€ ëœë‹¤. 
    // decltype(goo(1,2)) ret2 = goo(1, 2);     // int& ret2 = goo(1, 2) - referenceê¹Œì§€ ë°›ìœ¼ë ¤ë©´ decltypeì„ ì“°ì
    // ê·¸ëŸ°ë° decltype(goo(1,2)) ret2 ì´ê±° ì¸ê°„ì ìœ¼ë¡œ ë„ˆë¬´ ê¸¸ì§€ ì•Šë‚˜? -> decltype(auto) íƒ„ìƒ
    decltype(auto) ret2 = goo(1, 2);    // decltype(auto) ret2 = int& ret 
    ret2 = 1000;

    std::cout << x << std::endl; // 1000 
}
```

ğŸ˜º decltype(auto)ëŠ” ì–¸ì œì“°ë‚˜

```cpp
#include <iostream>

/*
// Add(1, 1.2) ì´ë ‡ê²Œ ì¨ë²„ë¦¬ë©´ ì—ëŸ¬ë‚œë‹¤ -> ë°©ì§€í•´ë³´ì 
template<typename T> T Add(T a, T b) 
{ 
    return a + b; 
} 
*/

// í•´ê²°ì±… 1. typenameì„ ë‘ ê°œì“´ë‹¤ë©´?
    // ë¬¸ì œ - ë¦¬í„´ì„ ë­˜ë¡œí• ê»€ì§€ê°€ ì• ë§¤ëª¨í˜¸
template<typename T1, typename T2>  
// decltype(a+b) Add(T1 a, T2 b)  // error - a, bì˜ íƒ€ì…ì´ ì •í•´ì§€ê¸° ì „ decltypeì´ ë¶ˆê°€ëŠ¥ 
//auto Add(T1 a, T2 b) -> decltype(a+b) // suffix returnì„ ì“°ë©´ í‘œí˜„ì€ ê°€ëŠ¥ 
//auto Add(T1 a, T2 b)    // -> ì´ê²Œ ë” ì¢‹ì€ í‘œí˜„ì´ê¸´ í•¨. ë‹¨, a + bê°€ ì°¸ì¡°ë¡œ í‘œí˜„ë˜ë©´ í‘œê¸°ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤

// ëª¨ë“  ë¬¸ì œë¥¼ í•´ê²°ê°€ëŠ¥
decltype(auto) Add(T1 a, T2 b) 
{ 
    return a + b; 
}

```