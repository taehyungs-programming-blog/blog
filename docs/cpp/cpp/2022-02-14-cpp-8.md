---
layout: default
title: "8. constructor"
parent: (C++)
grand_parent: C++
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## ìƒì„±ì í˜¸ì¶œìˆœì„œ

```cpp
#include <iostream>

struct Base
{
	BM bm;
//	Base()      { std::cout << "Base()"    << std::endl; }
	Base(int a) { std::cout << "Base(int)" << std::endl; }
	~Base()     { std::cout << "~Base()"   << std::endl;}
};
struct Derived : public Base 
{
	DM dm;
	Derived()      : Base(0), dm(0) { std::cout << "Derived()" << std::endl;	}
	Derived(int a) : Base(0), dm(0) { std::cout << "Derived()" << std::endl;	}
	~Derived()     { std::cout << "~Derived()" << std::endl;}
};
int main()
{
	Derived d1; 
    // ì»´íŒŒì¼ëŸ¬ê°€ ì´ë ‡ê²Œ ìƒì„±í•´ ì¤€ë‹¤
    /*
        call Derived::Derived()     // Derivedì˜ ìƒì„±ì í˜¸ì¶œ
        Derived() : Base(), dm() {} // Derived ìƒì„±ìì—ì„œ Base() ìƒì„±ì ë§´ë²„ë³€ìˆ˜ dmì˜ ìƒì„±ì í˜¸ì¶œ
        Base() : bm                 // Base ìƒì„±ìì—ì„œ ë©¤ë²„ë³€ìˆ˜ bm ìƒì„±ì í˜¸ì¶œ

        * ìƒì„±ì˜ í˜¸ì¶œ ìˆœì„œ(ìœ„ ìˆœì„œì˜ ì—­ìˆœì´ë¼ ìƒê°)
            * bm()          // ë©¤ë²„ ë°ì´í„°ê°€ ë¨¼ì € í˜¸ì¶œ
            * Base()        // ì´í›„ ê¸°ë°˜í´ë˜ìŠ¤ í˜¸ì¶œ
            * dm()          // ìì‹ ì˜ ë©¤ë²„ ë°ì´í„° í˜¸ì¶œ
            * Derived()     // ìì‹ ì˜ ìƒì„±ì í˜¸ì¶œ
        * ì†Œë©¸ì€ ë°˜ëŒ€ë¡œ í˜¸ì¶œ ëœë‹¤.
            * ~Derived()
            * ~dm()
            * ~Base()
            * ~bm()
    */
	Derived d2(7);
}
```

* [Run This Code ğŸŒ](https://ideone.com/RyEJvE)
* [Compiler Exploer ğŸŒ](https://godbolt.org/z/5z1zqMEqh)

### ì£¼ì˜ì‚¬í•­

* ê°œë°œìê°€ ìƒì„±ì˜ ìˆœì„œë¥¼ ì§€ì •í•  ìˆœ ì—†ë‹¤.

```cpp
struct Derived : public Base 
{
	DM dm;

    // ì•„ë˜ì²˜ëŸ¼ ì½”ë“œë¥¼ ë°”ê¿”ë„ ë¬´ì¡°ê±´ Baseê°€ ë¨¼ì €ìƒì„±ëœë‹¤.
	Derived()      : Base(0), dm(0) { std::cout << "Derived()" << std::endl;	}
    Derived()      : dm(0), Base(0) { std::cout << "Derived()" << std::endl;	}

    // ...
```

* ë””í´íŠ¸ ìƒì„±ìê°€ ì—†ëŠ”ê²½ìš° ìƒì„±ìë¥¼ ì§€ì •í•´ ì¤˜ì•¼í•œë‹¤.

```cpp
struct Base
{
	BM bm;
//  ì´ë ‡ê²Œ ë””í´íŠ¸ ìƒì„±ìê°€ ì—†ì„ê²½ìš°
//	Base()      { std::cout << "Base()"    << std::endl; }
	Base(int a) { std::cout << "Base(int)" << std::endl; }
	~Base()     { std::cout << "~Base()"   << std::endl;}
};
struct Derived : public Base 
{
	DM dm;

    // ì•„ë˜ëŠ” Errorê°€ ë°œìƒ(Baseì˜ ë””í´íŠ¸ ìƒì„±ì ì—†ìŒ)
	Derived()      :  dm(0) { std::cout << "Derived()" << std::endl;	}

    // ...
```

---

## Example(Base from Memeber)

ğŸ˜º ì•„ë˜ ì½”ë“œì˜ ë¬¸ì œì ì€?

```cpp
#include <iostream>

class Buffer
{
public:
	Buffer(std::size_t sz) { std::cout << "initialize buffer" << std::endl;}
	void use() 			   { std::cout << "use buffer" << std::endl;}
};

class Stream
{
public:
	Stream(Buffer& buf) { buf.use();}
};

//--------------
class StreamWithBuffer : public Stream
{
	Buffer buf{1024};
public:
	StreamWithBuffer() : Stream(buf) {}
};

int main()
{
	StreamWithBuffer swb;
    /*
        // ê²°ê³¼ (ì›í•˜ëŠ” ìˆœì„œì™€ ë‹¤ë¥´ê²Œ ìˆœì„œê°€ ë°”ë€Œì˜€ë‹¤.)
        use buffer
        initialize buffer
    */
}
```

```cpp
/*
    // ë³µìŠµí•´ ë³´ìë©´
    * ìƒì„±ì˜ í˜¸ì¶œ ìˆœì„œ(ìœ„ ìˆœì„œì˜ ì—­ìˆœì´ë¼ ìƒê°)
        * bm()          // ë©¤ë²„ ë°ì´í„°ê°€ ë¨¼ì € í˜¸ì¶œ
        * Base()        // ì´í›„ ê¸°ë°˜í´ë˜ìŠ¤ í˜¸ì¶œ
        * dm()          // ìì‹ ì˜ ë©¤ë²„ ë°ì´í„° í˜¸ì¶œ
        * Derived()     // ìì‹ ì˜ ìƒì„±ì í˜¸ì¶œ
*/

class StreamWithBuffer : public Stream
{
    // ìœ„ ê³µì‹ëŒ€ë¡œë¼ë©´ ê¸°ë°˜í´ë˜ìŠ¤(Stream)ê°€ ë¨¼ì € í˜¸ì¶œë˜ê³ 
    // ìì‹ ì˜ ë©¤ë²„ ë°ì´í„°(Buffer)ê°€ í˜¸ì¶œë  ì˜ˆì •
	Buffer buf{1024};           
public:
	StreamWithBuffer() : Stream(buf) {}
};

int main()
{
	StreamWithBuffer swb;
}
```

ğŸ˜º í•´ê²°ì±…?

```cpp
#include <iostream>

class Buffer
{
public:
	Buffer(std::size_t sz) { std::cout << "initialize buffer" << std::endl;}
	void use() 			   { std::cout << "use buffer" << std::endl;}
};

class Stream
{
public:
	Stream(Buffer& buf) { buf.use();}
};

//--------------

class StreamBuffer 
{
protected:
	Buffer buf{1024};
};

class StreamWithBuffer : public StreamBuffer, 
	 			         public Stream
{	
    // StreamBufferê°€ ê¸°ë°˜ í´ë˜ìŠ¤ì´ê¸°ì— ë¨¼ì € ìƒì„±ë˜ê³ 
    // StreamBufferì˜ ë©¤ë²„ ë°ì´í„°ì¸ bufê°€ ìƒì„±ëœ í›„
    // Streamê°€ ìƒì„±ë˜ê²Œ ëœë‹¤.
public:
	StreamWithBuffer() : Stream(buf) {}
};

int main()
{
	StreamWithBuffer swb;
}
```

---

## Example2

```cpp
#include <iostream>

class Base
{
public:
	Base()     { vfunc(); } // Base vfunc (ìƒì„±ìì—ì„œëŠ” ê°€ìƒí•¨ìˆ˜ê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤)
    // ë§Œì•½ ì—¬ê¸°ì„œ Derived vfuncê°€ í˜¸ì¶œëœë‹¤ë©´ í° ë¬¸ì œê°€ ìˆìŒ.
	void foo() { vfunc(); } // Derived vfunc
	virtual void vfunc() { std::cout << "Base vfunc" << std::endl; }
};

class Derived : public Base
{
	int data{10};
public:
	virtual void vfunc() override
	{ 
		std::cout << "Derived vfunc : " << data << std::endl; 
        // Base()ì˜ í˜¸ì¶œì‹œì ì´ dataì˜ ì´ˆê¸°í™” ì „ ì‹œì ì¸ë°
        // vfuncì—ì„œ dataë¥¼ ì“¸ ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
	}
};
int main()
{
	Derived d;
//	d.foo();
}
```