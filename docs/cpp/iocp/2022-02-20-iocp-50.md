---
layout: default
title: "50. Protobuf"
parent: (IOCP)
grand_parent: C++
nav_order: 6
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

ğŸ” ì§€ë‚œ ì½”ë“œì˜ ë¬¸ì œì 

```cpp
while (true)
{
    // [ PKT_S_TEST ]
    PKT_S_TEST_WRITE pktWriter(1001,    // id
                                100,    // hp
                                10);    // attack

    // [ PKT_S_TEST ][BuffsListItem BuffsListItem BuffsListItem]
    PKT_S_TEST_WRITE::BuffsList buffList = pktWriter.ReserveBuffsList(3);
    buffList[0] = { 100, 1.5f };
    buffList[1] = { 200, 2.3f };
    buffList[2] = { 300, 0.7f };

    PKT_S_TEST_WRITE::BuffsVictimsList vic0 = pktWriter.ReserveBuffsVictimsList(&buffList[0], 3);
    {
        vic0[0] = 1000;
        vic0[1] = 2000;
        vic0[2] = 3000;
    }

    PKT_S_TEST_WRITE::BuffsVictimsList vic1 = pktWriter.ReserveBuffsVictimsList(&buffList[1], 1);
    {
        vic1[0] = 1000;
    }

    PKT_S_TEST_WRITE::BuffsVictimsList vic2 = pktWriter.ReserveBuffsVictimsList(&buffList[2], 2);
    {
        vic2[0] = 3000;
        vic2[1] = 5000;
    }

    // í ... ì´ ì½”ë“œê°€ write bufferì— ë°”ë¡œ ë°ì´í„°ë¥¼ ë„£ê¸°ì— ì„±ëŠ¥ì€ ë§¤ìš° ì¢‹ìœ¼ë‚˜
    // ì•„ë¬´ë˜ë„ ì‚¬ìš©ë²•ì´ ê·¸ë¦¬ ì¢‹ì§€ ëª»í•˜ë‹¤. (ì‹¤ìˆ˜ì˜ ì—¬ì§€ê°€ ë§ìŒ.)
        // googleì´ ë§Œë“¤ì–´ì¤€ protobufë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ì„±ì˜ í¸ì˜ë¥¼ ë„ëª¨í•´ ë³´ì.

    SendBufferRef sendBuffer = pktWriter.CloseAndReturn();
```

ğŸ” ì´ ë¬¸ì œë¥´ protobufë¥¼ ì´ìš©í•´ í•´ê²°í•˜ëŠ”ë° ìš°ì„  protobufì˜ ê°„ë‹¨í•œ ì‚¬ìš©ë²•ì€ [ì—¬ê¸° ğŸŒ](https://taehyungs-programming-blog.github.io/blog/docs/cpp/protobuf/2022-02-21-proto-1/)ë¥¼ ì°¸ì¡°


