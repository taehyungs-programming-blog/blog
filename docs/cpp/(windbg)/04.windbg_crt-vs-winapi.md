---
layout: default
title: "04. crt와 win api"
parent: "(Windows Debugging)"
grand_parent: "(C++)"
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

# CRT vs Win API 차이점

## CRT (C Runtime Library)

### 개요
- C/C++ 표준 라이브러리의 구현체
- 플랫폼 독립적이며 이식성이 높음
- ANSI/ISO C 표준을 준수

### 주요 기능

#### 문자열 처리
- `strcpy`, `strlen`, `strcmp`, `strcat`

#### 메모리 관리
- `malloc`, `calloc`, `realloc`, `free`
- `memcpy`, `memset`, `memmove`

#### 파일 입출력
- `fopen`, `fclose`, `fread`, `fwrite`
- `fprintf`, `fscanf`

#### 표준 입출력
- `printf`, `scanf`, `puts`, `gets`

#### 수학 함수
- `sqrt`, `pow`, `sin`, `cos`, `log`

### 코드 예시

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
    // 메모리 할당
    char* str = (char*)malloc(100);
    
    // 문자열 처리
    strcpy(str, "Hello, World!");
    printf("%s\n", str);
    printf("Length: %zu\n", strlen(str));
    
    // 메모리 해제
    free(str);
    
    return 0;
}
```

---

## Win API (Windows API)

### 개요
- Windows 운영체제 전용 API
- 플랫폼 종속적 (Windows에서만 동작)
- Windows의 모든 시스템 기능에 접근 가능

### 주요 기능

#### 윈도우 관리
- `CreateWindow`, `ShowWindow`, `DestroyWindow`
- `MessageBox`, `DialogBox`

#### 파일 시스템
- `CreateFile`, `ReadFile`, `WriteFile`
- `DeleteFile`, `MoveFile`, `CopyFile`

#### 프로세스/스레드 관리
- `CreateProcess`, `CreateThread`
- `WaitForSingleObject`, `ExitProcess`

#### 메모리 관리
- `VirtualAlloc`, `VirtualFree`
- `HeapCreate`, `HeapAlloc`, `HeapFree`

#### 레지스트리
- `RegOpenKey`, `RegSetValue`, `RegQueryValue`

#### GDI (Graphics Device Interface)
- `BitBlt`, `TextOut`, `Rectangle`
- `CreatePen`, `CreateBrush`

### 코드 예시

```c
#include <windows.h>

int main() {
    // 파일 생성
    HANDLE hFile = CreateFile(
        L"test.txt",
        GENERIC_WRITE,
        0,
        NULL,
        CREATE_ALWAYS,
        FILE_ATTRIBUTE_NORMAL,
        NULL
    );
    
    if (hFile != INVALID_HANDLE_VALUE) {
        DWORD bytesWritten;
        const char* text = "Hello, Windows!";
        
        WriteFile(hFile, text, strlen(text), &bytesWritten, NULL);
        CloseHandle(hFile);
    }
    
    // 메시지 박스 표시
    MessageBox(NULL, L"작업 완료!", L"알림", MB_OK);
    
    return 0;
}
```

---

## 주요 차이점 비교

| 구분 | CRT | Win API |
|------|-----|---------|
| **이식성** | 크로스 플랫폼 (Windows, Linux, macOS 등) | Windows 전용 |
| **표준** | ANSI/ISO C/C++ 표준 | Microsoft Windows 표준 |
| **추상화 수준** | 고수준 (추상화됨) | 저수준 (직접적인 시스템 접근) |
| **기능 범위** | 기본적인 프로그래밍 기능 | Windows 모든 시스템 기능 |
| **성능** | 일반적 | 최적화된 시스템 접근 가능 |
| **학습 난이도** | 상대적으로 쉬움 | 상대적으로 어려움 |
| **문서화** | C/C++ 표준 문서 | MSDN (Microsoft Docs) |

---

## 사용 시나리오

### CRT 사용이 적합한 경우
- 크로스 플랫폼 애플리케이션 개발
- 표준 C/C++ 프로그래밍
- 간단한 콘솔 애플리케이션
- 이식성이 중요한 프로젝트

### Win API 사용이 적합한 경우
- Windows GUI 애플리케이션 개발
- Windows 시스템 프로그래밍
- 레지스트리, 서비스 등 Windows 특화 기능 사용
- 최대 성능이 필요한 Windows 전용 프로그램

---

## 실무 활용

대부분의 Windows 애플리케이션은 **CRT와 Win API를 함께 사용**합니다:

```c
#include <stdio.h>      // CRT
#include <windows.h>    // Win API

int main() {
    // CRT 사용 (일반 로직)
    int count = 0;
    for (int i = 0; i < 10; i++) {
        count += i;
    }
    printf("결과: %d\n", count);
    
    // Win API 사용 (Windows 특화 기능)
    MessageBox(NULL, L"계산 완료!", L"알림", MB_OK | MB_ICONINFORMATION);
    
    return 0;
}
```

### 권장 사항
- **일반 로직**: CRT 함수 사용 (이식성 유지)
- **Windows 특화 기능**: Win API 사용
- **성능 최적화**: Win API의 직접적인 시스템 호출 활용
- **유지보수**: 가능한 한 표준 CRT 사용으로 코드 가독성 향상