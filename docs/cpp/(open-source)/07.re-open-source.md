---
layout: default
title: "7. (Telegram) Buttons (Settings Button)"
parent: "(OpenSource ğŸ‘¨â€ğŸ’»)"
grand_parent: (C++)
nav_order: 1
---

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

* ì—¬ê¸°ë¶€í„° ë²„íŠ¼ì„ í•˜ë‚˜í•˜ë‚˜ ë¶„ì„í•´ ë³¼ ì˜ˆì •.
* ì²« ë²ˆì§¸ ë²„íŠ¼ìœ¼ë¡  ê°€ì¥ ì²˜ìŒë³´ì´ëŠ” Settings Buttonì„ ë¶„ì„í•´ ë³¸ë‹¤

<p align="center">
  <img src="https://taehyungs-programming-blog.github.io/blog/assets/images/cpp/opensources/telegram-7-1.png"/>
</p>

```cpp
// ì—¬ê¸°ì„œë¶€í„° ì‹œì‘
class SettingsButton : public Ui::RippleButton {
public:
	SettingsButton(
		QWidget *parent,
		rpl::producer<QString> &&text);

    // ...
```

---

## Ui::RippleButton

```cpp
class RippleButton : public AbstractButton {
public:
    // ...

    private:
	void ensureRipple();

	const style::RippleAnimation &_st;
	std::unique_ptr<RippleAnimation> _ripple;
	bool _forceRippled = false;
	rpl::lifetime _forceRippledSubscription;
```

```cpp
struct RippleAnimation {
	style::color color;
	int showDuration;
	int hideDuration;
};
```

```cpp
void RippleAnimation::paint(
		QPainter &p,
		int x,
		int y,
		int outerWidth,
		const QColor *colorOverride) {
	if (_ripples.empty()) {
		return;
	}

	if (style::RightToLeft()) {
		x = outerWidth - x - (_mask.width() / style::DevicePixelRatio());
	}
	p.translate(x, y);
    // rippleì„ ì ì¬í•˜ê³  ìˆœì°¨ì ìœ¼ë¡œ ê·¸ë¦°ë‹¤.
	for (const auto &ripple : _ripples) {
		ripple->paint(p, _mask, colorOverride);
	}
	p.translate(-x, -y);
	clearFinished();
}
```

```cpp
// ripple ì ì¬
void RippleAnimation::addFading() {
	lastStop();
	_ripples.push_back(std::make_unique<Ripple>(_st, _mask, _update));
}
```

---